/*! For license information please see vn_module.js.LICENSE.txt */
!function(t){var e={};function r(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=43)}([function(t,e,r){"use strict";r.d(e,"d",(function(){return h})),r.d(e,"p",(function(){return p})),r.d(e,"t",(function(){return g})),r.d(e,"c",(function(){return f})),r.d(e,"q",(function(){return v})),r.d(e,"e",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"o",(function(){return y})),r.d(e,"a",(function(){return A})),r.d(e,"v",(function(){return O})),r.d(e,"m",(function(){return _})),r.d(e,"u",(function(){return S})),r.d(e,"l",(function(){return P})),r.d(e,"k",(function(){return C})),r.d(e,"j",(function(){return j})),r.d(e,"f",(function(){return E})),r.d(e,"n",(function(){return D})),r.d(e,"r",(function(){return I})),r.d(e,"g",(function(){return T})),r.d(e,"w",(function(){return k})),r.d(e,"i",(function(){return R})),r.d(e,"h",(function(){return M})),r.d(e,"s",(function(){return x}));var i,o=r(2),n=r(19),a=r.n(n),s=r(7);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c="DOM",u=(null===o.a||void 0===o.a||null===(i=o.a.getChildWriter)||void 0===i?void 0:i.call(o.a,c))||o.a,h=function(t){t.preventDefault(),t.stopPropagation()},p=function(t,e){return t&&("object"==typeof t||"function"==typeof t)&&"string"==typeof t.innerHTML&&(!e||e.toUpperCase()===t.tagName)},g=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},f=function(t,e){var r=[].concat(t).filter((function(t){return t&&t.style}));return Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&r.forEach((function(e){var r=e.style;if(r[t]=i,-1!==["transform","transition","userSelect"].indexOf(t)){var o=""+t[0].toUpperCase()+t.substr(1);["Webkit","Moz","Ms","O"].forEach((function(t){r[""+t+o]=i}))}}))})),t},v=function(t,e){if(void 0===e&&(e=!1),p(t,"video")||p(t,"audio")){u.trace("mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted,2,"pink");var r=t.play();return void 0!==r?r.then((function(){return u.trace("DOM.mediaSafePlay() Autoplay started! element.volume="+t.volume+" element.muted="+t.muted),r})).catch((function(i){if(e)throw u.warn("DOM.mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted+" error:"+(i.message||i)),i;return r})):void 0}return!1},m=function(t,e,r,i){var o=document.createElement(t);switch(typeof e){case"object":f(o,e);break;case"string":o.className=e}return o.innerHTML=r||"",o.addEventListener("click",i),o},b=function(t,e,r,i,o){var n=m(e,r,i,o);return t.appendChild(n)},y=function(t,e,r,i,o){var n=m(e,r,i,o);return t.parentElement.insertBefore(n,t.nextSibling)},A=function(t,e){var r=t.ownerDocument||t.document,i=r.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(r.createTextNode(e)),r.head.appendChild(i)},O=function(t,e){t&&"object"==typeof e&&Object.keys(e).forEach((function(r){return t.setAttribute(r,e[r])}))},w=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},_=function(t,e){for(;t;){if(w(t,e))return!0;t=t.parentNode}return!1},S=function(t,e){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),undefined)}).call(t,e)},P=function(t,e,r){if(void 0===e&&(e=document.body),void 0===r&&(r=1),!t)return u.warn("DOM.getElementsByComplexSelector: Invalid complexSelector ("+t+")"),[];if(!p(e))return u.warn("DOM.getElementsByComplexSelector: Invalid lookupNode ("+e+")"),[];var i=[];return t.split("|").some((function(t){if(S(e,t))return i=[e],!0;var o=e.querySelectorAll(t);if(o.length>0){if(!(o.length<r))return i=Array.from(o),!0;u.trace("DOM.getElementsByComplexSelector: Found target nodes "+o.length+" < "+r)}return!1})),i},C=function(t,e,r,i){if(void 0===e&&(e="100%"),void 0===r&&(r=document.body),void 0===i&&(i=1),!t)return null;if(p(t))return u.trace("DOM.getElementFromOptions() Returning provided DOM node"),t;if("string"==typeof t){var o=P(t,r,i),n=parseInt(e,10)/100;return isNaN(n)?(u.warn("DOM.getElementFromOptions() Invalid playerSelectorPercent ("+n+")"),null):o[n?Math.ceil(o.length*n)-1:0]}return u.warn("DOM.getElementFromOptions() Invalid selector ("+t+")"),null},j=function(t,e){var r=t.parentNode,i=getComputedStyle(t),o=r.style.display;r.style.display="none";var n=i.getPropertyValue(e);return r.style.display=o,n},E=function(t){return b(t,"div",{position:"absolute",transform:"translate(-50%, -50%)",top:"50%",left:"50%"},a.a)},D={position:"absolute",visibility:"hidden"},I={position:"absolute",visibility:"initial"},T=function(t,e){for(var r=[];t.parentNode;)if(r.push(t.parentNode),(t=t.parentNode)===e)return r;return r},k=function(t,e){void 0===e&&(e={});var r,i,o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},{iframeLoadedTimeout:50,maxAttempt:10,manualCheck:!1,onloadCheck:!0},{},e),n=o.iframeLoadedTimeout,a=o.maxAttempt,c=o.onload,u=o.onerror,h=o.manualCheck,p=o.onloadCheck,g=a;if(c){if(V(t))return c(),null;s.i&&(h=!0,p=!1),h&&(r=setInterval((function(){--g;var e=V(t);if(e&&(i&&t.removeEventListener("load",i),c()),(0==--g||e)&&clearInterval(r),!g&&!e)throw new Error(".setIframeEventsHandlers() fail loading iframe")}),n)),p&&(i=function(){clearInterval(r),c()},t.addEventListener("load",i))}return t.addEventListener("error",(function(e){if(clearInterval(r),!s.e)throw console.error(e),u&&u(),new Error(".setIframeEventsHandlers() fail loading iframe");c(),i&&t.removeEventListener("load",i),clearInterval(r)})),r};function V(t){return p(t,"IFRAME")&&t.contentWindow&&"complete"===t.contentWindow.document.readyState||p(t,"DIV")&&t}function R(t,e){return M(t,e&&e.offsetParent)}function M(t,e){var r=0,i=0,o=document;if(e){var n=window,a=e.closest&&e.closest("body"),s=x(document,a);s&&s.length&&(n=s.pop().contentWindow),o=n.document;var l=(getComputedStyle(e)||{}).position;if(~["absolute","relative","fixed"].indexOf(l)){var d=e.getBoundingClientRect(),c=d.top,u=d.left;r=c+n.pageYOffset,i=u+n.pageXOffset}}var h=function(t,e){void 0===e&&(e=document);var r,i={top:0,left:0},o=t&&t.getBoundingClientRect&&t.getBoundingClientRect()||i,n=o.top,a=o.left;if(document===e)r=window;else{var s=x(document,e.body);r=s.length&&s.pop().contentWindow}if(r){var l=r,d=l.pageXOffset;n+=l.pageYOffset,a+=d}var c=t&&t.closest&&t.closest("body"),u=x(e,c);if(u.length){var h=u.reduceRight((function(t,e){var r=e&&e.getBoundingClientRect()||i,o=r.top,n=r.left;t||(t={top:0,left:0});var a=e&&getComputedStyle(e)||{},s=a.paddingLeft,l=a.paddingTop;return t.top+=o+(e&&e.clientTop||0)+(s&&parseFloat(s)||0)+(e&&e.scrollTop||0),t.left+=n+(e&&e.clientLeft||0)+(l&&parseFloat(l)||0)+(e&&e.scrollLeft||0),t}),null);n+=h.top,a+=h.left}return{top:n,left:a}}(t,o);return h.top-=r,h.left-=i,h}function x(t,e){return!e||t&&t.body===e?[]:N(t,e)}function N(t,e,r){void 0===r&&(r={}),r||(r={}),r.children||(r.children=[]);var i=t.querySelectorAll("iframe"),o=!1;return i.length&&Array.from(i).some((function(t){var i;try{i=(t.contentWindow||{}).document}catch(t){return!1}if(i){if(i.body===e){o=[t];for(var n=r;n&&n.element;){o.push(n.element),n=n.parent}return!0}var a={element:t,children:[]};if(a.parent=r,r.children.push(a),(o=N(i,e,a)).length)return!0}return!1})),o}},function(t,e,r){"use strict";r.d(e,"b",(function(){return h})),r.d(e,"g",(function(){return p})),r.d(e,"d",(function(){return g})),r.d(e,"p",(function(){return f})),r.d(e,"t",(function(){return v})),r.d(e,"s",(function(){return m})),r.d(e,"m",(function(){return b})),r.d(e,"j",(function(){return y})),r.d(e,"k",(function(){return A})),r.d(e,"c",(function(){return O})),r.d(e,"i",(function(){return w})),r.d(e,"o",(function(){return P})),r.d(e,"y",(function(){return C})),r.d(e,"x",(function(){return j})),r.d(e,"l",(function(){return E})),r.d(e,"h",(function(){return I})),r.d(e,"a",(function(){return T})),r.d(e,"e",(function(){return k})),r.d(e,"r",(function(){return V})),r.d(e,"u",(function(){return R})),r.d(e,"q",(function(){return x})),r.d(e,"f",(function(){return N})),r.d(e,"n",(function(){return L})),r.d(e,"w",(function(){return F})),r.d(e,"v",(function(){return H}));var i,o=r(0),n=r(11),a=r(2);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c="utils",u=(null===a.a||void 0===a.a||null===(i=a.a.getChildWriter)||void 0===i?void 0:i.call(a.a,c))||a.a,h=function(t,e){return t.reduce((function(t,e){return t.then(e)}),Promise.resolve(e))},p=function(t,e){var r=t&&t.length;if(!r)return Promise.resolve(!1);var i=[];return new Promise((function(o,n){var a=0,s=function(t){if(t>=r)if(i.length){var e=i.filter((function(t){return t.fatal}));n(e.length&&e[0]||i[0])}else o()};t.forEach((function(t){t(e).then((function(){return s(++a)})).catch((function(e){var r=e.message;r&&(e.message=(t&&t.name&&'Extension "'.concat(t.name).concat('": '))+" "+r+". "+(t&&!t.name&&t.toString&&t.toString())),i.push(e),s(++a)}))}))}))},g=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),Math.max(e,Math.min(r,t))},f=function(t){return t.mozHasAudio||t.webkitAudioDecodedByteCount||t.audioTracks&&t.audioTracks.length},v=function(t){return void 0===t&&(t=""),0===(""+t).length||/%|px/.test(""+t)?""+t:t+"px"},m=function(t){return void 0===t&&(t=""),""+t&&!/ms|s/.test(""+t)?t+"ms":""+t};function b(t,e){try{return t.top.location.href}catch(t){}try{var r=t.location.ancestorOrigins;if(r.length>0)return r[r.length-1]}catch(t){}try{if(e.referrer)return e.referrer}catch(t){}return null}function y(t,e){return t||(t=window),e||(e=t.document),b(t,e)||t.location.href}function A(t,e,r){void 0===r&&(r=null),r||(r=t);var i=document.documentElement,o=null,n=null,a=null,s=null;try{o=r.offsetHeight||r.innerHeight||window.innerHeight,n=r.innerWidth||window.innerWidth,s=(a=!isNaN(r.scrollTop)&&r.scrollTop||(window.pageYOffset||i.scrollTop)-(i.clientTop||0))+o}catch(t){u.error("getModuleDimensions() "+t+" ")}var l=e.getBoundingClientRect(),d=t.getBoundingClientRect&&t.getBoundingClientRect().top||0;return{viewportHeight:o,viewportWidth:n,viewportTop:a,viewportBottom:s,moduleTop:l.top+d}}function O(t,e){t&&Object(o.c)(t,{width:v(e.width),height:v(e.height)})}function w(t){if(!Object(o.p)(t))return{};var e=getComputedStyle(t),r=e.paddingTop,i=e.paddingRight,n=e.paddingBottom,a=e.paddingLeft,s=e.marginTop,l=e.marginRight,d=e.marginBottom,c=e.marginLeft,u=e.borderTopWidth,h=e.borderRightWidth,p=e.borderBottomWidth,g=e.borderLeftWidth,f=e.width,v=e.height,m=t.getBoundingClientRect(),b=m.width,y=m.height;f=parseFloat(f)||0,v=parseFloat(v)||0,u=parseFloat(u)||0,h=parseFloat(h)||0,p=parseFloat(p)||0,g=parseFloat(g)||0,r=parseFloat(r)||0,i=parseFloat(i)||0,n=parseFloat(n)||0,a=parseFloat(a)||0,s=parseFloat(s)||0,l=parseFloat(l)||0,d=parseFloat(d)||0,c=parseFloat(c)||0;var A=t.clientWidth,O=t.clientHeight,w=t.offsetHeight,_=t.offsetWidth,S=function(t){return t<0?0:t};return{paddingTop:r,paddingRight:i,paddingBottom:n,paddingLeft:a,marginTop:s,marginRight:l,marginBottom:d,marginLeft:c,top:r+S(s),right:i+S(l),bottom:n+S(d),left:a+S(c),clientWidth:A,clientHeight:O,width:b,height:y,offsetHeight:w,offsetWidth:_,insideWidth:_-a-i-g-h,insideHeight:w-r-n-u-p,outsideWidth:_?_+S(c)+S(l):Math.max(S(c),S(l)),outsideHeight:w?w+S(s)+S(d):Math.max(S(s),S(d)),borderTopWidth:u,borderRightWidth:h,borderBottomWidth:p,borderLeftWidth:g,widthFromStyle:f,heightFromStyle:v,rect:t.getBoundingClientRect()}}function _(t,e){var r=t.getBoundingClientRect(),i=r.bottom-r.top,o=[C(r)];o[0].element=t,j(window,(function(t){if(t){var e=C(t.getBoundingClientRect());e.win=t,o.push(e)}})),o.reverse();var n=o[0].win&&I(o[0].win),a=n&&n.clientWidth||null,s=n&&n.clientHeight||null,l=s?s+o[0].top:null,d=a?a+o[0].left:null;o.reduce((function(t,e){return e.bottom+=t.top,e.top+=t.top,e.right+=t.left,e.left+=t.left,e}));var c=Math.max.apply(null,o.map((function(t){return t.top}))),h=Math.max.apply(null,o.map((function(t){return t.left}))),p=Math.min.apply(null,o.map((function(t){return t.bottom})));null!==l&&(p=Math.min(p,l));var g=Math.min.apply(null,o.map((function(t){return t.right})));null!==d&&(g=Math.min(g,d));var f=c,v=h,m=p,b=g,y=(r.bottom-r.top)*(r.right-r.left),A=(m-f)*(b-v),O=A<=0?0:A/y,w=a*s;if(!A&&!i){var _=o.filter((function(t){return t.element})),S=o.filter((function(t){return!t.element}));_.length&&S.length&&S.some((function(t){return t.top<=_[0].top}))&&S.some((function(t){return t.bottom>=_[0].bottom}))&&(O=1)}u.none(".getVisibilityByRect() intersectionRatio="+O,1);var P={intersectionRatio:O,visibility:100*O^0,moduleSquare:y,screenSquare:w,relationSize:y/w*100^0,boundingClientRect:r};return u.none(".getVisibilityByRect() result="+JSON.stringify(P)),e&&e(P),P;function C(t){return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}}function S(t,e,r){u.none("._getVisibilityByIntersectionObserver");var i=l({},{continueWatch:!1,threshold:[]},{},r).threshold;W&&u.trace("._getVisibilityByIntersectionObserver threshold="+i.join(",")+" ");var o=new IntersectionObserver(function(t){t.forEach((function(t){var r=t.boundingClientRect,i=t.rootBounds,o=t.intersectionRatio,n=t.target,a=M(r.width)*M(r.height),s=i?i.width*i.height:null;if(null!==s){W&&u.trace(".onEntry() entry.intersectionRatio="+o+" target="+N(n)+" screenSquare="+s,1,"pink");var l={intersectionRatio:o,visibility:0^Math.round(100*o),moduleSquare:a,screenSquare:s,relationSize:s?a/s*100^0:null,boundingClientRect:r};e(l)}}))}.bind(this),{threshold:i.sort()});return o.observe(t),o}function P(t,e){var r=this;void 0===e&&(e=100);var i=new Promise((function(t){return setTimeout(t,e,null)})),o=new Promise((function(e){window.IntersectionObserver?S.call(r,t,e,{threshold:[0,1]}):_.call(null,t,e)}));return Promise.race([i,o]).then((function(t){return n.call(r,t)})).catch((function(t){var e=t&&(t.message||t);return u.error(".getVisibility() "+e),n.call(r)}));function n(e){return void 0===e&&(e=null),(e&&Promise.resolve(e)||window.IntersectionObserver&&(e=_.call(null,t))&&Promise.resolve(e)||Promise.resolve(null)).catch((function(t){var e=t&&(t.message||t);return u.error(".getVisibility() "+e),null}))}}function C(t,e,r){var i=l({},{threshold:[],continueWatch:!0,registerHandle:function(){throw Error("utils watchVisibility() registerHandle must be defined")}},{},e),o=i.threshold,n=i.registerHandle,a=i.continueWatch;if(W&&u.trace(".watchVisibility() window.IntersectionObserver="+window.IntersectionObserver+" threshold=["+o.join(",")+"] "),window.IntersectionObserver)return S.call(this,t,r,{continueWatch:a,threshold:o});var s=n(_.bind(null,t,r)),d=s.handler,c=s.event,h=s.scrollNode;return _.call(null,t,r),{disconnect:function(){W&&u.trace("watchVisibility():disconnect() event="+c+" element="+t,1,"pink"),h&&h.removeEventListener(c,d)}}}function j(t,e){for(var r=t,i=t;;){try{r=i.parent&&i.parent.document||i.parent&&i.parent.contentWindow?i.parent:i,r=i,i=i.parent}catch(t){return e&&e(null),I(i)}if(e&&e(D(i,r)),i===r)return I(r)}}function E(t){try{if(t.top&&I(t.top))return t.top}catch(t){return null}return null}function D(t,e){if(!t||!t.frames)return null;if(t===e)return I(t);var r=I(t).querySelectorAll("iframe"),i=[].filter.call(r,(function(t){return t.contentWindow===e}));return i.length?i[0]:null}function I(t){return t&&t.document&&t.document.documentElement||t&&t.contentWindow&&t.contentWindow.document.documentElement||t}var T=function(){var t=null,e=null;this.promise=new Promise((function(r,i){t=r,e=i})),this.resolve=t,this.reject=e};function k(t,e,r){var i=Error(e+" ("+(t&&t.message)+")");return r?i.code=r:t&&t.code&&(i.code=t.code),t&&t.name&&(i.name=t.name),i}var V=function(t){return!t||"object"==typeof t&&(Array.isArray(t)&&!t.length||!Object.keys(t).length)},R=function(t){return t&&(!0===t||"true"===t||"1"===t||1===t)||!1};function M(t,e,r){return void 0===e&&(e=.1),void 0===r&&(r=0),Math.abs(t)>=e?t:r}function x(t,e,r){return void 0===r&&(r=.1),Math.abs(t-e)>r}function N(t,e){void 0===e&&(e=["display","visibility"]);var r=t&&getComputedStyle(t)||{},i=e&&e.length&&Object.keys(r).filter((function(t){return e.includes(t)})).map((function(t){return t+"='"+r[t]+"'"})).join(" ")||"";return t&&t.tagName&&"("+t+")("+t.tagName+"."+(t.className&&t.className.split&&t.className.split(" ").join("."))+") "+i||"[not HTMLElement]"}function L(t,e){if("string"==typeof t){if(t.includes("%")){var r=t.split("%")[0];return parseFloat(r)*parseFloat(e)*.01}return parseFloat(t)}return parseFloat(t)}function F(t,e,r){e&&e.trace("."+(r||"")+". restoreSavedAdParams() Restoring containers");var i=t||[];return i.forEach((function(t){if("function"==typeof t)t();else{var i=t||{},n=i.node,a=i.styles;n&&a&&(Object(o.c)(n,a||{}),e&&e.trace("."+(r||"")+" restoreSavedAdParams() node:"+N(n)+" was restores with styles:\n"+JSON.stringify(a,null,2)+")"))}})),i.length}var W=R(Object(n.b)("intersections.trace")),H=function(t){t&&"function"!=typeof(null==t?void 0:t._subscribe)&&"function"!=typeof(null==t?void 0:t._subscribeOnce)&&(t._subscribe=t.subscribe,t._subscribeOnce=t.subscribeOnce)}},function(t,e,r){"use strict";r.d(e,"b",(function(){return p}));var i,o=r(11),n=r(14);try{i=window.location.search;try{i=window.top.location.search}catch(t){}}catch(t){}var a,s,l=i?/[?&]vn_debug\b(?:=(\d+))?/.exec(i):null,d=l&&l[1];null==d||Object(o.a)(n.b)?(d=parseInt(Object(o.b)(n.c),10)||0)&&(s=" logger: vn_debug("+d+") was restored from localStorage"):(a=" logger: vn_debug="+(d=parseInt(d,10)||0)+" is using and saved to localStorage",Object(o.d)(n.c,d));var c;try{c=window.videonow=window.videonow||{}}catch(t){c={}}if(!c.logger){var u=function(t,e,r){void 0===r&&(r=!0);var i=new n.d({maxLevel:t,header:e}),o=(new Date).getTimezoneOffset()/60,a=o>0?"-":"+";return r&&i.write(n.a.LOG," Videonow logger started with log level "+t+" ("+function(t){return Object.keys(n.a).find((function(e){return n.a[e]==t}))}(t)+") v2.39.27 built "+new Date(1657274153860).toLocaleDateString()+" user timezone UTC"+a+Math.abs(o),"font-weight: bold"),i}(d);a&&u.warn(a,2,"color:#ff5722;font-size:1.5em;font-weight:bold"),s&&u.warn(s,2,"color:#ff5722; font-size:1.5em"),c.logger=u}var h=c.logger;e.a=h;var p=d},function(t,e,r){"use strict";r.d(e,"l",(function(){return h})),r.d(e,"e",(function(){return p})),r.d(e,"d",(function(){return g})),r.d(e,"h",(function(){return f})),r.d(e,"a",(function(){return v})),r.d(e,"j",(function(){return m})),r.d(e,"k",(function(){return b})),r.d(e,"i",(function(){return y})),r.d(e,"g",(function(){return O})),r.d(e,"f",(function(){return w})),r.d(e,"c",(function(){return _})),r.d(e,"b",(function(){return S}));var i,o=r(2),n=r(1),a=r(5);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c="parse",u=(null===o.a||void 0===o.a||null===(i=o.a.getChildWriter)||void 0===i?void 0:i.call(o.a,c))||o.a,h=["global","orderIndex","overwrite","important",a.a,a.b,a.e,a.c],p=function(t,e,r){var i=t&&e?t.querySelector(e):t,o=i&&i.textContent;return"string"==typeof o?o.trim():r},g=function(t,e,r){var i=p(t,e,r);try{return JSON.parse(i)}catch(t){return i}},f=function(t){void 0===t&&(t="");var e=t.includes("?")?t.split("?")[1]||"":t,r=e?e.split("&"):[];return r&&r.length&&r.reduce((function(t,e){var r=e.split("="),i=r[0]&&decodeURIComponent(r[0]),o=r[1]&&decodeURIComponent(r[1]);return(i||o)&&(t[i]=o&&o.replace(/\+/g," ")),t}),{})||{}},v=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});var r=[];Object.keys(e).forEach((function(t){var i=e[t],o=[encodeURIComponent(t)];null!=i&&o.push(encodeURIComponent(i)),r.push(o.join("="))}));var i=t.indexOf("?")>-1?"&":"?";return r.length?t+i+r.join("&"):t},m=function(t){if(!t)return null;if(window.DOMParser){var e=(new window.DOMParser).parseFromString(t,"application/xml");return!e||e.querySelector("parsererror")?(u.warn("parse.parseXml() Parse error"),null):e}if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var r=new window.ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(t),r}return u.warn("parse.parseXml() XML Parser not available"),null},b=function(t,e){if(void 0===e&&(e={}),!t)return null;var r=l({optionName:"option",onlyTopLevel:!1},e),i=r.optionName,o=r.onlyTopLevel,s=t&&(g(t,"important")||t.getAttribute("important")),d=t.querySelector(i+"s"),c=d&&(g(d,"important")||d.getAttribute("important")),u=d&&d.getAttribute("overwrite"),h=t.querySelectorAll(i+"s > "+i);if(!h||!h.length)return null;if(o)return Array.from(h);var f=Array.from(h).reduce((function(t,e){var r,i=e.getAttribute("name"),o=e.getAttribute("important"),l=t[i]=((r={})[a.e]=p(e),r[a.c]=!0,r);return A(e,l),null!=o?l[a.a]=Object(n.u)(o):null!=c?l[a.a]=Object(n.u)(c):null!=s&&(l[a.a]=Object(n.u)(s)),t}),{});return u&&(f[a.b]=u),c?f[a.a]=Object(n.u)(c):s&&(f[a.a]=Object(n.u)(s)),f};"undefined"!=typeof exports&&(exports.parseXmlOptions=b);function y(t,e,r,i){var o=this,n=i||{},a=n.parentPrefix,s=n.multipleOptionName,d=function(t,e,r){void 0===r&&(r="");var i=r+'Extension[type="'+e+'"]',o=t&&t.querySelector(i),n=0;if(o){var a=t.querySelectorAll(r+"Extension"),s=t.querySelectorAll(i+" ~ Extension");n=a.length-s.length-1}return{xml:o,orderIndex:n}}(t,e,a||""),c=d.xml,u=d.orderIndex;if(c){var h=s&&b(c,{optionName:s,onlyTopLevel:!0});return h?A(c,h.reduce((function(t,e){return p.call(o,e,u,t)}),{})):p.call(this,c,u)}return null;function p(t,e,r){var i=g.call(this,t)||{};void 0!==e&&(i.orderIndex=e);var o=i.name;if(!o&&!r)return i;if(!o&&r)throw Error(" getToContainer() the name property does not found");return o&&!r&&(r={}),o&&o.length&&(r[o]=i),r}function g(t){var e=r.call(this,t);if(!e)return null;var i=A(t)||{};return l({},e,{orderIndex:u},i)}}function A(t,e){void 0===e&&(e={});var r=g(t,"global")||Object(n.u)(t.getAttribute("global"));r&&(e.global=r);var i=g(t,"important")||Object(n.u)(t.getAttribute("important"));i&&(e[a.a]=i);var o=g(t,"overwrite")||t.getAttribute("overwrite");null!=o&&(e[a.b]=o);var s=g(t,"remove")||Object(n.u)(t.getAttribute("remove"));return s&&(e[a.d]=s),e}var O=function(t){var e=/^\s*(?:(?:(\d\d):)?(\d\d):)?(\d\d)(?:[.,](\d+))?\s*$/.exec(t);return e?60*(+e[1]||0)*60+60*(+e[2]||0)+(+e[3]||0)+ +("0."+(e[4]||0)):1/0},w=function(t){var e=/^\s*([\d.]+)%\s*$/.exec(t);return e?(+e[1]||0)/100:null},_=function(t){var e=t&&t.querySelectorAll("Ad");if(!e||!e.length)return[];var r=t&&t.querySelectorAll("Extensions > Extension > Ad");return r&&r.length?(e=Array.from(e),r=Array.from(r),e.reduce((function(t,e){return r.includes(e)||t.push(e),t}),[])):Array.from(e)};function S(t){var e=t&&t.querySelector("InLine > Creatives > Creative > Linear > AdParameters");return e?p(e):null}},function(t,e,r){"use strict";e.a={GENERAL_WRAPPER_ERROR:300,TIMEOUT_OF_VAST_URI:301,NO_ADS_RESPONSE:303,GENERAL_LINEAR_ERROR:400,TIMEOUT_OF_MEDIA:402,MEDIA_FILE_NOT_FOUND:403,FAIL_MEDIA_DISPLAY:405,GENERAL_VPAID_ERROR:901,VPAID_JS_ERROR:1010,GLOBAL_TIMEOUT_HAPPENED:1011,VPAID_INIT_AD_TIMEOUT_HAPPENED:1012,START_AD_TIMEOUT_HAPPENED:1013,FORMAT_ERROR:1020,AD_SIZE_ERROR:1030,AD_IMPRESSION_NOT_HAPPENED_ERROR:1040,AD_STARTED_NOT_HAPPENED_ERROR:1041,AD_STAT_ERROR:1050,DEFAULT_AD_NEXT_WITHOUT_ERROR_CODE:1060,FAIL_MEDIA_START:3e3}},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a})),r.d(e,"e",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return c})),r.d(e,"g",(function(){return h})),r.d(e,"h",(function(){return p})),r.d(e,"f",(function(){return g}));var i=r(0),o=r(1),n="__overwrite_type";"undefined"!=typeof exports&&(exports.OVERWRITE_FLAG=n);var a="__important";"undefined"!=typeof exports&&(exports.IMPORTANT_FLAG=a);var s="__value";"undefined"!=typeof exports&&(exports.VALUE_FLAG=s);var l="__primitive";"undefined"!=typeof exports&&(exports.PRIMITIVE_FLAG=l);var d=function(t){var e=(t||{})[n];return e&&e.toLowerCase&&"solid"===e.toLowerCase()},c="__remove";"undefined"!=typeof exports&&(exports.REMOVE_FLAG=c);var u=function(t){return t&&!0===t[a]},h=function t(e){if(void 0===e&&(e={}),e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];a.forEach((function(r){void 0===r&&(r={});var a=!u(e)||u(r),s=d(r);s&&a?e=r:Array.isArray(e)&&Array.isArray(r)?e=Array.from(new Set(e.concat(r))):Object.keys(r).forEach((function(l){var c=r[l];if(void 0!==c&&c!==n)if(!c||"object"!=typeof c||Object(o.r)(c)||Object(i.p)(c))l!==n&&a&&(e[l]=c);else{var h=Object.prototype.hasOwnProperty.call(e,l)&&e[l]||(e[l]=Array.isArray(c)?[]:{}),p=typeof h;e[l]="string"===p||"number"===p||(!u(h)||u(c))&&(s||d(c))?c:t(h,c)}}))}))}return e};"undefined"!=typeof exports&&(exports.extend=h);var p=function t(e,r){return void 0===r&&(r={}),!e||Array.isArray(e)||"object"!=typeof e?e:!0===e[c]?null:!0===e[l]?e[s]:(Object.keys(e).forEach((function(n){var a=e[n],d=null!=a&&!0===a[l];if(a&&!0===a[c])delete r[n];else if(d&&null!=a[s])r[n]=a[s];else if(void 0!==a)if(!a||Array.isArray(a)||"object"!=typeof a||Object(o.r)(a)||Object(i.p)(a))r[n]=a;else{var u=Object.prototype.hasOwnProperty.call(r,n)&&r[n]||(r[n]={});t(a,u)}})),r&&r[l]?r[s]:r)};function g(t,e,r,i){if("global"===e)return t[e]=!0===r,t;var n=r.global,d=null!=n,u=Object(o.u)(n);if(i=d&&u||i,"remove"===e)t[c]=!0===r;else{if("object"==typeof r&&null!==r)return t[e]=Object.entries(r).reduce((function(t,e){return g(t,e[0],e[1],i)}),{}),t;var h;t[e]=((h={})[s]=r,h[l]=!0,h)}return i&&(t[e][a]=!0),t}"undefined"!=typeof exports&&(exports.finalize=p)},function(t,e,r){"use strict";function i(t){this.logger.trace(".setState("+t+")"),this.state=t}function o(t){return-1!==[].concat(t).indexOf(this.state)}function n(){return!o.call(this,["stopped","destroyed","destroying"])}function a(){return!o.call(this,["complete","completing","stopped","destroyed","destroying"])}r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a}))},function(t,e,r){"use strict";r.d(e,"g",(function(){return f})),r.d(e,"a",(function(){return v})),r.d(e,"i",(function(){return m})),r.d(e,"c",(function(){return b})),r.d(e,"e",(function(){return y})),r.d(e,"h",(function(){return A})),r.d(e,"f",(function(){return O})),r.d(e,"d",(function(){return w})),r.d(e,"b",(function(){return S}));var i="undefined"!=typeof window&&window||{},o="undefined"!=typeof navigator&&navigator||{},n=o.userAgent,a=o.vendor,s=o.plugins,l=o.appVersion,d=i.opera,c=i.MSStream,u=(i.devicePixelRatio,i.VN&&i.VN.debug&&i.VN.debug.userAgent||n||a||d||""),h=/iPod/.test(u)&&!c,p=/iPhone/.test(u)&&!c,g=/iPad/.test(u)&&!c,f=h||p||g,v=/android/i.test(u),m=/safari/i.test(u)&&/apple/i.test(a),b=/chrome/i.test(u),y=/firefox|mozilla/i.test(u)&&(!a||!/google/i.test(a)),A=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(u)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(u.substr(0,4)),O=void 0===s||0===s.length?!("undefined"==typeof ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")):s["Shockwave Flash"],w=function(){if(!b)return!1;var t=l.match(/Chrome\/(\d+)\.(\d+)/i);return t&&t.length&&t.length>2?parseFloat(t[1]+"."+t[2]):84}(),_=function(){if(!f)return!1;if("string"!=typeof l)return!1;var t=l.match(/OS (\d+)_(\d+)_?(\d+)?/);return t&&t.length&&t.length>2?parseFloat(t[1]+"."+t[2]):11}(),S=!A||f&&_>10.2;i.document&&i.document.addEventListener("touchstart",(function(){!0})),i.document&&i.document.addEventListener("touchend",(function(){!1}))},function(t,e,r){"use strict";r.d(e,"e",(function(){return p})),r.d(e,"i",(function(){return g})),r.d(e,"h",(function(){return f})),r.d(e,"b",(function(){return v})),r.d(e,"o",(function(){return m})),r.d(e,"c",(function(){return b})),r.d(e,"m",(function(){return A})),r.d(e,"n",(function(){return O})),r.d(e,"l",(function(){return w})),r.d(e,"d",(function(){return _})),r.d(e,"a",(function(){return S})),r.d(e,"j",(function(){return P})),r.d(e,"k",(function(){return C})),r.d(e,"f",(function(){return j})),r.d(e,"g",(function(){return E}));var i,o=r(9),n=r(6),a=r(4),s=r(3),l=r(1),d=r(0),c=r(2),u=(null===c.a||void 0===c.a||null===(i=c.a.getChildWriter)||void 0===i?void 0:i.call(c.a,"ModuleStatistics"))||c.a;function h(t,e){var r=this.getControlUnionData("vnAdErrorsRules","include"),i=this.getControlUnionData("vnAdErrorsRules","exclude"),o=r&&Object.keys(r).map((function(t){return parseInt(t,10)})),n=i&&Object.keys(i).map((function(t){return parseInt(t,10)})),a=this.getControlUnionData("vnAdErrorsRules","availableUrlsPattern");if(this.logger.trace(".filterUrlWithVnAdErrorsRules() url="+t),t&&(this.logger.trace(".filterUrlWithVnAdErrorsRules() availableUrlsPattern="+a),!a||new RegExp(a).test(t)))if(o){if(o.indexOf(e)<0)return null}else if(n&&~n.indexOf(e))return null;return t}function p(t){var e=this,r=t.code,i=t.message,n=void 0===i?"":i,a=this.data.slice().reverse().find((function(t){var e;return Boolean(null==t||null===(e=t.parameters)||void 0===e?void 0:e.id)}))||this.data.slice(-1)[0]||{},l=a.dataXml,d=a.parameters,c=Object(s.c)(l),u=c&&c.length&&c[c.length-1].querySelectorAll("Error"),p=(u&&Array.from(u).map((function(t){var i=Object(s.e)(t);return h.call(e,i,r)})).filter(Boolean)||[]).map((function(t){return t.replace("[ERRORCODE]",encodeURIComponent(r)).replace("[MESSAGE]",encodeURIComponent(n))}));this.logger.trace(".pingCurrentAdError() error="+JSON.stringify(t)+" AdId="+((null==d?void 0:d.id)||null)+" urlsToPingCount="+(null==p?void 0:p.length));var g=(b.call(this,"vnCreative:select")||{}).uniqueId;Object(o.d)(p,(function(t){return e.replaceMacros.call(e,t,g)}))}function g(t,e){var r=this;if(_.call(this)){var i=t.code,l=t.message,d=void 0===l?"":l,c=t.format,u=t.errorUrls,p=function(t){var e=h.call(r,t,i);return e?Object(o.d)([e.replace("[ERRORCODE]",encodeURIComponent(i)).replace("[MESSAGE]",encodeURIComponent(d))],r.replaceMacros.bind(r)):Promise.resolve()},g=function(){return e&&n.b.call(r)&&r.trigger("AdError",d,i)};i===a.a.FORMAT_ERROR&&c&&(this._trackedErrorsFormats[c]||(this._trackedErrorsFormats[c]=!0,g()));var f=function(t,e){var r=(t||{}).dataXml,i=Object(s.c)(r),o=i&&i.length&&i[0].querySelectorAll(e);o&&Array.from(o).forEach((function(t){return p(Object(s.e)(t))}))};u&&u.length&&u.forEach(p),this.data.forEach((function(t){f(t,"InLine>Error"),f(t,"Wrapper>Error")})),g()}}function f(t){var e=this;if(!_.call(this))return Promise.resolve();this.logger.track(".track("+t+")");var r=S.call(this)&&g.bind(this);return Promise.all(this.data.reduce((function(i,n){var a=n.dataXml;return i.concat(Object(o.e)(a,t,e.replaceMacros.bind(e),r))}),[]))}function v(t){var e=this;return Promise.all(this.data.reduce((function(r,i){var o,n=i.parameters;return(null==n||null===(o=n.Trackings)||void 0===o?void 0:o[t])&&r.concat(n.Trackings[t].map((function(t){return e.replaceMacros.call(e,t,n.uniqueId)})))||r}),[]))}function m(t){var e=this;if(!_.call(this))return Promise.resolve();this.logger.track(".trackUrls("+t+")");var r=S.call(this)&&g.bind(this);return Promise.all(this.data.reduce((function(i,n){var a=n.parameters,s=a.Trackings,l=a.uniqueId;return s&&s[t]&&i.concat(Object(o.d)(s[t],(function(t){return e.replaceMacros.call(e,t,l)}),r))||i}),[]))}function b(t){return _.call(this)?(this.logger.none(".getLastExistsTrackUrls("+t+")"),this.data.reduceRight((function(e,r){var i=r.parameters||{},o=i.Trackings,n=i.uniqueId,a=o&&o[t];return e&&e.urls||!a?e:{urls:a,uniqueId:n}}),{})||null):null}function y(t,e,r){var i=this;if(void 0===e&&(e=null),void 0===r&&(r=!0),!_.call(this))return Promise.resolve();this.logger.track(".trackStrongUrls ("+(t&&t.length)+")");var n=S.call(this)&&g.bind(this);return Promise.all(Object(o.d)(t,r&&function(t){return i.replaceMacros.call(i,t,e)},n))}function A(t,e){return void 0===e&&(e=null),y.call(this,t,e,!0)}function O(t,e){return void 0===e&&(e=null),y.call(this,t,e,!1)}function w(){var t=this,e=this.getAdDuration(),r=this.getAdRemainingTime(),i=(e-r)/e,n=this.progressValue;this.progressTrackingEvents.forEach((function(r){var a=r.offset,s=void 0!==r.timeValue?r.timeValue/e:r.percentValue;void 0!==s&&i>=s&&(void 0===n||n<s)&&(t.logger.track(".trackProgress("+a+")"),r&&Object(o.c)(r.url))})),this.progressValue=i}function _(){return!this.getControlUnionData("vnShowViqeo")}function S(){var t=(this.options||{}).checkTrackingResponse;return Object(l.u)(t)}function P(t){var e=this;if(!_.call(this))return Promise.resolve(!1);this._trackPassed=!0;var r=t||this._getLastParameters()||{},i=r.Trackings,o=r.uniqueId,n=i&&i["vnCreative:passed"];return n?(n.forEach((function(t){return e.logger.trace(" trackPassed() url="+t)})),A.call(this,n,o)):Promise.resolve(!1)}function C(){var t=this;if(!_.call(this))return Promise.resolve(!1);this._track2Passed=!0;var e=[],r=function(r){var i=t._getLastData(r);if(!i)return"break";var o=i.parameters;if(!o)return"continue";var n=o||{},a=n.Trackings,s=n.uniqueId,l=a&&a["vnCreative:passed2"];l&&(l.forEach((function(e){return t.logger.trace(" trackPassed2() url="+e+" uniqueId="+s)})),e.push(A.call(t,l,s)))};t:for(var i=0;;i++){switch(r(i)){case"break":break t;case"continue":continue}}return Promise.all(e)}function j(t,e,r){var i,n,a;if(this.logger.track(" vnCreative:debug post("+e+")"),!e)return Promise.resolve();var s=this.getControlUnionData("vnMacros"),l=s&&s["[ASSETADPARAMS]"]||this.getControlUnionData("vnMacros","[ASSETADPARAMS]"),c=s&&s["[ASSETURI]"]||this.getControlUnionData("vnMacros","[ASSETURI]"),h=this._getLastDataXml(),p=this.format&&this.format.getModuleNode&&this.format.getModuleNode(),g=Object(d.p)(p)&&p.outerHTML||"",f=this.getControlNode("iframe"),v=(null==f||null===(i=f.contentWindow)||void 0===i||null===(n=i.document)||void 0===n||null===(a=n.body)||void 0===a?void 0:a.outerHTML)||"",m=this.getControlNode("container"),b=m&&Array.from(m.querySelectorAll("iframe")).map((function(t){try{return t.contentWindow.document.body.outerHTML}catch(t){return null}}));return this.replaceMacros(e,r).then((function(e){return Object(o.f)(e,{method:"POST",requestHeaders:{"Content-Type":"application/json"},body:JSON.stringify({id:t,log:u.archive.join("\n"),logs:null==u?void 0:u.logs,vast:h&&(h.innerHTML||h.documentElement.innerHTML),params:l,media:c,node:g,iframe:v,iframes:b&&b.length?b.filter((function(t){return!!t})):[]})})})).catch((function(){return Promise.resolve()}))}function E(){var t=b.call(this,"vnCreative:impression")||{},e=t.urls,r=t.uniqueId,i=(e||[])[0];if(this.logger.track(" vnCreative:impression post("+i+")"),i){var n=this.getControlUnionData("vnMacros"),a=n&&n["[ASSETADPARAMS]"]||this.getControlUnionData("vnMacros","[ASSETADPARAMS]"),l=n&&n["[ASSETURI]"]||this.getControlUnionData("vnMacros","[ASSETURI]"),d=n&&n["[ASSETDURATION]"]||this.getControlUnionData("vnMacros","[ASSETDURATION]"),c=this._getLastDataXml(),u=c&&Object(s.d)(c,"VideoClicks > ClickThrough","");this.replaceMacros(i,r).then((function(t){return Object(o.f)(t,{method:"POST",requestHeaders:{"Content-Type":"application/json"},body:JSON.stringify({params:a,duration:d,media:l,clickthrough:u})})}))}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"f",(function(){return h})),r.d(e,"c",(function(){return p})),r.d(e,"e",(function(){return g})),r.d(e,"d",(function(){return f}));var i,o=r(5),n=r(3),a=r(7),s=r(2),l="requests",d=(null===s.a||void 0===s.a||null===(i=s.a.getChildWriter)||void 0===i?void 0:i.call(s.a,l))||s.a,c=function(t,e){return void 0===e&&(e=window.document),new Promise((function(r,i){if(!t)throw new Error("requests.loadScript("+t+", "+e+") Invalid url");var o=e.getElementsByTagName("head")[0],n=e.createElement("script");n.src=t,n.type="text/javascript",n.addEventListener("load",r),n.addEventListener("error",i),o.appendChild(n)}))},u=function(t,e){if(void 0===e&&(e=!1),t)if(a.g||e){var r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("target","_blank");var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),r.dispatchEvent(i)}else d.trace("requests.openUrl() window.open("+t+")"),window.open(t,"_blank");else d.warn("requests.openUrl("+t+") invalid url")},h=function(t,e){return void 0===e&&(e={}),new Promise((function(r,i){if(!t)throw new Error("Invalid url ("+t+")");var n=e,a=n.overrideMimeType,s=n.options,l=n.body,d=n.timeout,c=void 0===d?5e3:d,u=n.requestHeaders,h=void 0===u?{}:u,p=n.method,g=void 0===p?"GET":p,f=n.withCredentials,v=void 0===f||f,m=new XMLHttpRequest;m.addEventListener("load",r),m.addEventListener("error",i),m.addEventListener("timeout",i),m.withCredentials=v,a&&m.overrideMimeType(a),s&&Object(o.g)(m,s),m.open(g,t,!0),m.timeout=c,h&&Object.getOwnPropertyNames(h).forEach((function(t){m.setRequestHeader(t,h[t])})),m.send(l)}))},p=function(t){return new Promise((function(e){var r=t.startsWith("data:")?"":(~t.indexOf("?")?"#":"?vn=")+Math.random().toString(10).substring(2,5),i=document.createElement("img");i.onload=e,i.onerror=function(){e()},i.src=""+t+r}))},g=function(t,e,r,i){void 0===r&&(r=function(t){return Promise.resolve(t)});var o=e?t.querySelectorAll(e):[t];return Array.from(o).map((function(t){return r(Object(n.e)(t)).then((function(t){return p(t,i)}))}))},f=function(t,e,r){return t&&t.map((function(t){return(e||function(t){return Promise.resolve(t)})(t).then((function(t){return p(t,r)}))}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"c",(function(){return p})),r.d(e,"e",(function(){return g})),r.d(e,"b",(function(){return f})),r.d(e,"d",(function(){return v})),r.d(e,"f",(function(){return y}));var i=r(15),o=r(3),n=r(2),a=r(1);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c="Vpaid",u=function(t){var e,r;function i(e){var r;void 0===e&&(e={});var i=e&&e.ancestor&&""+e.ancestor||"Module::Vpaid",o=e&&(e.logger||e.moduleAPI&&e.moduleAPI.logger)||n.a;return o.trace(i+".constructor() options.ancestor="+i),(r=t.call(this,l({},e,{ancestor:i,logger:o}))||this).Vpaid=i,r.options=e,r.logger=o,r.adLinear=!0,r.adWidth=0,r.adHeight=0,r.adExpanded=!1,r.adSkippableState=!0,r.adRemainingTime=0,r.adDuration=0,r.adVolume=0,r.adCompanions="",r.adIcons=!1,r.tapholdTimer=null,r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.getAdLinear=function(){return this.adLinear},o.getAdWidth=function(){return this.adWidth},o.getAdHeight=function(){return this.adHeight},o.getAdAspectRatio=function(){var t=this.getAdWidth(),e=this.getAdHeight();return isNaN(t)||isNaN(e)||0===t?9/16:e/t},o.getAdExpanded=function(){return this.adExpanded},o.getAdSkippableState=function(){return this.adSkippableState},o.getAdRemainingTime=function(){return this.adRemainingTime},o.getAdDuration=function(){return this.adDuration},o.getAdElapsedTime=function(){var t=this.getAdDuration(),e=this.getAdRemainingTime();return t===1/0||e===1/0?0:t-e},o.getAdVolume=function(){return this.adVolume},o.getAdCompanions=function(){return this.adCompanions},o.getAdIcons=function(){return this.adIcons},o.handshakeVersion=function(t){return"2.0"},o.initAd=function(t,e,r,i,o,n){return void 0===o&&(o={}),void 0===n&&(n={}),this.adLinear=!0,this.adWidth=t,this.adHeight=e,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=this.adVolume||0,this.adCompanions="",this.adIcons=!1,this.viewMode=r,this.desiredBitrate=i,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.options=l({},this.options,{},n.options),Promise.resolve()},o.resizeAd=function(t,e,r){void 0===r&&(r=this.viewMode),this.adWidth=t,this.adHeight=e,this.viewMode=r,this.trigger("AdSizeChange")},o.startAd=function(){this.trigger("AdStarted")},o.stopAd=function(){this.trigger("AdStopped")},o.pauseAd=function(){this.trigger("AdPaused")},o.resumeAd=function(){this.trigger("AdResumed"),this.trigger("AdPlaying")},o.expandAd=function(){this.setAdExpanded(!0)},o.collapseAd=function(){this.setAdExpanded(!1)},o.skipAd=function(){this.trigger("AdSkipped")},o.setAdExpanded=function(t){this.adExpanded!==t&&(this.adExpanded=t,this.trigger("AdExpandedChange"))},o.setAdSkippableState=function(t){return this.adSkippableState!==t&&(this.logger.trace("."+this.Vpaid+" setAdSkippableState("+t+") prev="+this.adSkippableState),this.adSkippableState=t,this.trigger("AdSkippableStateChange"),!0)},o.setAdVolume=function(t,e){var r=this;return void 0===e&&(e={}),this.adVolume!==t?(this.adVolume=t,setTimeout((function(){return r.trigger("AdVolumeChange")}),1),t):(e.forceTrigger&&this.trigger("AdVolumeChange"),null)},o._destroy=function(){this.logger.trace(this.Vpaid+"._destroy()"),t.prototype._destroy.call(this),this.trigger("AdDestroyed"),this.creativeData=null,this.environmentVars=null,this.options=null},i.create=function(){throw new Error("Abstract method call Vpaid.create()")},o.getMediaInfo=function(){return Promise.resolve(this.media||{})},o.getDebugInfo=function(){return Promise.resolve({options:this.options})},o.getAdIframes=function(){return Promise.resolve(null)},o.toString=function(){return c},i}(i.a),h="InLine > Creatives > Creative > Linear > MediaFiles",p=function(t,e,r){void 0===r&&(r=!1);var i=t&&t.querySelectorAll(h+' > MediaFile[type="'+e+'"]');if(!i||!i.length)return null;var n=Array.from(r?i:[i[0]]).map((function(t){return{src:Object(o.e)(t),width:Number(t.getAttribute("width"))||0,height:Number(t.getAttribute("height"))||0,bitrate:Number(t.getAttribute("bitrate"))||0,scalable:void 0===t.getAttribute("scalable")||Object(a.u)(t.getAttribute("scalable")),maintainAspectRatio:null!==t.getAttribute("maintainAspectRatio")?"true"===t.getAttribute("maintainAspectRatio"):t.getAttribute("maintainAspectRatio"),delivery:t.getAttribute("delivery"),type:e}}));return r?n:n[0]},g=function(t){var e=t&&t.querySelectorAll(h+" > MediaFile");return!e||!e.length},f=function(t){return t&&Object(o.e)(t,"InLine>Creatives>Creative>Linear>Duration")},v=function(t){return t&&["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd"].every((function(e){return"function"==typeof t[e]}))},m="video",b=[m,"audio","hybrid"],y=function(t){var e=t.getAttribute("adType");return b.includes(e)?e:m}},function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return p}));var i,o,n,a,s="videonow-config";try{i=localStorage,o=sessionStorage}catch(t){o=i={getItem:function(){return""},setItem:function(){return""}}}try{n=top.localStorage,a=top.sessionStorage}catch(t){a=n=null}var l=(n?[n]:[]).concat(i),d=(a?[a]:[]).concat(o);function c(t,e){var r;return void 0===e&&(e=l),[].concat(e).some((function(t){try{var e=t.getItem(s);return r=JSON.parse(e)}catch(t){r=null}})),(r||{})[t]}function u(t,e,r){var i,o;void 0===r&&(r=l),(r=[].concat(r)).some((function(t){try{var e=t.getItem(s);if(e)return o=t,i=JSON.parse(e)}catch(t){i=null}})),i||(i={}),(!(i[t]=""+e)||!i[t].length)&&delete i[t],(o||r[0]).setItem(s,JSON.stringify(i))}var h=function(t){return c(t,d)},p=function(t,e){return u(t,e,d)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r(15),o=r(2),n=r(0);var a=function(t){var e,r;function i(e,r,i){var n,a;void 0===i&&(i=!1);var s="::Control["+e+"] ",l=r&&r.getAPI&&r.getAPI().logger||o.a,d=(null==l||null===(n=l.getChildWriter)||void 0===n?void 0:n.call(l,s))||l;d.trace(".constructor()"),(a=t.call(this,{ancestor:s,logger:d})||this).name=e,a.module=r,a.moduleId=s;var c=r.getControlUnionData(e);if(null===c)throw a.logger.warn(s+" Disabled"),new Error(s+" disabled");if(i&&void 0===c)throw new Error(s+" is not available");return r._addDestroyableObject(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var a=i.prototype;return a._destroy=function(){var e=this.moduleId,r=this.node;this.logger.trace(":"+e+".destroy()"),t.prototype._destroy.call(this),r&&Object(n.t)(r)},a.getName=function(){return this.name},i}(i.a)},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return s}));var i=r(1);function o(){return Object(i.i)(this.getControlNode("wrapper"))}function n(t){var e=this._savedAdParams;return e&&e[t]}function a(t,e){return this._savedAdParams||(this._savedAdParams={}),this._savedAdParams[t]=e,e}function s(){return!this._videoSlotRemoved&&this.getControlNode("videoSlot")}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return h})),r.d(e,"d",(function(){return y}));var i,o=r(11);function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s="background: #f2f2f2; color: #564545",l="background: #f6f1cd; color: #414042",d="L"+Math.random().toString(36).substring(2,4),c={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,TRACE:5},u="logLevel",h="loglevel-changed",p=0,g=1,f=2,v="color:{{color}}",m=((i={})[p]="",i[g]=v,i[f]=v+";font-weight:bold",i);function b(t,e,r){void 0===e&&(e="black");var i=m[t]||"";return r&&(~r.indexOf(":")?i+=";"+r:(e=r,~i.indexOf(v)||(i+=v))),i&&i.replace("{{color}}",e)||""}var y=function(){function t(e){var r=this,i=e.maxLevel,n=void 0===i?0:i,v=e.header,m=void 0===v?d:v,y=e.archive,A=void 0===y?[]:y,O=e.logs,w=void 0===O?[]:O,_=e.rootLogger,S=void 0===_?null:_;a(this,"write",(function(t,e,i){var o=new Date,n="%c["+o.toLocaleTimeString("ru")+"."+o.getMilliseconds()+"]%c"+r._header+"%c"+e;r.archive.push(n),r.logs.push({date:o.toISOString(),level:t,header:r._header,message:e,css:i}),t<=r._maxLevel&&(console.info(n,s,l,""+i),t===c.ERROR&&console.error("Stack trace"))})),a(this,"writeArchive",(function(){console.groupCollapsed(r._header+" Logger messages hidden by previous logLevel:"),r.archive.forEach((function(t,e){return console.info(t,s,l,""+r.logs[e].css)})),console.groupEnd()})),a(this,"getChildWriter",(function(e){var i=new t({maxLevel:r._maxLevel,header:r._header+">"+e,archive:r.archive,logs:r.logs,rootLogger:r.rootLogger||r});return r.children.push(i),i})),a(this,"none",(function(){})),a(this,"error",(function(t,e,i){return void 0===e&&(e=f),r.write(c.ERROR,t,b(e,"red",i))})),a(this,"warn",(function(t,e,i){return void 0===e&&(e=g),r.write(c.WARN,t,b(e,"red",i))})),a(this,"log",(function(t,e,i){return void 0===e&&(e=p),r.write(c.LOG,t,b(e,e===g?"green":"#333",i))})),a(this,"track",(function(t,e,i){return void 0===e&&(e=g),r.write(c.TRACK,t,b(e,"darkblue",i))})),a(this,"trace",(function(t,e,i){return void 0===e&&(e=g),r.write(c.TRACE,t,b(e,e>g?"#aaa":"lightgray",i))})),a(this,"getLevel",(function(){return r._maxLevel})),a(this,"setLevel",(function(t){r.isRootLogger&&(r.write(c.TRACE,"Log level set to "+t),Object(o.d)(u,t),Object(o.c)(h,!0),t>r._maxLevel&&r.writeArchive()),r.children.forEach((function(e){e.setLevel(t)})),r._maxLevel=t})),this.rootLogger=S,this._header=m,this._maxLevel=n,this.archive=A,this.logs=w,this.children=[]}var e,r,i;return e=t,(r=[{key:"isRootLogger",get:function(){return null===this.rootLogger}}])&&n(e.prototype,r),i&&n(e,i),t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var i=r(22),o=r(0),n=r(11),a=r(2),s=r(1);var l="Managed",d=function(t){var e,r;function i(e){var r;void 0===e&&(e={});var i=Object(s.u)(Object(n.b)("managed.trace")),o=e&&e.ancestor&&""+e.ancestor||l,d=e&&(e.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a;return i&&d.trace(o+".constrictor()"),(r=t.call(this)||this).logger=d,r.Managed=o,r.traceLogEnabled=i,r._vpaidEventListeners=[],r._domEventListeners=[],r._patchedMethods=[],r._domNodes=[],r._timeouts=[],r._destroyableObjects=[],r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var d=i.prototype;return d._addDOMNode=function(t,e){return void 0===e&&(e=0),this._domNodes.push({node:t,removeDelay:e}),t},d._removeDOMNode=function(t){Object(o.t)(t),this._domNodes=this._domNodes.filter((function(e){return e!==t}))},d._addDOMEventListener=function(t,e,r,i){return this.traceLogEnabled&&this.logger.trace(this.Managed+".addDOMEventListener("+e+")"),this._domEventListeners.push({node:t,name:e,listener:r}),t.addEventListener(e,r,i),r},d._removeDOMEventListener=function(t,e,r){this.traceLogEnabled&&this.logger.trace(this.Managed+".removeDOMEventListener("+e+")"),this._domEventListeners=this._domEventListeners.filter((function(i){return i.node!==t||i.name!==e||i.listener!==r||(t.removeEventListener(e,r),!1)}))},d._addVPAIDEventListener=function(t,e,r){return Object(s.v)(t),this.traceLogEnabled&&this.logger.trace(this.Managed+".addVPAIDEventListener("+e+")"),this._vpaidEventListeners.push({vpaid:t,name:e,listener:r}),t._subscribe(r,e),r},d._removeVPAIDEventListener=function(t,e,r){this.traceLogEnabled&&this.logger.trace(this.Managed+".removeVPAIDEventListener("+e+")"),this._vpaidEventListeners=this._vpaidEventListeners.filter((function(i){return i.vpaid!==t||i.name!==e||i.listener!==r||(t.unsubscribe(r,e),!1)}))},d._patchMethod=function(t,e,r){this.traceLogEnabled&&this.logger.trace(this.Managed+".patchMethod("+e+")");var i=t[e];return r._originalHandler=i,t[e]=r,this._patchedMethods.push({object:t,method:e}),i.bind(t)},d._restoreMethod=function(t,e){this.traceLogEnabled&&this.logger.trace(this.Managed+".restoreMethod("+e+")"),this._patchedMethods=this._patchedMethods.filter((function(r){return r.object!==t||r.method!==e||(t[e]=t[e]._originalHandler,!1)}))},d._removeEventListeners=function(){var t=this;this.traceLogEnabled&&this.logger.trace(this.Managed+"._removeEventListeners");var e=this._vpaidEventListeners,r=this._domEventListeners;e.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing VPAID event listeners ("+e.length+")"),e.forEach((function(e){var r=e.vpaid,i=e.name,o=e.listener;t._removeVPAIDEventListener(r,i,o)}))),r.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing DOM event listeners ("+r.length+")"),r.forEach((function(e){var r=e.node,i=e.name,o=e.listener;t._removeDOMEventListener(r,i,o)})))},d._destroy=function(){var t=this;this.traceLogEnabled&&this.logger.trace(this.Managed+"._destroy()");var e=this._patchedMethods,r=this._domNodes,i=this._timeouts,n=this._destroyableObjects;if(this._removeEventListeners(),e.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Restoring patched methods ("+e.length+")"),e.forEach((function(e){var r=e.object,i=e.method;t._restoreMethod(r,i)}))),r.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing DOM elements ("+r.length+")"),r.forEach((function(e){var r=e||{},i=r.node,n=r.removeDelay;n>0?(t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removing DOM element {"+i+") after "+n+" ms"),setTimeout((function(){t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() timeout "+n+" ms is finished. Removing DOM element {"+i+")"),Object(o.t)(i)}),n)):Object(o.t)(i)}))),i.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing timeouts ("+i.length+")"),i.forEach((function(e){t._removeTimeout(e.name)}))),n.length){var a=this._delayRemovingControls;this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing destroyableObjects ("+n.length+")"),n.forEach((function(e){var r=e.getName&&e.getName(),i=(r&&a&&a[r]||{}).delay;i&&i>0?(t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removing destroyableObject ("+r+") with delay "+i+" ms"),setTimeout((function(){t._removeDestroyableObject(e),t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removed destroyableObject ("+r+") after delay "+i+" ms")}),i)):t._removeDestroyableObject(e)}))}},d._addTimeout=function(t,e,r){this.logger.none(this.Managed+".addTimeout("+t+")"),this._removeTimeout(t);var i=setTimeout(e,r);return this._timeouts.push({name:t,timeoutId:i}),e},d._removeTimeout=function(t){this.logger.none(this.Managed+".removeTimeout("+t+")"),this._timeouts=this._timeouts.filter((function(e){return e.name!==t||(clearTimeout(e.timeoutId),!1)}))},d._addDestroyableObject=function(t){this.logger.none(this.Managed+"._addDestroyableObject("+t+")"),t&&t._destroy&&this._destroyableObjects.push(t)},d._removeDestroyableObject=function(t){this._destroyableObjects=this._destroyableObjects.filter((function(e){var r=e===t;return r&&e&&e._destroy&&e._destroy(),!r}))},i}(i.a)},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return s}));var i="ModuleGlobalRemainingTimeChangeTimeId",o=500,n="ModuleStartAdTimerId",a="vpaidInitAdTimeoutId",s="AdStoppedWaitAdVideoCompleteTimerId"},function(t,e,r){"use strict";var i=r(1),o=r(0),n=r(4),a=r(9),s=r(16);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=this,r=null,n=t.starterUrl,s=(this.options||{}).viqeoStarterUrl;function c(){var e=this;r&&window.removeEventListener("onViqeoLoad",r);try{var n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t);n.parent=Object(o.p)(n.parent)&&n.parent.tagName+"."+n.parent.className||"",this.logger.log(".showViqeo() -> VIQEO.createPlayer("+JSON.stringify(n,null,"\t")+")\n viqeoOptions.parent="+Object(i.f)(t.parent))}catch(t){this.logger.error(".appendViqeo can not show VIQEO start parameters: "+t)}window.VIQEO.createPlayer(t,t.parent).catch((function(t){e.logger.error("showViqeo "+t)}))}Object(a.a)(n||s).then((function(){window.VIQEO?c.call(e):(window.onViqeoLoad=c.bind(e),window.addEventListener("onViqeoLoad",r=c.bind(e)))}))}var u=r(6),h=r(8),p=r(13);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){Object(i.v)(e),e._subscribe(m.bind(t),"AdLoaded"),e._subscribe(b.bind(t),"AdStarted"),e._subscribe(y.bind(t),"AdStopped"),e._subscribe(A.bind(t),"AdSkipped"),e._subscribe(O.bind(t),"AdSkippableStateChange"),e._subscribe(w.bind(t),"AdSizeChange"),e._subscribe(P.bind(t),"AdLinearChange"),e._subscribe(C.bind(t),"AdDurationChange"),e._subscribe(j.bind(t),"AdExpandedChange"),e._subscribe(E.bind(t),"AdRemainingTimeChange"),e._subscribe(D.bind(t),"AdVolumeChange"),e._subscribe(I.bind(t),"AdImpression"),e._subscribe(T.bind(t),"AdAudioImpression"),e._subscribe(k.bind(t),"AdVideoStart"),e._subscribe(V.bind(t),"AdVideoFirstQuartile"),e._subscribe(R.bind(t),"AdVideoMidpoint"),e._subscribe(M.bind(t),"AdVideoThirdQuartile"),e._subscribe(N.bind(t),"AdVideoComplete"),e._subscribe(x.bind(t),"AdVideoCompleteTrackOnly"),e._subscribe(L.bind(t),"AdClickThru"),e._subscribe(F.bind(t),"AdInteraction"),e._subscribe(W.bind(t),"AdUserAcceptInvitation"),e._subscribe(H.bind(t),"AdUserMinimize"),e._subscribe(z.bind(t),"AdUserClose"),e._subscribe(B.bind(t),"AdPaused"),e._subscribe(U.bind(t),"AdPlaying"),e._subscribe(q.bind(t),"AdLog"),e._subscribe(G.bind(t),"AdError"),e._subscribe(X.bind(t),"AdAudioOnlyStart"),e._subscribe(J.bind(t),"AdReadyToShow"),e._subscribe(_.bind(t),"AdSizeForceChange"),e._subscribe(S.bind(t),"vn_VideoSlotRemoved")}function m(){var t=this;if(this.globalTimeoutProvider&&this.globalTimeoutProvider.pause(),!u.c.call(this,["destroying","destroyed"])){u.d.call(this,"loaded"),this._adHasBeenLoaded=!0,this._adVideoFirstQuartileWasHappened=!1,this._adVideoMidpointWasHappened=!1,this._adVideoThirdQuartileWasHappened=!1,this._vpaidStartAdWasInvoked=!1;var e=this.lastPendingCommands.resizeAd;e&&(e(),this.logger.log(" @onAdLoaded execute last resizeAd pending command: "+e),delete this.lastPendingCommands.resizeAd),this.logger.log(" @AdLoaded adVolume="+this.adVolume,2),$.call(this,"AdLoaded");var r=this.getControlUnionData("videobackground","css");if(!Object(i.r)(r)){var n=p.c.call(this);n&&Object(o.c)(n,r)}var a=this.options,s=this.format,l=(a||{}).viqeoParentSlotClassName,d=this.vnShowViqeo=this.getControlUnionData("vnShowViqeo");if(!d||l&&document.getElementsByClassName(l).length)this.startAdShouldBeInvoked&&(this.startAdShouldBeInvoked=!1,this.startAd());else{var h=this.getControlNode("slot"),v="instream"===(s&&s.toString().slice(7,-1)).toLowerCase(),m=v?h.insertAdjacentElement("afterbegin",document.createElement("div")):Object(o.o)(h&&h.parentElement||h,"div",{});m.className=l+" vn-module__"+this.mainModuleId,Object(o.c)(m,{position:"relative",textAlign:"center"}),v&&Object(o.c)(m,{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1});var b=this.data.map((function(t){return t.parameters})),y={},A="vn_module_"+this.mainModuleId,O=JSON.stringify(b);try{sessionStorage.setItem(A,O),y.key=A}catch(t){}if(y.parameters=b,y.disableExtensions=["vnShowViqeo"],c.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},d.options,{parent:m},{vnData:JSON.stringify(y)})),this.state="destroyed",this._useExistsVideoSlot)this._restoreVideoSlotParams();else{var w=p.c.call(this);w&&Object(o.c)(w,{display:"none"})}var _=this.destroyControls();_&&_.length&&_.forEach((function(e){t.getControlNode(e)&&t.setControlData(e,{node:null})})),this.environmentVars.slot||h&&Object(o.c)(h,{display:"none"}),this._destroyIframe(),setTimeout((function(){t.logger.log(".onAdLoaded() viqeo was created. send @AdStarted"),t.trigger("AdStarted")}),1)}}}function b(){if(this.logger.log(" @AdStarted state="+this.state,2),this.globalTimeoutProvider&&this.globalTimeoutProvider.stop(),this._lastExternalSEQ&&!u.c.call(this,"starting")){var t=" @AdStarted inappropriate state="+this.state+". Should be 'starting'";this.logger.log(t,2),h.i.call(this,{code:1042,message:t})}if(!u.c.call(this,["stopping","stopped","destroying","destroyed"])){if(this._adStarted=!0,this.trigger("AdStarted"),u.d.call(this,"started"),h.o.call(this,"creativeView"),this.data.some((function(t){return t.parameters.ClickThrough}))){var e=this.getControlNode("vpaidSlot");e&&Object(o.c)(e,{cursor:"pointer"})}Q.call(this)}}function y(){var t=this,e=this.vnAfterplay;if(this.logger.log(" @AdStopped",2),this._adStoppedWasCalled=!0,u.c.call(this,"completing")){var r=(this.options||{beforeStopAdTimeout:200}).beforeStopAdTimeout;this.logger.log("@AdStopped was received before command vpaid.stopAd() state="+this.state+". Awaiting @AdVideoComplete tracking for "+r+" ms",2,"pink"),Object(i.v)(this);var o=n.bind(this);this._subscribeOnce(o,"AdVideoComplete"),this._adVideoCompletedWasPropagated?(this.unsubscribe(o,"AdVideoComplete"),n.call(this)):this._addTimeout(s.d,(function(){t.logger.warn("@AdStopped Awaiting @AdVideoComplete("+r+"ms) expired."),t.unsubscribe(o,"AdVideoComplete"),n.call(t)}),r)}else u.a.call(this)?e&&u.c.call(this,"afterplay")||n.call(this):this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped"));function n(){if(!u.c.call(this,"destroying","destroyed","stopped","stopping")){var t=this.vnAfterplay;t&&t.shouldContinue()||t&&t.shouldShowStub()||(u.d.call(this,"stopped"),this._useExistsVideoSlot||this.setControlData("videoSlot",{node:null}),$.call(this,"AdStopped"),K.call(this,["AdDestroyed"]),this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped")))}}}function A(){var t=this;this.logger.log(" @AdSkipped",2),h.o.call(this,"skip"),$.call(this,"AdSkipped"),this.logger.log(".onAdSkipped() trigger(AdSkipped)",1),this.trigger("AdSkipped");var e=this.vnAfterplay,r=this._useExistsVideoSlot,i=this.format;if(!r){var o=this.getControlNode("vpaidSlot");o&&(o.innerHTML="");var n=p.c.call(this);n&&n.pause&&n.pause()}if((!e||!e.shouldShowStub()&&!e.shouldContinue())&&i&&i.hide&&i.hide(),!e||!e.shouldShowStub()||e.shouldContinue()){K.call(this);var a=(this.options||{}).triggerAdStoppedAfterAdSkipped,s=i&&i.toString().slice(7,-1);!a&&"InStream"!==s||this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.logger.log(".onAdSkipped() trigger('AdStopped')",1),setTimeout((function(){return t.trigger("AdStopped")}),1)),!r&&this.setControlData("videoSlot",{node:null}),h.o.call(this,"close"),this._destroy()}}function O(){var t=this.vpaid;t&&this.setAdSkippableState(t.getAdSkippableState()),this.logger.trace(" @AdSkippableStateChange adSkippableState="+this.adSkippableState+" got from the VPAID",2)}function w(){var t=this.vpaid;if(t){var e=t.getAdWidth(),r=t.getAdHeight(),i=this.adWidth,o=this.adHeight,n=this.viewMode;this.logger.trace(" @AdSizeChange vpaid: adWidth="+e+" adHeight="+r+"; current: adWidth="+i+" adHeight="+o),r=r&&r<=o?r:o,(e=e&&e<=i?e:i)<=i&&r<=o&&(e<i||r<o)&&(this.logger.trace(" @AdSizeChange call resizeAd("+e+", "+r+")",2),this.resizeAd(e,r,n,!1))}}function _(){this.logger.log(" @onAdSizeForceChange");var t=this.vpaid.getAdWidth(),e=this.vpaid.getAdHeight();if(t!==this.getAdWidth()||e!==this.getAdHeight()){var r,i=this.format;null==i||null===(r=i.setAdSizeForceChange)||void 0===r||r.call(i,t,e),this.logger.trace(" @onAdSizeForceChange invokes resizeAd() width="+t+", height="+e,2),this.resizeAd(t,e)}}function S(){this.logger.log(" @vn_VideoSlotRemoved"),this._videoSlotRemoved=!0}function P(){var t=this.vpaid.getAdLinear();this.logger.trace(" @AdLinearChange adLinear="+t,2)}function C(){}function j(){var t=this.adExpanded=this.vpaid.getAdExpanded();this.logger.trace(" @AdExpandedChange adExpanded="+t,2)}function E(){this.logger.none(" @AdRemainingTimeChange",2),this.adRemainingTime=this.getAdRemainingTime()||0,this.adDuration=this.getAdDuration()||0}function D(){var t=this.vpaid;if(t){var e=t.getAdVolume();(0===e||1===e?this.logger.log:this.logger.trace)(" @AdVolumeChange adVolume="+e.toFixed(2),2),this.adVolume.toFixed(2)!==(100*e).toFixed(2)&&(u.c.call(this,"playing")&&(this.adVolume>0&&0===e&&h.o.call(this,"mute"),0===this.adVolume&&e>0&&h.o.call(this,"unmute")),this.adVolume=e)}}function I(t){var e=(t||{}).vnExternalSEQ;function r(){this.logger.log(" @AdImpression",2),this.trigger("AdImpression"),$.call(this,"AdImpression"),h.o.call(this,"Impression"),h.g.call(this)}this.logger.log(" @AdImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened+" vnExternalSEQ="+e),this._adImpressionHappened||!u.c.call(this,["starting","started","playing"])?e&&(this._lastExternalSEQ!==e&&this._manualAdditionalSEQ++,this._lastExternalSEQ=e,this.logger.log(" @AdImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened+" _manualAdditionalSEQ="+this._manualAdditionalSEQ),r.call(this)):(this._adImpressionHappened=!0,r.call(this))}function T(){this.logger.log(" @AdAudioImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened),this._adImpressionHappened=!0,function(){this.logger.log(" @AdAudioImpression",2),this.trigger("AdAudioImpression"),$.call(this,"AdAudioImpression"),h.o.call(this,"Impression"),h.g.call(this)}.call(this)}function k(t){var e=(t||{}).vnExternalSEQ;function r(){this.logger.log(" @AdVideoStart",2),u.d.call(this,"playing"),this.trigger("AdVideoStart"),$.call(this,"AdVideoStart"),h.o.call(this,"start").then();var t=this.getAdDuration(),e=this.progressControlWasHidden;!e&&(t<=0||t===1/0)?(this.hideControl("progress"),this.progressControlWasHidden=!0):e&&t>0&&(this.restoreControl("progress"),this.progressControlWasHidden=!1)}this.logger.log(" @AdVideoStart state="+this.state+" _adVideoWasStarted="+this._adVideoWasStarted+" vnExternalSEQ="+e),this._adVideoWasStarted||!u.c.call(this,["starting","started","playing"])?e&&(this._lastExternalSEQ!==e&&this._manualAdditionalSEQ++,this._lastExternalSEQ=e,this.logger.log(" @AdVideoStart state="+this.state+" _adVideoWasStarted="+this._adVideoWasStarted+" _manualAdditionalSEQ="+this._manualAdditionalSEQ),r.call(this)):(this._adVideoWasStarted=!0,this._AdVideoStartWasHappenedAtLeastOnce=!0,r.call(this))}function V(){this.logger.log(" @AdVideoFirstQuartile",2),this._adVideoFirstQuartileWasHappened=!0,$.call(this,"AdVideoFirstQuartile"),h.o.call(this,"firstQuartile")}function R(){this.logger.log(" @AdVideoMidpoint",2),this._adVideoMidpointWasHappened=!0,$.call(this,"AdVideoMidpoint"),h.o.call(this,"midpoint")}function M(){this.logger.log(" @AdVideoThirdQuartile",2),this._adVideoThirdQuartileWasHappened=!0,$.call(this,"AdVideoThirdQuartile"),h.o.call(this,"thirdQuartile")}function x(){this.logger.log(" @AdVideoCompleteTrackOnly",2),h.o.call(this,"complete"),this._completeWasTracked=!0}function N(t){var e=this;void 0===t&&(t={}),Object(i.v)(this),t||(t={}),this.logger.log(" @AdVideoComplete state="+this.state,2);var r=this.state;if(u.c.call(this,["complete","completing","destroy","destroying","stopping","stopped"]))this.logger.warn(" @AdVideoComplete was invoked during state="+r);else{u.d.call(this,"completing"),$.call(this,"AdVideoComplete"),this.logger.trace(" @AdVideoComplete (propagating delayed by trackers)");var o=this._adStarted,a=this._adImpressionHappened,s=this._adVideoWasStarted,l=this._vpaidStartAdInvokesTime,d=this._vpaidStartAdWasInvoked,c=this._adVideoFirstQuartileWasHappened,p=this._adVideoMidpointWasHappened,g=this._adVideoThirdQuartileWasHappened,f=Date.now()-l;if(!a&&o){var v="Get @AdVideoComplete but not get @AdImpression state="+r;this.logger.error(".onAdVideoFirstQuartile() "+v),h.i.call(this,{code:n.a.AD_IMPRESSION_NOT_HAPPENED_ERROR,message:v})}if(!o){var m="Get @AdVideoComplete but not get @AdStarted. state="+r,b=this.vpaid,y=(b||{})._countdown,A=y||{},O=A._duration,w=A._elapsedTime,_=A.adRemainingTime,S=(new Error).stack||"";return(b&&b.getDebugInfo?b.getDebugInfo():Promise.resolve({})).then((function(t){var r=JSON.stringify(t||{},(function(t,e){return!["moduleAPI","logger","module"].includes(t)&&e||void 0})),i=m+" _adVideoWasStarted="+s+" _vpaidStartAdWasInvoked=["+d+":"+f+"] _adVideoFirstQuartileWasHappened="+c+" _adVideoMidpointWasHappened="+p+" _adVideoThirdQuartileWasHappened="+g+" media="+e._media+"\nstack="+S+" vpaidInfo="+r+"\n_countdown="+y+" adRemainingTime="+_+" _duration="+O+" _elapsedTime="+w;e.logger.error(".onAdVideoFirstQuartile() "+i);var o=n.a.AD_STARTED_NOT_HAPPENED_ERROR;h.i.call(e,{code:o,message:i})})),this.trigger("vnVpaidAdError",m),void this._failedData({shouldDestroyVpaid:!0})}var P=!1!==t.shouldDestroy,C=this._completeWasTracked,j=this.format,E=this.vnAfterplay,D=h.b.call(this,"complete");E&&E._incSuccessfulPlays(),(!E||!E.shouldShowStub()&&!E.shouldContinue())&&j&&j.hide&&j.hide(),(C&&Promise.resolve()||D.then((function(t){return h.n.call(e,t)}))).then((function(){if(e.logger.trace(" @AdVideoComplete (propagating AdVideoComplete)"),e._completeWasTracked=!0,e.trigger("AdVideoComplete"),e._adVideoCompletedWasPropagated=!0,u.c.call(e,"stopped")&&P)e._destroy();else if(E&&E.shouldContinue())e._failedData({logMessage:" @AdVideoComplete() played "+E._getTotalSuccessfulPlays()+" ads from "+E._getContinueNumber()+". Trying play next ad.",shouldResetPlugins:!0,shouldDestroyVpaid:!0});else if(e.logger.log(" @AdVideoComplete all advanced ads have been shown",2,"color:green; font-size:1.2em"),!E||!E.shouldShowStub()){j&&j.hide&&j.hide();var t=(e.options||{}).beforeStopAdTimeout,r="AdStopped",i=function t(){e.unsubscribe(t,r),e._removeTimeout("beforeAdStoppedTimeout"),u.c.call(e,"stopped")&&P&&e._destroy()};e._addTimeout("beforeStopAdTimeout",(function(){e.unsubscribe(i,r),u.c.call(e,"stopped")&&P&&e._destroy(),u.c.call(e,"stopping")&&P&&e._subscribeOnce((function(){return e._destroy()}),"AdStopped")}),t),e._subscribe(i,r),e.stopAd()}}))}}function L(t,e,r){this.logger.log(" @AdClickThru("+t+", "+e+", "+r+") pauseStartedByVPAID="+this.pauseWasStartedByVPAID,2),h.o.call(this,"ClickTracking");var i=this.getControlUnionData("videoclick","action");!u.c.call(this,["paused","paused"])||this.pauseWasStartedByVPAID||this.pausedWasStartedByVisibilityChange?(u.c.call(this,"playing")&&this.pauseAd(),r&&(t?Object(a.b)(t):this.data.forEach((function(t){var e=t.parameters;return Object(a.b)(e.ClickThrough)}))),this.trigger("AdClickThru",t,e,!1),"close"===i&&this.skipAd()):this.resumeAd()}function F(){this.logger.trace(" @AdInteraction",2)}function W(){this.logger.trace(" @AdUserAcceptInvitation",2)}function H(){this.logger.trace(" @AdUserMinimize",2)}function z(){this.logger.trace(" @AdUserClose",2);var t=this.getAdSkippableState();t?(this.trigger("AdSkipped"),$.call(this,"AdSkipped"),this._destroy()):this.logger.trace(" got @AdUserClose but skippableState="+t+". doing nothing.",2)}function B(){u.a.call(this)&&!u.c.call(this,"afterplay")?(this.pauseWasStartedByVPAID=!u.c.call(this,"pausing"),this.logger.log(" @AdPaused pauseWasStartedByVPAID="+this.pauseWasStartedByVPAID,2),u.d.call(this,"paused"),h.o.call(this,"pause"),$.call(this,"AdPaused")):this.logger.log(" @AdPaused ignore because state="+this.state,2)}function U(){u.a.call(this)&&!u.c.call(this,"afterplay")?(this.logger.log(" @AdPlaying",2),$.call(this,"AdPlaying"),u.c.call(this,"resuming")&&(u.d.call(this,"playing"),h.o.call(this,"resume"))):this.logger.trace(" @AdPlaying ignore because state="+this.state,2)}function q(t){this.logger.log(" @AdLog("+t+")",2),this.trigger("AdLog",t)}function G(t,e){void 0===e&&(e=""),t||(t="");var r=+e;(!r||r<100||r>901)&&(r=901),this.logger.warn(" got @AdError("+r+", "+t+")"),h.i.call(this,{code:r,message:t}),this.trigger("vnVpaidAdError",t,e),this._failedData({shouldDestroyVpaid:!0})}function X(){this.logger.trace("@AdAudioOnlyStart",2)}function J(){this.logger.trace("@AdReadyToShow",2),this.trigger("AdReadyToShow")}function Q(){var t=this;this._addTimeout(s.b,(function(){Y.call(t)&&Q.call(t)}),s.a)}function Y(){var t=this.getAdRemainingTime();if(this.adRemainingTime!==t){var e=this.vpaid;this.adRemainingTime=t,e&&e.trigger("AdRemainingTimeChange")}return!0}r.d(e,"f",(function(){return v})),r.d(e,"d",(function(){return y})),r.d(e,"c",(function(){return A})),r.d(e,"a",(function(){return Z})),r.d(e,"g",(function(){return K})),r.d(e,"e",(function(){return $})),r.d(e,"b",(function(){return tt}));var Z=["AdLoaded","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdAudioDisabled","AdAudioEnabled","AdLoadedVideoData","slotSizeChanged","vn_hideOverlayFormatWrapper","vn_setOverlayZIndex","vn_FormatChanged","vn_VideoSlotRemoved","vn_VPAIDCreated","AdAudioOnlyStart"];function K(t){var e=this.vpaid;this.logger.trace(".unsubscribeVpaidEvents() vpaid="+e),e&&Z.forEach((function(r){return(!t||!t.includes(r))&&e.unsubscribeType(r)}))}function $(t){window!==window.top&&parent.postMessage(t,"*")}function tt(){var t=this,e=["startAd","stopAd","pauseAd","resumeAd","skipAd"];this._messagesListener||window!==window.top&&(this._messagesListener=this._addDOMEventListener(window,"message",(function(r){var i=r.data;e.filter((function(t){return t===i})).forEach((function(e){t.logger.log("window listener get command ["+e+"]"),t[e].call(t)}))})))}},function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return p}));var i=r(1),o=r(17),n=r(3),a=r(11);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){void 0===t&&(t={}),this.savedOptions||(this.savedOptions=l({},this.options)),this.options=l({},this.savedOptions,{},t),h.call(this)}function u(t){var e=this;this.logger.trace(".updateOptionsFromVpaid options="+JSON.stringify(t,null,"\t")+" vpaid="+this.vpaid),t.format&&(this.format&&this.format.updateOptions&&this.format.updateOptions(t.format),delete t.format),this.options=l({},this.options,{},t);var r=this.options,i=r.controlsActions,o=r.destroyControls;o&&o.forEach((function(t){return t&&e.destroyControl(t)})),i&&i.forEach((function(t){var r=t.name,i=t.action,o=e.getControlNode(r);o&&i&&i(o,e)}));var n=(t||{}).forceStartingVolume;if(void 0!==n)this.setAdVolume(n);else if("startingVolume"in t){var a=t.startingVolume;0!==a&&!a||a===this.adVolume||this.setAdVolume(a)}h.call(this)}function h(){var t=this.options,e=t||{},r=e.maxAds,n=e.forceStartingVolume,a=(t||{}).startingVolume,s=!1!==this.options.isInsideTextContent;this.options.disableHoverAudio=void 0!==this.options.disableHoverAudio?this.options.disableHoverAudio:s,this.options.triggerAdStoppedAfterAdSkipped=Object(i.u)(this.options.triggerAdStoppedAfterAdSkipped),this.options.canExecuteNoAd=Object(i.u)(this.options.canExecuteNoAd),a=this.options.startingVolume=void 0!==n?n:void 0!==a?a:s?0:1;var l="";try{l=JSON.stringify(this.options,(function(t,e){return"logger"!==t?e:void 0}))}catch(t){}this.logger.trace(" applyOptions() isInsideTextContent="+s+" disableHoverAudio="+this.options.disableHoverAudio+" startingVolume="+a+" options="+l),this._adsLeft=r,this.adVolume=a,this.options.listenWindowMessages&&!this._messagesListener&&o.b.call(this)}function p(){var t=Object(n.h)(Object(i.j)(window,document))||{},e=t.startAdTimeout,r=t.vpaidInitAdTimeout,o=t.dataRequestTimeout,s=t.triggerAdStoppedAfterAdSkipped,l=t.timeout,d=t.disableSmoothVolumeChange,c=t.viqeoStarterUrl,u=t.mainContainerIsIframe,h=t.iframeRemoveDelay,p=t.forceStartingVolume,g=t.vn_show_containers,f=t.vn_flyroll_trace,v=t.vn_intersections_trace,m=t.vn_data_url;e&&(this.options.startAdTimeout=e),r&&(this.options.vpaidInitAdTimeout=r),o&&(this.options.dataRequestTimeout=o),c&&(this.options.viqeoStarterUrl=c),l&&(this.options.timeout=l),s&&(this.options.triggerAdStoppedAfterAdSkipped=s),null!==d&&(this.options.disableSmoothVolumeChange=Object(i.u)(d)),void 0!==u&&(this.options.mainContainerIsIframe=Object(i.u)(u)),void 0!==h&&(this.options.iframeRemoveDelay=h),void 0!==p&&(this.options.forceStartingVolume=parseFloat(p)),void 0!==g&&Object(a.d)("show.containers",Object(i.u)(g)),void 0!==f&&Object(a.d)("flyroll.trace",Object(i.u)(f)),void 0!==v&&Object(a.d)("intersections.trace",Object(i.u)(v)),void 0!==m&&Object(a.c)("dataUrl",m)}},function(t,e){t.exports='<style>@keyframes videonow-spin{0%{transform:rotate(0deg);-webkit-transform:rotate(0deg)}to{transform:rotate(360deg);-webkit-transform:rotate(360deg)}}</style><svg style="animation:videonow-spin 1s linear infinite" viewBox="0 0 128 128"><path fill="none" stroke="url(#a)" stroke-width="2.77" d="M1252.52 595.235a31.93 31.93 0 01-17.5 5.2c-17.7 0-32.07-14.368-32.07-32.064 0-17.694 14.37-32.06 32.07-32.06 15.31 0 28.13 10.756 31.3 25.118" transform="translate(-2164.94 -961.788) scale(1.8048)"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientTransform="rotate(-3.67 9382.41 -18979.953) scale(36.57698)" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#79669C" stop-opacity="0"/><stop offset="95%" stop-color="#79669C"/><stop offset="100%" stop-color="#fff"/></radialGradient></defs></svg>'},function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var i,o=r(2),n=r(23);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l="::ManualCountdown",d=(null===o.a||void 0===o.a||null===(i=o.a.getChildWriter)||void 0===i?void 0:i.call(o.a,l))||o.a,c={increasePieceOfTime:1e3},u=function(t){var e,r;function i(e){var r;return void 0===e&&(e={}),r=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},c,{},e,{tickHandler:h}))||this,r.logger=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||d,r.logger.log(""+l),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype.start=function(){var e=this.getAdDuration(),r=this.getAdElapsedTime();!e||void 0!==r&&r>e||t.prototype.start.call(this)},i}(n.a);function h(t){var e=t.elapsedTime,r=t.remainingTime,i=t.adRemainingTime,o=t.duration;if(this._trigger("AdDurationChange"),r<.75*o&&i>=.75*o&&this._trigger("AdVideoFirstQuartile"),r<.5*o&&i>=.5*o&&this._trigger("AdVideoMidpoint"),r<.25*o&&i>=.25*o&&this._trigger("AdVideoThirdQuartile"),r<=0&&i>0)return this.stop(),void this._trigger("AdVideoComplete");e>o&&(this.stop(),this._trigger("AdVideoComplete"))}},function(t,e,r){"use strict";e.a={VERSION:"1.0.0",BASE_DOMAIN:"static.videonow.ru",DATA_DOMAIN:"init.videonow.ru",STAT_DOMAIN:"stat.videonow.ru",ERRORS_TRACKING_DOMAIN:"videonow.ru",HOME_URL:"http://www.videonow.ru",CLIENT_INFO_DOMAINS:["init.videonow.ru","data.videonow.ru"]}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var i=function(){function t(){this._eventListeners={},this._internalEventListeners={}}var e=t.prototype;return e._subscribe=function(t,e,r){void 0===r&&(r=null),t=r&&t.bind(r)||t,this._eventListeners[e]=[].concat(this._eventListeners[e]||[],t),this._internalEventListeners[e]=[].concat(this._internalEventListeners[e]||[],t)},e.subscribe=function(t,e,r){var i,o;void 0===r&&(r=null),null==this||null===(i=this.logger)||void 0===i||null===(o=i.trace)||void 0===o||o.call(i,"External subscribe on event type "+e),t=r&&t.bind(r)||t,this._eventListeners[e]=[].concat(this._eventListeners[e]||[],t)},e._subscribeOnce=function(t,e){var r=this;this._subscribe((function i(){t.apply(void 0,arguments),r.unsubscribe(i,e)}),e)},e.subscribeOnce=function(t,e){var r,i,o=this;null==this||null===(r=this.logger)||void 0===r||null===(i=r.trace)||void 0===i||i.call(r,"External subscribeOnce on event type "+e);this.subscribe((function r(){t.apply(void 0,arguments),o.unsubscribe(r,e)}),e)},e.unsubscribe=function(t,e){this&&(this._eventListeners[e]=[].concat(this._eventListeners[e]||[]).filter((function(e){return e!==t})),this._internalEventListeners[e]=[].concat(this._internalEventListeners[e]||[]).filter((function(e){return e!==t})))},e.unsubscribeType=function(t){this&&(this._eventListeners[t]=[],this._internalEventListeners[t]=[])},e.unsubscribeAll=function(){this._eventListeners={},this._internalEventListeners={}},e._trigger=function(t,e){for(var r=this,i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];(t[e]||[]).forEach((function(t){try{t.apply(r,o)}catch(o){var i,n,a,s;null==r||null===(i=r.logger)||void 0===i||null===(n=i.warn)||void 0===n||n.call(i,'Error in the handler of event "'+e+'" '+t),null==r||null===(a=r.logger)||void 0===a||null===(s=a.warn)||void 0===s||s.call(a,o.stack)}}))},e.trigger=function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];(t=this._trigger).call.apply(t,[this,this._eventListeners].concat(r))},e.triggerInternal=function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];(t=this._trigger).call.apply(t,[this,this._internalEventListeners].concat(r))},t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var i=r(2);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a="::ManualCountdownBase",s={increasePieceOfTime:250},l=function(){function t(t){var e;void 0===t&&(t={}),this.options=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},s,{},t);var r=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||i.a;this.logger=(null==r||null===(e=r.getChildWriter)||void 0===e?void 0:e.call(r,a))||r;var l=t,d=l.duration,c=l.VPAID_API,u=l.tickHandler;this.logger.log(a+" duration="+d),this._trigger=c&&c.trigger,this._duration=d,this._timeoutId=null,this._elapsedTime=0,this._tickHandler=u}var e=t.prototype;return e.getAdRemainingTime=function(){var t=this.getAdDuration();return t?t-this.getAdElapsedTime():0},e.getAdElapsedTime=function(){return this._elapsedTime||0},e.getAdDuration=function(){return this._duration||0},e.start=function(){var t=this;if(!this._timeoutId){var e=this.options.increasePieceOfTime,r=this.getAdDuration();this._timeoutId=setInterval((function(){var i=t.adRemainingTime,o=t.getAdRemainingTime();t.adRemainingTime=o;var n=d.call(t,e/1e3);t._tickHandler.call(t,{elapsedTime:n,remainingTime:o,adRemainingTime:i,duration:r})}),e)}},e.stop=function(){clearInterval(this._timeoutId),this._timeoutId=null},e._destroy=function(){this.stop()},t}();function d(t){return this._elapsedTime+=t,this._elapsedTime}},function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return l}));var i=r(2),o=r(3),n=r(5),a="vnCreativeBlock",s="::Extension["+a+"]";function l(e){var r=t&&t.getAPI&&t.getAPI().logger||i.a;r.trace(s+".parseVnCreativeBlock()");var n=e&&e.querySelector('Extension[type="'+a+'"]'),l=n&&Array.from(n.querySelectorAll("urls > url"));if(l&&l.length){var d=Object(o.d)(n,"global"),c=Object(o.d)(n,"important"),u=l.map((function(t){return Object(o.d)(t).split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()}));return r.trace(s+" set control data "+u+" global="+d),{urls:u,global:d,important:c}}return null}e.a=function(t){return new Promise((function(e){var r,o=t&&t.getAPI&&t.getAPI().logger||i.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,s))||o).trace(""+s);var l,d=(t._getLastParameters()||{})[a]||{},c=d.urls,u=d.global,h=d.important;(c&&c.length||u||h)&&t.setControlData(a,((l={urls:c})[n.a]=h,l),u);e(t)}))}}).call(this,r(40)(t))},function(t,e){t.exports='<svg viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="none" stroke-width="3"/><path stroke-width="0" d="M17.534 41.553l29.334.01-.952 1.373-27.418-.033-.964-1.35zm.202-18.25l28.942-.034.84 1.405-30.634.01.852-1.385zm-2.856 9.144l34.632-.033-.046 1.408-34.564-.022-.022-1.353zm34.66.13c0 9.318-7.774 16.9-17.33 16.9-9.555 0-17.327-7.583-17.327-16.9 0-9.316 7.774-16.896 17.326-16.896 9.554 0 17.33 7.58 17.33 16.9zm-17.33-18.25c-10.316 0-18.71 8.187-18.71 18.25s8.394 18.25 18.71 18.25c10.32 0 18.714-8.187 18.714-18.25s-8.393-18.25-18.714-18.25zm5.25 18.25c0 9.958-2.765 16.9-5.25 16.9-2.482 0-5.248-6.942-5.248-16.9 0-9.96 2.765-16.896 5.248-16.896s5.25 6.94 5.25 16.9zm-5.25-18.25c-4.31 0-6.635 9.403-6.635 18.25 0 8.848 2.326 18.25 6.635 18.25 4.31 0 6.64-9.403 6.64-18.25-.002-8.847-2.33-18.25-6.64-18.25zm12.297 18.25c0 9.318-5.52 16.9-12.297 16.9-6.777 0-12.292-7.583-12.292-16.9 0-9.316 5.515-16.896 12.292-16.896 6.778 0 12.297 7.58 12.297 16.9zM32.21 14.327c-7.542 0-13.68 8.188-13.68 18.25s6.138 18.25 13.68 18.25c7.543 0 13.68-8.186 13.68-18.25s-6.137-18.25-13.68-18.25z"/></svg>'},function(t,e){t.exports='<svg width="96" height="24" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 128 32"><path fill-opacity=".298" d="M120.368 28.943c-.464 1.503-1.606 2.72-3.108 2.72H2.766c-1.502 0-3.208-1.217-2.72-2.72L9.11 3.02C9.758.923 10.557.3 12.06.3h113.18a2.72 2.72 0 012.72 2.72l-7.592 25.923z"/><path fill="#fff" d="M20.303 23.29c-.05.13-.11.238-.178.32a.678.678 0 01-.32.185c-.14.042-.33.07-.573.08-.24.01-.552.018-.938.018-.31 0-.573-.003-.793-.007-.21-.004-.4-.014-.55-.03a1.754 1.754 0 01-.37-.068.73.73 0 01-.23-.117c-.06-.04-.1-.1-.13-.16s-.05-.15-.07-.25l-3.3-13.27c-.06-.27-.1-.49-.11-.66 0-.16.05-.28.15-.36.11-.08.28-.13.51-.15.24-.02.56-.03.98-.03.36 0 .64.01.83.02.2.02.36.05.46.08.11.04.18.1.21.18.04.08.07.18.1.29L18.6 20.9h.012l4.58-11.49c.04-.13.09-.23.145-.31.05-.08.137-.14.254-.19.12-.04.28-.07.49-.09.21-.01.5-.02.86-.02s.63.01.83.03c.2.03.33.08.39.17.07.09.08.218.04.38s-.12.377-.24.647L20.31 23.29zm7.95.114a.361.361 0 01-.094.21.608.608 0 01-.27.15c-.12.04-.28.07-.47.093-.2.024-.45.036-.75.036s-.54-.012-.74-.036c-.2-.022-.35-.054-.46-.093a.45.45 0 01-.24-.15.263.263 0 01-.06-.21l1.23-14.14c0-.077.04-.145.09-.208.05-.06.14-.112.27-.15.12-.038.28-.07.47-.094.19-.022.44-.033.73-.033.3 0 .54.01.73.03.19.02.34.05.45.09.114.04.19.09.24.15.044.06.064.13.06.21l-1.2 14.14zM39.78 16.22a7.37 7.37 0 00-.076-1.978 3.855 3.855 0 00-.66-1.587 3.275 3.275 0 00-1.32-1.046c-.553-.26-1.296-.38-2.23-.38h-1.538l-.89 10.18h1.583c.83 0 1.54-.11 2.13-.33a3.95 3.95 0 001.51-.98c.42-.44.75-.98.99-1.63.24-.65.4-1.41.48-2.27zm3.156-.105c-.12 1.373-.403 2.55-.846 3.524-.445.97-1.03 1.77-1.754 2.38-.725.62-1.58 1.07-2.567 1.36-.99.29-2.15.43-3.47.43h-3.58c-.26 0-.47-.08-.63-.23-.16-.15-.23-.4-.2-.74L31.03 9.8c.03-.34.14-.583.326-.734a1.02 1.02 0 01.662-.223h3.84c1.335 0 2.452.153 3.354.465.9.312 1.643.775 2.23 1.39.58.613 1 1.37 1.25 2.273.253.9.33 1.95.223 3.14zm9.15 6.515c-.02.225-.047.412-.08.562-.032.152-.07.273-.118.365a.532.532 0 01-.163.202.349.349 0 01-.197.06h-7.52a.88.88 0 01-.624-.23c-.16-.15-.225-.4-.196-.74l1.14-13.05c.03-.34.14-.59.327-.74.187-.15.408-.23.662-.23h7.476c.07 0 .13.02.18.06.05.04.09.1.12.2.032.09.05.22.055.37.005.15 0 .34-.02.57-.02.21-.046.4-.078.55-.03.15-.072.27-.12.36a.508.508 0 01-.156.2.323.323 0 01-.19.06h-5.346l-.32 3.66h4.524c.07 0 .133.02.186.06.055.04.096.11.127.2.032.09.05.21.056.36.01.15 0 .33-.01.55-.02.22-.04.41-.08.55-.03.14-.07.26-.11.35-.05.08-.1.15-.16.19a.32.32 0 01-.19.05h-4.53l-.37 4.22h5.4c.07 0 .13.02.19.06.06.04.1.11.13.2.03.09.05.21.06.36.01.15 0 .34-.01.56z"/><path fill="#DADADA" d="M81.01 22.408a1.209 1.209 0 01-.417.82 1.05 1.05 0 01-.386.203c-.148.05-.294.07-.44.07H78.47c-.268 0-.5-.03-.692-.08a1.21 1.21 0 01-.518-.29 2.153 2.153 0 01-.43-.58 8.739 8.739 0 01-.437-.94l-3.113-7c-.18-.41-.36-.86-.542-1.35-.18-.48-.342-.95-.48-1.4h-.023c-.018.56-.044 1.11-.076 1.66-.04.55-.08 1.12-.13 1.71l-.69 7.84c-.01.08-.03.15-.08.21-.05.07-.13.12-.24.16-.11.05-.25.08-.43.1-.18.02-.41.04-.69.04-.27 0-.49-.01-.67-.03-.18-.02-.32-.05-.41-.1a.406.406 0 01-.2-.15c-.04-.06-.05-.13-.04-.21L69.76 9.6c.034-.368.164-.64.39-.82.23-.18.497-.27.806-.27h1.63c.295 0 .54.024.735.073.2.053.37.135.52.25.15.118.28.278.4.48.12.207.24.46.37.76l2.44 5.474c.15.33.28.658.42.977.14.32.27.64.4.96.13.32.25.635.37.944.12.31.24.61.35.92h.02a66.734 66.734 0 01.22-3.368l.62-7.026a.423.423 0 01.09-.21c.05-.06.13-.11.25-.16.12-.047.26-.08.44-.1.18-.02.41-.03.69-.03.26 0 .48.01.66.03.18.02.31.05.4.1.09.046.16.1.19.16.04.064.05.13.04.21L81 22.414zm12.444-6.436c.07-.787.07-1.503.003-2.147-.068-.643-.23-1.195-.485-1.654a2.705 2.705 0 00-1.094-1.06c-.47-.25-1.078-.37-1.82-.37-.748 0-1.385.14-1.91.42-.525.29-.965.66-1.314 1.13-.35.48-.615 1.03-.8 1.65-.18.63-.302 1.3-.363 2-.07.82-.07 1.56 0 2.21.07.65.23 1.21.48 1.67.25.47.62.82 1.09 1.06.47.24 1.09.37 1.83.37s1.39-.14 1.91-.41c.53-.28.97-.65 1.32-1.13.35-.48.62-1.03.8-1.67.18-.63.31-1.31.37-2.03zm3.208-.162c-.108 1.243-.36 2.353-.756 3.334-.392.978-.924 1.812-1.594 2.492a6.692 6.692 0 01-2.4 1.565c-.93.36-1.984.54-3.163.54-1.17 0-2.18-.15-3.02-.45-.84-.3-1.53-.77-2.05-1.39-.53-.62-.89-1.42-1.1-2.38-.21-.96-.25-2.1-.14-3.42.1-1.21.35-2.3.74-3.27.39-.97.92-1.79 1.59-2.47a6.65 6.65 0 012.4-1.56c.92-.36 1.98-.54 3.17-.54 1.13 0 2.12.15 2.96.45.84.31 1.52.77 2.05 1.4.52.62.89 1.41 1.11 2.36.21.96.26 2.08.15 3.38zm15.77 6.886c-.06.184-.14.334-.23.445-.09.12-.22.2-.386.26s-.378.1-.634.12c-.257.02-.582.03-.977.03-.44 0-.79-.01-1.055-.02-.263-.02-.47-.06-.62-.11-.15-.06-.254-.14-.314-.25-.058-.11-.1-.26-.124-.44l-1.565-9.49h-.022l-3.1 9.49c-.052.18-.12.33-.198.44a.77.77 0 01-.353.26c-.155.06-.363.11-.623.13-.26.02-.6.03-1.02.03-.44 0-.8-.01-1.07-.03-.26-.02-.47-.06-.61-.12a.57.57 0 01-.31-.25c-.06-.11-.1-.26-.13-.44l-2.28-13.1a3.37 3.37 0 01-.05-.65c0-.15.06-.28.16-.36.1-.08.27-.13.49-.15.22-.02.53-.03.92-.03.36 0 .65.006.86.018.21.014.37.04.48.08.11.04.18.106.21.185.03.08.05.193.06.34l1.63 11.47h.01l3.72-11.39c.04-.15.09-.27.15-.36a.557.557 0 01.278-.215c.12-.05.29-.086.5-.1.21-.02.483-.03.83-.03.37 0 .665.004.884.02.22.014.38.05.5.1.11.05.19.12.24.212.04.09.07.21.09.37l1.83 11.38h.02l3.63-11.43c.03-.12.07-.23.11-.315.04-.09.12-.16.236-.21.11-.05.27-.09.47-.11.2-.02.48-.03.843-.03.34 0 .607.01.79.03.19.01.32.07.4.15.08.08.107.21.077.37s-.085.39-.18.67l-4.58 13.03zM59.99 19.37l.61-7.003 3.883 3.5-4.494 3.502z"/><path fill="#fff" d="M67.66 16.702c-.128 1.026-.36 1.957-.698 2.793-.393.98-.925 1.812-1.595 2.492a6.692 6.692 0 01-2.4 1.565c-.93.356-1.984.536-3.163.536-1.166 0-2.17-.15-3.013-.457-.83-.3-1.52-.76-2.04-1.39-.52-.62-.88-1.42-1.09-2.38-.21-.96-.25-2.1-.13-3.42.11-1.21.36-2.3.75-3.27.4-.96.93-1.79 1.6-2.47.67-.68 1.47-1.2 2.4-1.56.93-.36 1.99-.54 3.18-.54 1.14 0 2.12.15 2.97.45.85.3 1.53.77 2.06 1.39.53.63.9 1.42 1.11 2.37.19.85.25 1.84.18 2.97l-3.94-3.56c-.23-.3-.52-.54-.87-.73-.47-.25-1.07-.37-1.82-.37-.74 0-1.38.14-1.91.42-.52.29-.96.66-1.31 1.13-.35.47-.61 1.02-.8 1.65-.18.63-.3 1.3-.36 2-.07.82-.07 1.56-.01 2.21.07.65.23 1.21.48 1.67.26.47.62.82 1.09 1.06.47.25 1.09.37 1.83.37s1.39-.14 1.91-.42c.1-.05.2-.1.29-.16v.04l5.36-4.34z"/></svg>'},function(t,e){t.exports='<style>@keyframes videonow-pull{0%,10%,30%,to{transform:translateY(0);-webkit-transform:translateY(0)}20%{transform:translateY(2px);-webkit-transform:translateY(2px)}}</style><svg style="animation:videonow-pull 1s infinite" width="64" height="24" viewBox="0 0 64 10"><path fill="none" stroke="#fff" stroke-width="2.001" d="M.996 2.99L32.39 14.74M63 2.99L31.606 14.74"/></svg>'},function(t,e){t.exports='<svg viewBox="0 0 64 64" style="width:100%;height:100%"><path fill="#333" d="M23.817 49V17L50 33 23.817 49z"/></svg>'},function(t,e){t.exports='<svg viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="none" stroke-width="3"/><path stroke-width="0" d="M32.503 12.794V8.75l9 7.75-9 8.5v-4.45c-7.583-.5-13.383 5.267-13.3 11.85.083 6.583 4.083 12.65 12.3 12.6 8.217-.05 12.6-6.596 12.5-13.5l6.106-5.845c.383.61 1.384 2.437 1.392 8.245-.483 8.817-7.717 18.683-19.75 18.95-12.033.267-20.524-9.77-20.35-20.65.174-10.88 9.73-19.738 21.1-19.406z"/></svg>'},function(t,e){t.exports='<svg style="width:100%" class="vn-afterplay-play" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="none" stroke-width="3"/><path stroke-width="0" d="M17.25 24.402l7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>'},function(t,e){t.exports='<svg width="50" height="50" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="none" stroke-width="3"/><path stroke-width="0" d="M17.25 24.402l7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>'},function(t,e){t.exports='<svg id="skipAd" width="25" height="25" viewBox="0 0 64 64"><style>g#vnSkipAd:hover&gt;path#cross{opacity:1}g#vnSkipAd:hover&gt;path#background{fill-opacity:0.5}</style><g id="vnSkipAd"><path id="background" fill-opacity=".298" d="M64.055 16c0-8.832-7.173-16-16.017-16h-31.99C7.204 0 .03 7.167.03 16v32c0 8.83 7.174 16 16.018 16h31.99c8.844 0 16.017-7.17 16.017-16V16z"/><path id="cross" fill="#fff" d="M32.605 27.734L47.91 12.427l3.62 3.62L36.223 31.35 51.53 46.66l-3.62 3.617L32.606 34.97 17.298 50.278 13.68 46.66l15.306-15.31L13.68 16.046l3.618-3.62 15.307 15.308z" opacity=".5"/></g></svg>'},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return g}));var i=r(0),o=r(9),n=r(7),a=r(34),s=r.n(a),l=r(35),d=r.n(l),c=r(12);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p="logo",g=function(e){var r,a;function l(r){var a;a=e.call(this,p,r)||this;var l=r.getControlNode("wrapper"),c=r.getControlUnionData(p,"customerlogo")||{},g=c.logoSrc,f=c.logoHeight,v=c.logoWidth,m=g&&"<img src='"+g+"' "+function(t,e,r){void 0===e&&(e="=");void 0===r&&(r=" ");return t.reduce((function(t,r){var i=Object.keys(r)[0],o=r[i];return o&&t.push(""+i+e+o),t}),[]).join(r)}([{width:v},{height:f}])+">",b=r.getControlUnionData(p,"css"),y=a.node=Object(i.b)(l,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:1,bottom:0,left:0,padding:"5px",cursor:"pointer"},b),m||r.getControlUnionData(p,"content")||""+s.a+d.a,o.b.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a),t.HOME_URL));return m||(n.h?(y.firstElementChild.style.display="none",y.lastElementChild.style.display=""):(y.lastElementChild.style.display="none",y.firstElementChild.style.display="",a._addDOMEventListener(y,"mouseenter",(function(){y.firstElementChild.style.display="none",y.lastElementChild.style.display=""})),a._addDOMEventListener(y,"mouseleave",(function(){y.lastElementChild.style.display="none",y.firstElementChild.style.display=""})))),r.setControlData(p,{node:y}),a}return a=e,(r=l).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,l.getName=function(){return p},l}(c.a)}).call(this,r(41))},function(t,e){t.exports='<svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#aaa" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 01-.08.14.279.279 0 01-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 01-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 018.907 13a.966.966 0 01-.162-.03.349.349 0 01-.102-.052.183.183 0 01-.06-.073.641.641 0 01-.032-.11L7.11 6.923a1.613 1.613 0 01-.05-.29c0-.07.02-.123.066-.158a.413.413 0 01.22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 01.2.036c.046.02.077.05.09.08a.79.79 0 01.044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 01-.04.092.24.24 0 01-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 01-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 00-.29-.695 1.427 1.427 0 00-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 01-.052.16.256.256 0 01-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 01-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#eee" d="M36.967 12.52a.531.531 0 01-.182.358.504.504 0 01-.17.09.706.706 0 01-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 01-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 01-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 01-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 01.04-.1c.03-.03.06-.05.11-.07a.83.83 0 01.2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 00-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 01-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 01-.1.195.35.35 0 01-.17.11 1.064 1.064 0 01-.278.053 7.818 7.818 0 01-.89 0 1.015 1.015 0 01-.272-.052.226.226 0 01-.137-.11.551.551 0 01-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 01-.27-.05.227.227 0 01-.14-.11.473.473 0 01-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457l.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 01-.896-.61 2.37 2.37 0 01-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 00-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 00-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg>'},function(t,e){t.exports='<svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#262053" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 01-.08.14.279.279 0 01-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 01-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 018.907 13a.966.966 0 01-.162-.03.349.349 0 01-.102-.052.183.183 0 01-.06-.073.641.641 0 01-.032-.11L7.11 6.923a1.613 1.613 0 01-.05-.29c0-.07.02-.123.066-.158a.413.413 0 01.22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 01.2.036c.046.02.077.05.09.08a.79.79 0 01.044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 01-.04.092.24.24 0 01-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 01-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 00-.29-.695 1.427 1.427 0 00-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 01-.052.16.256.256 0 01-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 01-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#b1bb45" d="M36.967 12.52a.531.531 0 01-.182.358.504.504 0 01-.17.09.706.706 0 01-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 01-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 01-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 01-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 01.04-.1c.03-.03.06-.05.11-.07a.83.83 0 01.2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 00-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 01-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 01-.1.195.35.35 0 01-.17.11 1.064 1.064 0 01-.278.053 7.818 7.818 0 01-.89 0 1.015 1.015 0 01-.272-.052.226.226 0 01-.137-.11.551.551 0 01-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 01-.27-.05.227.227 0 01-.14-.11.473.473 0 01-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457l.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 01-.896-.61 2.37 2.37 0 01-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 00-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 00-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg>'},function(t,e){t.exports='<svg width="40" height="40" viewBox="0 0 64 64"><style>g#vnVolumeOn:hover&gt;ellipse{opacity:1;fill-opacity:0.45}g#vnVolumeOn:hover&gt;path{opacity:1}</style><g id="vnVolumeOn" fill="none" stroke-width="2"><circle cx="32" cy="32" r="30" fill="#000" fill-opacity=".298" opacity=".7"/><path d="M38.5 39.885h13.047M26.14 52.95l13.518-13.52M26.14 12.703L39.66 26.22m-1.16-.517h12.596m-1.12-1.473v17.235M26.63 51.885v-38.22m-6.124 9.002v20.965m-5.8-24.265v28.065" opacity=".7"/></g></svg>'},function(t,e){t.exports='<svg width="40" height="40" viewBox="0 0 64 64"><style>g#vnVolumeOff:hover&gt;ellipse{opacity:1;fill-opacity:0.45}g#vnVolumeOff:hover&gt;path{opacity:1}</style><g id="vnVolumeOff" fill="none" stroke-width="2"><circle cx="32" cy="32" r="30" fill="#000" fill-opacity=".298" opacity=".7"/><path d="M36 39.885h13.047M23.64 52.95l13.518-13.52M23.64 12.703L37.16 26.22M36 25.703h12.596m-1.12-1.473v17.235M24.13 51.885v-38.22M11.61 53.417l41.772-41.77" opacity=".7"/></g></svg>'},function(t,e){t.exports='<svg width="64" height="64"><circle cx="30.868" cy="31.255" r="30.066" fill="none" stroke="#fff" transform="translate(1.2 .813)"/><path fill="#fff" d="M23.817 49V17L50 33 23.817 49z"/></svg>'},,function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},,function(t,e,r){"use strict";r.r(e);var i=r(10),o=r(4),n=r(15),a=r(2);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c="Vpaid",u="Format[Vpaid]",h=u,p=function(t){var e,r;function i(e,r){var i,o=r&&r.ancestor&&r.ancestor+":"+u||"Module::"+u,n=r&&(r.logger||r.moduleAPI&&r.moduleAPI.logger)||a.a;n.trace(o+".constructor()");var s=l({},r,{ancestor:o});return(i=t.call(this,s)||this)[h]=o,i.options=s,i.module=e,i.logger=n,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.toString=function(){return u},o.waitBeforeLoadUrl=function(t){return this.logger.trace(this[h]+".waitBeforeLoadUrl("+t+")"),Promise.resolve(t)},o._initDataXml=function(){return this.logger.trace(this[h]+".initDataXml()"),Promise.resolve()},o._vpaidInitAd=function(){return this.logger.trace(this[h]+".vpaidInitAd()"),Promise.resolve()},o.getReachInventoryFactory=function(){return null},o.hasReachInventoryFactory=function(){return!1},o._destroy=function(){this.logger.trace(this[h]+".destroy()"),t.prototype._destroy.call(this)},o.abort=function(){},o.isFloatingMode=function(){return!1},o.getModuleOptions=function(){return{isInsideTextContent:!1,startingVolume:0}},o.getSlotSize=function(){return{width:0,height:0}},o.correctAdSize=function(t,e){return{adWidth:t,adHeight:e}},o.getOptions=function(){return l({},this.options)},o.getBaseName=function(){return c.toLowerCase()},i}(n.a),g=r(1);var f,v=function(t){var e,r;function i(e,r){var i,o=(i=t.call(this,e,r)||this).options.moduleAPI||{},n=o.addVPAIDEventListener,a=o.resizeAd;return n("slotSizeChanged",(function(t){var e=t||{},r=e.height,i=e.width,o=e.src,n=o&&o.toLowerCase();n&&("vpaidgoogletag"===n||"vpaidyandexcontext"===n)&&r&&i&&setTimeout((function(){return a(i,r)}))}),function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.getSlotSize=function(){var t=(this.options||{}).moduleAPI,e=t.getControlNode,r=t.getVideoSlot,i=e("slot")||e("vpaidSlot")||r(),o=Object(g.i)(i);return{width:o.insideWidth,height:o.insideHeight}},o.toString=function(){return"Format[InStream]"},o.getBaseName=function(){return"InStream".toLowerCase()},i}(p),m=r(0),b=r(7),y="initModuleNode",A=(null===a.a||void 0===a.a||null===(f=a.a.getChildWriter)||void 0===f?void 0:f.call(a.a,y))||a.a;function O(t,e){try{return function(t){var e=t.initScriptParentNode,r=t.lookupNode,i=t.lookupElement,o=t.playerElement,n=t.playerAfter,a=t.playerBefore,s=t.playerSelectorPercent,l=t.playerSelectorTotalMin,d=t.playerDefaultClass,c=t.transitionDuration,u=t.extraSelector,h=t.ignoreCreatePlayerElement,p=t.forceFillingBoundariesModel;r=r||Object(m.k)(i)||document.body;var f,v,y,O,w=function(){var t=!1;window!==window.top&&(window.document.documentElement.clientHeight>0||b.e)&&(t=!0,A.log("initModuleNode.initModuleNode(). Module entered inside iframe and can not change height of the document.",1));return t}(),_=Object(g.u)(p)||w,S=document.createElement("div");if(o||n||a)if(f=Object(m.k)(o,s,r,l),Object(m.p)(f))f.appendChild(S);else if(o&&A.trace("initModuleNode.initModuleNode() playerElement not found ("+o+")"),y=Object(m.k)(n,s,r,l),Object(m.p)(y))y.parentNode.insertBefore(S,y.nextSibling);else if(A.trace("initModuleNode.initModuleNode() playerAfter not found ("+n+")"),v=Object(m.k)(a,s,r,l),Object(m.p)(v))v.parentNode.insertBefore(S,v);else if(A.trace("initModuleNode.initModuleNode() playerBefore not found ("+a+")"),y=Object(m.k)(u,s,r,l),Object(m.p)(y))y.parentNode.insertBefore(S,y.nextSibling),A.trace("initModuleNode.initModuleNode(). inserting after extraSelector ("+u+")");else{if(!h)throw new Error("initModuleNode Could not create player element");document.body.appendChild(S)}else{var P=e&&e.tagName;if(P&&"HEAD"!==P){e.appendChild(S);var C=w?"Module entered inside iframe and can not change height of the document.":"";A.log("initModuleNode.initModuleNode() moduleNode was initialized at parent node of init script. "+C,1),O=e}else{if(!h)throw new Error("initModuleNode Could not create player element. "+("HEAD"===P?" An attempt was detected to include the tag in the HEAD of a page (playerElement="+o+", playerAfter="+n+" playerBefore="+a+")":""));document.body.appendChild(S)}}Object(m.c)(S,{boxSizing:"content-box",overflow:"hidden",width:"100%",height:0,transition:"height "+c+"ms ease-out"}),d&&S.classList.add(d);var j=Object(m.b)(S,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,fontSize:0,lineHeight:0,margin:0,textAlign:"center"});return{lookupNode:r,moduleNode:S,moduleInnerNode:j,boundariesExists:_,insideIframe:w,elementNode:f,beforeNode:v,afterNode:y,widthNode:O}}(t)}catch(l){var r=t||{},i=r.playerElement,n=r.playerAfter,a=r.playerBefore,s=new Error(l+' (format: "'+e+'" playerElement:"'+i+'" playerAfter:"'+n+'" playerBefore:"'+a+'" url('+window.top.location.href+"))");throw s.code=o.a.FORMAT_ERROR,s.options=t,s.format=e,s}}var w=r(3),_=r(5),S=function(){function t(t){void 0===t&&(t={}),this.API=t.API,this.showObservableNode=t.showObservableNode,this.isIframe=t.isIframe,this.logger=t.logger,this.forceHeight=t.forceHeight,this.expandingDuration=t.expandingDuration}var e=t.prototype;return e.setAdSizeForceChange=function(){},e.updateModuleNodeSize=function(){throw Error("Not implemented")},e.moduleResizeAd=function(){throw Error("Not implemented")},e._canUpdateModuleNodeSize=function(t){var e=this.API,r=e.isAdHasBeenStarted,i=e.getOptions,o=e.moduleAPI.getAdHeight,n=(i&&i()||{}).expandOnAdLoaded,a=o&&o(),s=t||a&&(r()||n);return this.logger.trace(" _canUpdateModuleNodeSize() ["+s+"] forceUpdate="+t+" adHeight="+a+" isAdHasBeenStarted="+r()+" expandOnAdLoaded="+n),s},e.correctAdSize=function(t,e){return{adWidth:t,adHeight:e}},e.setForceHeight=function(t){return this.forceHeight!==t&&(this.forceHeight=t,!0)},e.getForceHeight=function(){return this.forceHeight},t}();function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var C=function(t){var e,r;function i(e){var r;return(r=t.call(this,e)||this).parentElement=null,P(r)||P(r)}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.updateModuleNodeSize=function(t){void 0===t&&(t=!1);var e,r,i=this.isIframe,o=this.API,n=o.getModuleNode,a=o.moduleAPI.trigger;if(!this._canUpdateModuleNodeSize(t))return null;var s=n&&n(),l=s.clientWidth,d=s.clientHeight,c=this.parentElement=i?document.body:s&&s.parentElement;if(c){var u=Object(g.i)(c);e=u.insideWidth,r=u.insideHeight}return s&&Object(m.c)(s,{width:Object(g.t)(e),height:Object(g.t)(r)}),(Object(g.q)(d,r,1.2)||Object(g.q)(l,e,1.2))&&setTimeout((function(){return a("slotSizeChanged")})),{width:e,height:r}},n.moduleResizeAd=function(t){var e=this.isIframe,r=this.API,i=r.getModuleNode,n=r.moduleAPI,a=n.getControlNode,s=n.resizeAd,l=n.setWrapperSize,d=n.getAdHeight,c=n.getAdWidth,u=n.getIndents,h=n.fail,p=a&&a("wrapper");if(!this.parentElement){var f=i&&i();this.parentElement=e?document.body:f&&f.parentElement}var v=this.parentElement,b=E.call(this,t),y=b.width,A=b.height,O=j.call(this,y,A,t),w=O.width,_=O.height,S=O.availableHeightForAd;if(w<0||_<0)y>0&&(null==h||h({code:o.a.GENERAL_VPAID_ERROR,message:"OutsideBoundariesUpdateStrategy.moduleResizeAd() slot has no width or height to show ad. failing to error."}));else if(d&&d()!==_||d&&c()!==w){var P=getComputedStyle(p).width,C=parseFloat(P);this.logger.none(".moduleResizeAd() resizeAd("+w+", "+_+")");var I=D.call(this),T=I.outsideWrapperHeight,k=I.insideWrapperHeight;if((S!==k||t>1&&w<C)&&(this.logger.log(".moduleResizeAd() setWrapperSize("+(t>1&&C||w)+", "+S+")"),l(S+T-k)),v&&"BODY"===v.tagName){var V=Object(g.i)(v),R=V.borderTopWidth,M=V.borderRightWidth,x=V.borderBottomWidth,N=V.borderLeftWidth,L=v.clientHeight-R-x,F=v.clientWidth-N-M,W=u(),H=W.outsideHeight,z=W.outsideWidth;p&&L&&Object(m.c)(p,{top:Object(g.t)(L/2-H/2),left:Object(g.t)(F/2-z/2)})}s&&s(0^w,0^_)}},n.correctAdSize=function(t,e){var r=j.call(this,t,e,e/t);return{adWidth:r.width,adHeight:r.height}},i}(S);function j(t,e,r){var i=this.API,o=i.getWidthNode,n=i.moduleAPI.getControlNode,a=n&&n("wrapper"),s=o&&o(),l=Object(g.i)(s).insideHeight,d=D.call(this),c=d.outsideWrapperHeight,u=d.insideWrapperHeight,h=d.outsideWrapperWidth,p=d.insideWrapperWidth,f=getComputedStyle(a).width,v=parseFloat(f),m=l-((c||0)-(u||0));return c>l||e>m?(this.logger.trace(".OutsideBoundariesUpdateStrategy       :\n        outsideWrapperHeight("+c+") > containerInsideHeight("+l+")\n        height("+e+") > availableHeightForAd("+m+")"),y.call(this),t>v&&(this.logger.trace(".OutsideBoundariesUpdateStrategy        :\n       width("+t+") > containerInsideWidth("+v+")"),b.call(this,v))):(h>v||t>v)&&(this.logger.trace(".OutsideBoundariesUpdateStrategy       :\n       outsideWrapperWidth("+h+") > containerInsideWidth("+v+")\n       width("+t+") > containerInsideWidth("+v+")"),b.call(this,v-(h-p)),e>m&&(this.logger.trace(".OutsideBoundariesUpdateStrategy        :\n         height("+e+") > availableHeightForAd("+m+")"),y.call(this))),{width:t,height:e,availableHeightForAd:m};function b(i){t=i,e=Math.round(t*r),this.logger.trace(".OutsideBoundariesUpdateStrategy setWidthCalcHeight("+i+"): width="+i+" height="+e)}function y(){e=m,t=Math.round(e/r),this.logger.trace(".OutsideBoundariesUpdateStrategy setWidthCalcHeight() height="+e+" width="+t)}}function E(t){var e=this.API.moduleAPI.getControlNode,r=e&&e("wrapper"),i=getComputedStyle(r).width,o=parseFloat(i),n=0^(this.forceWidth||o);return{width:n,height:0^(this.forceHeight||Math.round(n*t))}}function D(){var t=(0,this.API.moduleAPI.getIndents)();return{outsideWrapperHeight:t.outsideHeight,insideWrapperHeight:t.insideHeight,outsideWrapperWidth:t.outsideWidth,insideWrapperWidth:t.insideWidth}}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var T=function(t){var e,r;function i(e){var r;return I(r=t.call(this,e)||this)||I(r)}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.updateModuleNodeSize=function(t){if(void 0===t&&(t=!1),!this._canUpdateModuleNodeSize(t))return null;var e=this.API,r=e.getOptions,i=e.getModuleNode,o=e.getWidthNode,n=e.moduleAPI,a=n.getIndents,s=n.trigger,l=(r&&r()||{}).expandingDuration;l=l&&parseFloat(l)||0;var d=o&&o(),c=i&&i(),u=Object(g.i)(c),h=u.clientWidth,p=u.clientHeight,f=a&&a(),v=f.outsideWidth,b=f.outsideHeight,y=d&&Object(g.i)(d).insideWidth||"100%";Object(m.c)(c,{width:Object(g.t)(y),height:Object(g.t)(b)});var A=Object(g.q)(h,v,1.2);return(Object(g.q)(p,b,1.2)||A&&this.prevPrevWidth!==h)&&(this.prevPrevWidth=h,this.logger.trace(".updateModuleNodeSize() trigger(slotSizeChanged) prevHeight="+p+" moduleNodeHeight="+b),setTimeout((function(){return s("slotSizeChanged")}),l)),{width:v,height:b}},n.moduleResizeAd=function(t){var e=this.API,r=e.getWidthNode,i=e.moduleAPI,n=i.resizeAd,a=i.setWrapperSize,s=i.getControlNode,l=i.fail,d=r&&r(),c=Object(g.i)(d).insideWidth,u=s&&s("wrapper"),h=Object(g.i)(u),p=h.borderTop,f=h.paddingTop,v=h.borderBottom,m=h.paddingBottom,b=Math.min(c,this.forceWidth||c),y=this.forceHeight||b*t^0||0;b>0?(a(y+(p||0)+(v||0)+(f||0)+(m||0)),n&&n(0^b,0^y)):null==l||l({code:o.a.GENERAL_VPAID_ERROR,message:"OutStreamUpdateStrategy.moduleResizeAd() slot has no width. failing to error."})},n.correctAdSize=function(t,e){var r=this.forceEnableVerticalContent,i=this.API.getModuleNodeSize,o=!1,n=e/t;!b.h&&n>1&&!r&&(o=!0);var a=i(n).width;return t!==a&&(o?t=(e=9*a/16)/n:(e*=a/t,t=a)),{adWidth:t,adHeight:e}},i}(S);function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var V=function(t){var e,r;function i(e){var r;r=t.call(this,e)||this;var i=e.height,o=e.width;return r.forceInsideHeight=i,r.forceInsideWidth=o,r.parentElement=null,k(r)||k(r)}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.setAdSizeForceChange=function(t,e){t&&(this.forceInsideHeight=e),e&&(this.forceInsideWidth=t),this.updateModuleNodeSize()},n.updateModuleNodeSize=function(t){void 0===t&&(t=!1);var e=this.forceInsideWidth,r=this.expandingDuration,i=this.forceInsideHeight,o=this.API,n=o.getModuleNode,a=o.getWidthNode,s=o.moduleAPI.trigger;if(!this._canUpdateModuleNodeSize(t))return null;var l=a&&a(),d=l&&Object(g.i)(l).insideWidth;e>d&&(i*=d/e);var c=x.call(this),u=c.outsideWrapperHeight,h=c.insideWrapperHeight;u&&h&&(i+=u-h);var p=n&&n(),f=p.clientWidth,v=p.clientHeight;p&&Object(m.c)(p,{width:Object(g.t)(d),height:Object(g.t)(i)});var b=Object(g.q)(f,d,1.2);return(Object(g.q)(v,i,1.2)||b&&this.prevPrevWidth!==f)&&this._canUpdateModuleNodeSize(t)&&(this.prevPrevWidth=f,this.logger.trace(" FixedBoundariesUpdateStrategy updateModuleNodeSize("+t+") prevHeight="+v+" forceInsideHeight="+i+" prevWidth="+f+" widthNodeContentWidth="+d),setTimeout((function(){s("slotSizeChanged")}),r)),{width:e,height:i}},n.moduleResizeAd=function(){var t=this.API.moduleAPI,e=t.getAdHeight,r=t.getAdWidth,i=t.resizeAd,n=t.getControlNode,a=t.setWrapperSize,s=t.fail,l=M.call(this),d=l.width,c=l.height,u=n&&n("wrapper"),h=Object(g.i)(u),p=h.borderTop,f=h.paddingTop,v=h.borderBottom,b=h.paddingBottom;a((this.forceInsideHeight||0)+(p||0)+(v||0)+(f||0)+(b||0));var y=R.call(this,d,c),A=y.width,O=y.height;if(A<0||O<0)d>0&&(null==s||s({code:o.a.GENERAL_VPAID_ERROR,message:"FixedBoundariesUpdateStrategy.moduleResizeAd() slot has no width or height to show ad. failing to error."}));else if(e&&e()!==O||e&&r()!==A){this.logger.log("FixedBoundariesUpdateStrategy moduleResizeAd() resizeAd("+A+","+O+")"),i(0^A,0^O);var w=n("vpaidSlot");w&&Object(m.c)(w,{position:"relative",display:"inline-block",verticalAlign:"middle",width:Object(g.t)(A),height:Object(g.t)(O)})}},n.correctAdSize=function(t,e){var r=R.call(this,t,e);return{adWidth:r.width,adHeight:r.height}},i}(S);function R(t,e){var r=this.API,i=this.forceInsideWidth,o=this.forceInsideHeight,n=(r||{}).getWidthNode,a=n&&n(),s=a&&Object(g.i)(a).insideWidth;return i>s&&(o*=s/i,i=s),t>i&&(e*=i/t,t=i),e>o&&(t*=o/e,e=o),{width:t,height:e}}function M(){var t=this.forceInsideHeight;return{width:this.forceInsideWidth,height:t}}function x(){var t=(0,this.API.moduleAPI.getIndents)();return{widthFromStyle:t.widthFromStyle,heightFrmStyle:t.heightFrmStyle,outsideWrapperHeight:t.outsideHeight,insideWrapperHeight:t.insideHeight,outsideWrapperWidth:t.outsideWidth,insideWrapperWidth:t.insideWidth}}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var H="ContentRoll",z="Format[ContentRoll]",B={expandOnAdLoaded:!1,shouldStart:"beforeExpand",startMethod:"auto",playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerExpandedClass:"vn-expanded",playerSelectorPercent:"100%",widthElement:null,playerElement:null,playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.5,desktopMaxHeight:null,mobileMaxHeight:null,expandingDuration:150,waitScroll:!0,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,doNotWatchVisibility:!1,moduleAPI:{},showObservableNode:!1,forceEnableVerticalContent:!1,ignoreCreatePlayerElement:!1,needAfterCloseCompensation:!0,slotMargin:"auto"},U=0,q=0,G=function(t){var e,r;function i(e,r){var i,o;void 0===r&&(r={});var n=r&&r.ancestor&&r.ancestor+":"+z||"::Format[ContentRoll]",s=r&&r.moduleAPI&&r.moduleAPI.logger||a.a,l=(null==s||null===(i=s.getChildWriter)||void 0===i?void 0:i.call(s,z))||s;l.trace(n+".constructor()"),W(F(o=t.call(this,e,L({},B,{},{logger:l},{ancestor:n}))||this),"_addPlayerExpandedClass",(function(){var t=F(o),e=t.moduleNode,r=t.options.playerExpandedClass;r&&e.classList.add(r)})),W(F(o),"_removePlayerExpandedClass",(function(){var t=F(o),e=t.moduleNode,r=t.options.playerExpandedClass;r&&e.classList.remove(r)})),W(F(o),"_proceedToNextDefaultAd",(function(t){t&&(o._adHasBeenStarted=!1,o.logger.trace("Format[ContentRoll] @vnProceedToNextDefaultAd",2),o.module.isVpaidStartAdWasInvokedOnce&&o._getModuleVisibility().then(o._checkModuleState.bind(F(o))))})),o["Format[ContentRoll]"]=n,o._adHasBeenLoaded=!1,o._adHasBeenStarted=!1,o._updateStrategy=null,o.watchVisibility=null,o.wasExpanded=!1,o._adPausedPostponedCommand=null,o._showGridTimeoutId=null,r=ct.call(F(o),r),o.updateOptions(r);var d=F(o).options,c=d.playerDesktopStartFactor,u=d.playerDesktopStopFactor,h=d.playerMobileStartFactor,p=d.playerMobileStopFactor,g=d.mobileMaxHeight,f=d.desktopMaxHeight;o._startFactor=parseFloat(b.h?h:c),o._stopFactor=parseFloat(b.h?p:u),o._maxHeight=b.h?g:f,o._initNoAdElement(),o._initDOM();var v=o.options.moduleAPI||{},m=v.setControlData,y=v.addVPAIDEventListener;return m&&m("slot",{node:o.moduleInnerNode}),o.updateControlsLayout(),!0===r.withoutBottomBorder&&m&&m("bottomBorder",{node:null,enableWithVPAID:"true"}),o._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",o._proceedToNextDefaultAd),y&&(y("slotSizeChanged",K.bind(F(o)),F(o)),y("vn_VideoSlotRemoved",Z.bind(F(o)),F(o)),y("AdPaused",(function(){o._adPausedPostponedCommand&&setTimeout((function(){o._adPausedPostponedCommand&&(o.logger.trace(o["Format[ContentRoll]"]+" @AdPaused calling _adPausedPostponeCommand="+o._adPausedPostponedCommand),o._adPausedPostponedCommand(),o._adPausedPostponedCommand=null)}),1)}),F(o)),y("AdDestroyed",et.bind(F(o)),F(o))),o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.updateOptions=function(t){var e=this._adHasBeenLoaded,r=this._adHasBeenStarted,i=this.options.doNotWatchVisibility,o=(t||{}).expandOnAdLoaded;this.options=L({},this.options,{},t),this.options.waitScroll=Object(g.u)(this.options.waitScroll),this.options.expandOnAdLoaded=Object(g.u)(this.options.expandOnAdLoaded),this.options.needAfterCloseCompensation=Object(g.u)(this.options.needAfterCloseCompensation);var n=this.options.expandOnAdLoaded;i||!e||r||(o||!0!==n?!0!==o||n||this._watchTempObservableModuleNodeVisibility||(this._switchOffObservableCheckingToModuleNode(),this._switchOnObservableAdvancedNode()):(this._switchOffObservableAdvancedNode(),this._switchOnObservableCheckingToModuleNode()));var a=this.options.expandingDuration;this.expandingDuration=a&&parseFloat(a)||0},o.updateControlsLayout=function(t,e,r){void 0===t&&(t=25),void 0===e&&(e=!1),void 0===r&&(r=null),this.logger.trace(this["Format[ContentRoll]"]+" updateControlsLayout");var i=r||this.options.moduleAPI||{},o=i.setControlData,n=i.getControlNode,a=function(t){void 0===t&&(t=25);return{wrapper:{paddingTop:Object(g.t)(t)},skipAd:{top:Object(g.t)(t)},skipAdCountdown:{top:Object(g.t)(10+t)},title:{color:"gray"},logo:{top:0,right:0,bottom:"auto",left:"auto"},play:{top:Object(g.t)(t)},vnAfterplay:{marginTop:Object(g.t)(t)}}}(t);Object.keys(a).forEach((function(t){var r=Object(_.f)({},"css",a[t]);if(o&&o(t,r),e){var i=n&&n(t);i&&Object(m.c)(i,r&&r.css||{})}}))},o.setAdSizeForceChange=function(t,e){null==this||this._updateStrategy.setAdSizeForceChange(t,e)},o.getModuleOptions=function(){return{formatExpandingDuration:this.options.expandingDuration||0,isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}},o.getSlotSize=function(){var t=this.moduleNode,e=(this.options||{}).moduleAPI.getAdAspectRatio,r=Object(g.i)(t),i=r.insideWidth;return{width:i,height:r.insideHeight||e&&i*e()||0}},o.waitBeforeLoadUrl=function(t){var e=document,r=e.body,i=e.documentElement,o=Math.max(r.scrollTop,i.scrollTop),n=document.documentElement.clientHeight,a=document.body.clientHeight,s=[],l=this.options,d=l.preloadDistance,c=l.waitScroll;return c&&(c=n<a),this.logger.trace(this["Format[ContentRoll]"]+".waitBeforeLoadUrl("+t+") waitScroll="+c+" scrollTop="+o+" preloadDistance="+d),c&&0===o&&s.push(this._requestDataXmlByScroll()),(void 0===d&&!c||c&&0!==o)&&(d=this.options.preloadDistance=1/0),void 0!==d&&s.push(this._waitForMinimumDistance()),Promise.race(s).then((function(e){return s.forEach((function(t){t.name!==e&&t.reject()})),t}))},o._vpaidInitAd=function(){this.logger.trace(this["Format[ContentRoll]"]+"._vpaidInitAd()");var e=this.options.moduleAPI||{},r=e.addVPAIDEventListener,i=e.extendEnvironmentVars,o=e.getControlNode,n=e.getControlInstance;i&&i({forceAspectRatio:!b.h}),this._switchOffAllObserves(),this.onAdLoadedHandler=r("AdLoaded",Y.bind(this),this),this.onAdStartedHandler=r("AdStarted",$.bind(this),this),this.onAdVideoStartHandler=r("AdVideoStart",tt.bind(this),this),this.onAdSizeChangeHandler=r("AdSizeChange",this._onAdSizeChange.bind(this),this),this.onVn_VPAIDCreatedHandler=r("vn_VPAIDCreated",J.bind(this),this),this.onAdVideoCompleteHandler=r("AdVideoComplete",this._clearEventsHandlers.bind(this),this),this.onVnVpaidAdErrorHandler=r("vnVpaidAdError",this._clearEventsHandlers.bind(this),this);var a=o("title"),s=o("logo","node");if(!(a&&"hidden"!==a.style.visibility&&"none"!==a.style.display||s&&"hidden"!==s.style.visibility&&"none"!==s.style.display)){var l=n("wrapper");l&&l.hideTopSpace()}return t.prototype._vpaidInitAd.call(this)},o._clearEventsHandlers=function(){ht.call(this,"AdLoaded","onAdLoadedHandler"),ht.call(this,"AdVideoStart","onAdVideoStartHandler"),ht.call(this,"AdStarted","onAdStartedHandler"),ht.call(this,"AdVideoComplete","onAdVideoCompleteHandler"),ht.call(this,"AdSizeChange","onAdSizeChangeHandler"),ht.call(this,"vnVpaidAdError","onVnVpaidAdErrorHandler"),ht.call(this,"vn_VPAIDCreated","onVn_VPAIDCreatedHandler")},o.getStartMethod=function(){return(this.options||{}).startMethod},o._initNoAdElement=function(){this.logger.trace(this["Format[ContentRoll]"]+".initNoAdElement()");var t=this.options.noAdElement;if(document.querySelector(t)){var e=new Error("Disabled by noAdElement ("+t+")");throw e.fatal=!0,e}},o.getAnchorElement=function(){return this.anckorElement},o._initDOM=function(){var t=this;this.logger.trace(this["Format[ContentRoll]"]+".initDOM()");var e=this.options,r=this.options,i=r.forceEnableVerticalContent,o=r.moduleAPI,n=r.showObservableNode,a=r.moduleAPI,s=a.getOptions,l=(a.getMainModuleId,a.getControlNode),d=s().initScriptParentNode,c=e.lookupElement,u=e.scrollElement,h=e.widthElement,p=e.minSegments,f=e.maxSegments,v=e.minDistance,b=e.slotBackground,y=e.slotMargin,A=window.innerHeight,w=this.lookupNode=Object(m.k)(c)||document.body,_=w.offsetHeight/(A*v);if(_<p)throw new Error(this["Format[ContentRoll]"]+" lookupNode height/segments factor ("+_.toFixed(2)+"vh) is not enough, minimum "+parseFloat(p).toFixed(2)+"vh required");if(!f)throw new Error(this["Format[ContentRoll]"]+" maxSegments is 0");var S=O(L({},e,{lookupNode:w,initScriptParentNode:d}),""+this),P=S.moduleNode,j=S.moduleInnerNode,E=S.elementNode,D=S.beforeNode,I=S.afterNode,k=S.widthNode,V=S.boundariesExists,R=S.insideIframe;(this.anckorElement=E||D||I,Object(m.c)(P,{position:"relative",zIndex:0,backgroundColor:b,margin:y,boxSizing:V?"border-box":"content-box"}),this.moduleNode=this._addDOMNode(P),this.moduleInnerNode=this._addDOMNode(j),this.widthNode=Object(m.k)(h)||k||P.parentNode,this.scrollNode=Object(m.k)(u)||window,w&&w!==document.body)&&("static"===getComputedStyle(w).position&&(w.style.position="relative"));if(this.insideIframe=R,this.boundariesExists=V,!this._updateStrategy){var M={isIframe:R,forceEnableVerticalContent:i,showObservableNode:n,logger:this.logger,API:{moduleAPI:o,getWidthNode:this._getWidthNode.bind(this),getModuleNodeSize:it.bind(this),isAdHasBeenStarted:function(){return t._adHasBeenStarted},getModuleNode:function(){return t.moduleNode},getOptions:function(){return L({},t.options)}}},x=ut.call(this);x&&(M.forceHeight=x),this._updateStrategy=V?new C(M):new T(M)}var N=w||document.body;this.observerForParent=new MutationObserver((function(){var e=N.clientHeight;void 0!==t.prevParentHeight&&e===t.prevParentHeight||(t.logger.trace("Format[ContentRoll].MutationObserver() for lookup "+Object(g.f)(N)+".parentHeight="+e+" prevDocumentHeight="+t.prevParentHeight),t._updateObservableAdvancedNodePosition(!1),n&&(clearTimeout(t._showGridTimeoutId),t._showGridTimeoutId=setTimeout(ot.bind(t,t._tempObservableModuleNode||l("container")||P),1))),t.prevParentHeight=e}));this.observerForParent.observe(N,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),P.clientWidth||(this.logger.warn(this["Format[ContentRoll]"]+"._initDOM() looks like module has been inserted inside invisible block."),rt.call(this))},o._requestDataXmlByScroll=function(t){var e=this;void 0===t&&(t=this),this.logger.trace(this["Format[ContentRoll]"]+".requestDataXmlByScroll()");var r=function(){},i=function(){},o="byScroll",n=this.scrollNode,a=function r(){e.logger.trace(e["Format[ContentRoll]"]+" Watching for scroll is finished"),t._removeDOMEventListener(n,"scroll",r),i(o)},s=new Promise((function(o,s){e.logger.trace(e["Format[ContentRoll]"]+" Waiting for scroll"),r=s,i=o,t._addDOMEventListener(n,"scroll",a)}));return s.catch((function(){e.logger.trace(e["Format[ContentRoll]"]+" Waiting for scroll was rejected"),t._removeDOMEventListener(n,"scroll",a)})),Object(_.g)(s,{name:o,reject:r})},o._waitForMinimumDistance=function(t,e){var r=this;void 0===t&&(t=this.options.preloadDistance),void 0===e&&(e=this),this.logger.trace(this["Format[ContentRoll]"]+".waitForMinimumDistance()");var i=function(){},o=function(){},n="byPreloadDistance",a=this.scrollNode,s=function o(){var s=r._getModuleDimensions(),l=s.viewportHeight,d=s.moduleTop,c=d-l;r.logger.none("_waitForMinimumDistance distance="+c+" moduleTop="+d+" viewportHeight="+l+" preloadDistance="+t),c<=t&&(r.logger.trace(r["Format[ContentRoll]"]+" Minimum distance "+t+"px reached"),e._removeDOMEventListener(a,"scroll",o),i(n))},l=new Promise((function(n,l){r.logger.trace(r["Format[ContentRoll]"]+" Waiting for minimum distance "+t+"px"),o=l,i=n,e._addDOMEventListener(a,"scroll",s),s()}));return l.catch((function(){r.logger.trace(r["Format[ContentRoll]"]+" Waiting for minimum distance was rejected"),e._removeDOMEventListener(a,"scroll",s)})),Object(_.g)(l,{name:n,reject:o})},o.hasReachInventoryFactory=function(){return!0},o.getReachInventoryFactory=function(){var t=this.scrollNode,e=this.moduleNode;return this.options.doNotWatchVisibility?null:this._createReachInventoryFactory(t,e)},o._createReachInventoryFactory=function(t,e){var r=this.options,i=r.showObservableNode,o=r.doNotWatchVisibility,n=r.moduleAPI.getMainModuleId,a=n&&n();if(this.logger.trace(this["Format[ContentRoll]"]+"._createReachInventoryFactory() moduleNode="+e+" doNotWatchVisibility="+o,2,"brown"),o)return null;var s=("vn-visible-inventory-mark_"+this+"_"+U+++" vn-module__"+a).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),l=document.createElement("div");l.className=s,!0===i&&Object(m.c)(e,{outlineWidth:"1px",outlineColor:"#4080ff",outlineStyle:"solid"}),e.parentElement.insertBefore(l,e);var d=null;return{id:s,waiterCreator:function(){return new Promise((function(e){d=Object(g.y)(l,{threshold:[0,1e-4,.1,.999,1],registerHandle:function(e){var r="scroll";return t&&t.addEventListener(r,e),{handler:e,event:r,scrollNode:t}}},(function(t){t.intersectionRatio>0&&(d&&d.disconnect&&d.disconnect(),d=null,e())}))}))},destroy:function(){d&&d.disconnect&&d.disconnect(),Object(m.t)(l)},markNode:l,moduleNode:e}},o._getModuleDimensions=function(){var t=this.scrollNode,e=this.moduleNode;return Object(g.k)(t,e)},o._getWidthNode=function(){return this.widthNode},o._updateModuleNodeSize=function(t){void 0===t&&(t=!1),this.logger.trace(this["Format[ContentRoll]"]+".updateModuleNodeSize()");var e=this._updateStrategy.updateModuleNodeSize(t);return this._resetObservableNodes(),e},o._updateModuleSize=function(){this.logger.trace(this["Format[ContentRoll]"]+"._updateModuleSize()");var t=this.boundariesExists,e=this.moduleNode,r=this.options,i=r.forceEnableVerticalContent,o=r.moduleAPI,n=o.getAdAspectRatio,a=o.getControlNode,s=this._getWidthNode();if(s){var l,d=n&&n();t&&(l=s.clientHeight/s.clientWidth),!b.h&&d>1&&!i&&!l&&(d=9/16),this._moduleResizeAd(s,d);var c=this._watchTempObservableModuleNodeVisibility;this.options.showObservableNode&&!c&&(this.logger.none("._updateModuleSize() showGrid"),clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(ot.bind(this,a("container")||e),1))}else this.logger.warn(this["Format[ContentRoll]"]+"._updateModuleSize() Invalid widthNode ("+s+")")},o._moduleResizeAd=function(t,e){return this._updateStrategy.moduleResizeAd(e)},o._updateModuleState=function(){this._getModuleVisibility().then(this._checkModuleState.bind(this))},o._checkModuleState=function(t){var e=this,r=t.intersectionRatio,i=t.moduleSquare,o=t.boundingClientRect,n=t.screenSquare;this.logger.trace(this["Format[ContentRoll]"]+"._checkModuleState() moduleSquare="+i+" intersectionRatio="+r,1);var a=this.options,s=a.expandOnAdLoaded,l=a.doNotWatchVisibility;if(null!==n){!i&&r&&(r=0);var d=this.options.moduleAPI,c=d.addVPAIDEventListener,u=d.inState;this._applyModuleState({intersectionRatio:r,moduleSquare:i,boundingClientRect:o,screenSquare:n})?l||s||(u("started")?this._onStartedCheck():c("AdVideoStart",(function(){return e._onStartedCheck()}))):this._watchTempObservableModuleNodeVisibility&&u(["playing","pausing","paused"])&&this._onStartedCheck()}else this.logger.trace(this["Format[ContentRoll]"]+"._checkModuleState() screenSquare="+n+" intersectionRatio="+r+" - do not pay attention to this case, do nothings.",2,"pink")},o._onStartedCheck=function(){var t=this,e=this.options,r=e.expandingDuration,i=e.moduleAPI,o=i.addVPAIDEventListener,n=i.removeVPAIDEventListener;this._addTimeout("_checkModuleState_AdVideoStart",(function(){t._switchOffObservableAdvancedNode(),t.logger.none(t["Format[ContentRoll]"]+"._checkModuleState() @AdVideoStart _switchOffObservableAdvancedNode() & _switchOnObservableCheckingToModuleNode()",1);var e=o("slotSizeChanged",(function(){return i("slotSizeChanged")}),t),r=setTimeout((function(){return i("timeout")}),50),i=function(i){n("slotSizeChanged",e,t),clearTimeout(r),t.logger.trace(t["Format[ContentRoll]"]+"._checkModuleState() @AdVideoStart call _switchOnObservableCheckingToModuleNode() reason is "+i),t._switchOnObservableCheckingToModuleNode()}}),r)},o._applyModuleState=function(t){var e=t.intersectionRatio,r=t.moduleSquare,i=t.boundingClientRect;this.logger.none(this["Format[ContentRoll]"]+"._applyModuleState() intersectionRatio="+e+" moduleSquare="+r,1);var o=this._applyModuleStateCheckStartAd({intersectionRatio:e,moduleSquare:r,boundingClientRect:i});return this._applyModuleStateCheckPausedAndPlaying({intersectionRatio:e,moduleSquare:r,boundingClientRect:i}),o},o._applyModuleStateCheckStartAd=function(t){var e=this,r=t.intersectionRatio,i=this._startFactor,o=this.options,n=o.shouldStart,a=o.startMethod,s=o.expandOnAdLoaded,l=o.expandingDuration,d=o.moduleAPI,c=d.addVPAIDEventListener,u=d.removeVPAIDEventListener,h=d.startAd,p=d.inState,g=[p("loaded"),p("waitStarting"),p("starting")],f=g[0],v=g[1],m=g[2],b=!1,y=n.toLowerCase(),A="afterexpand"===y,O="beforeexpand"===y,w="manual"===a;if(this.logger.none(this["Format[ContentRoll]"]+"._applyModuleStateCheckStartAd() intersectionRatio="+r+" _startFactor="+i+" shouldStart="+n+" waitStarting="+v+" loaded="+f+" startMethod="+a,1,"blue"),f&&s&&!this.wasExpanded){this.wasExpanded=!0,this._addPlayerExpandedClass(),O&&h&&h(),this._updateModuleNodeSize(!0);var _=c("AdVideoStart",(function(){u("AdVideoStart",_),setTimeout((function(){return e._updateModuleState()}),l)}));A&&h&&h(),b=!0}return r>=i&&(f&&!w&&(A||O)||w&&v)&&(A&&this._updateModuleNodeSize(!0),h&&h(),b=!0),b||m},o._applyModuleStateCheckPausedAndPlaying=function(t){var e=t.intersectionRatio,r=this._startFactor,i=this._stopFactor,o=this.options.moduleAPI,n=o.resumeAd,a=o.pauseAd,s=o.inState,l=[s("paused"),s("pausing"),s("playing"),s("resuming")],d=l[0],c=l[1],u=l[2],h=l[3];this.logger.trace(this["Format[ContentRoll]"]+"._applyModuleStateCheckPausedAndPlaying inState(paused)="+d+" intersectionRatio="+e+" inState(playing)="+u+" inState(resuming)="+h,2,"pink"),e>=r&&(d?(this._adPausedPostponedCommand=null,n&&n()):c&&(this._adPausedPostponedCommand=function(){return n()})),u&&e<i&&(this._adPausedPostponedCommand=null,a&&a())},o.hide=function(){this._closeModule()},o._closeModule=function(t){void 0===t&&(t={});var e=((this.options||{}).moduleAPI||{}).addVPAIDEventListener,r=this._needAfterCloseCompensation()&&!0!==t.noCompensation;if(this.logger.trace(this["Format[ContentRoll]"]+"._closeModule()"),this._removePlayerExpandedClass(),!this._moduleWasClosed){this._moduleWasClosed=!0,this._removeEventListeners(),e&&e("AdDestroyed",et.bind(this),this);var i=this.moduleNode,o=this.observerForParent;o&&o.disconnect&&o.disconnect(),setTimeout(nt.bind(this),1);var n=r&&at.call(this);Object(m.c)(i,{height:0,margin:0,border:0,padding:0}),n&&st.call(this,n)}},o._getWatchVisibilityThreshold=function(){var t=this._startFactor,e=this._stopFactor,r=[];return t>=0&&r.push(t),e>=0&&t!==e&&r.push(e),r.length&&(0!==t&&0!==e&&r.push(0),1!==t&&1!==e&&r.push(1)),r.sort()},o._destroy=function(){this.logger.trace(this["Format[ContentRoll]"]+"._destroy()");var e=this.watchVisibility,r=this._watchModuleNodeNodeVisibility,i=this._watchTempObservableModuleNodeVisibility,o=this._moduleNodeObservable;e&&e.disconnect&&e.disconnect(),this.watchVisibility=null,r&&r.disconnect&&r.disconnect(),this._watchModuleNodeNodeVisibility=null,i&&i.disconnect&&i.disconnect(),this._watchTempObservableModuleNodeVisibility=this,o&&o.disconnect&&o.disconnect(),this._moduleNodeObservable=null;var n=this._needAfterCloseCompensation()&&at.call(this);t.prototype._destroy.call(this),n&&st.call(this,n),this.logger.log(this["Format[ContentRoll]"]+"._destroy() Destroyed")},o._needAfterCloseCompensation=function(){var t=this.boundariesExists;return(this.options||{}).needAfterCloseCompensation&&!t},o.abort=function(){this.logger.trace(this["Format[ContentRoll]"]+".abort()"),this._closeModule({noCompensation:!0})},o._switchOnObservableAdvancedNode=function(){var t=this.options,e=t.showObservableNode,r=t.doNotWatchVisibility,i=t.moduleAPI.getMainModuleId;if(!this._tempObservableModuleNode&&!r){this.logger.trace(this["Format[ContentRoll]"]+"._switchOnObservableAdvancedNode()");var o=this._createObservableAdvancedNode(),n=o.node,a=o.watcher;n&&window.document.body.appendChild(n),this._tempObservableModuleNode=this._addDOMNode(n),this._tempObservableModuleNode.className=("vn-start-mark_"+this+"_"+q+++" vn-module__"+(i&&i())).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),this._watchTempObservableModuleNodeVisibility=a,e&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(ot.bind(this,n),1))}},o._createObservableAdvancedNode=function(){var t=this.scrollNode,e=this.options.showObservableNode;this.logger.trace(this["Format[ContentRoll]"]+"._createObservableAdvancedNode()");var r=Object(m.e)("div",{top:-9999,left:-9999,height:0,width:0,position:"absolute",zIndex:"-1",opacity:0});!0===e&&Object(m.c)(r,{outlineWidth:"1px",outlineColor:"red",outlineStyle:"solid",opacity:1,zIndex:1}),r.classList.add("vn-observable-advanced-node"),this._updateObservableAdvancedNodePosition(!1,r);var i=Object(g.y)(r,{threshold:this._getWatchVisibilityThreshold(),registerHandle:function(e){var r="scroll";return t&&t.addEventListener(r,e),{handler:e,event:r,scrollNode:t}}},this._checkModuleState.bind(this));return e&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(ot.bind(this,r),1)),{watcher:i,node:r}},o._updateObservableAdvancedNodePosition=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=null);var r=this._tempObservableModuleNode,i=this.options,o=i.showObservableNode,n=i.moduleAPI.getControlNode;if(e||(e=r),!Object(m.p)(e))return null;var a,s,l=n&&n("wrapper"),d=n&&n("vpaidSlot")||l;if(!d)return null;var c=d&&Object(g.i)(d)||{};if(c.offsetHeight){var u=c.offsetHeight,h=c.offsetWidth,p=c.marginLeft,f=c.marginRight;s=u+(c.marginTop||0)+(c.marginBottom||0),a=h+(p||0)+(f||0),this.logger.trace(this["Format[ContentRoll]"]+"._updateObservableAdvancedNodePosition() height="+s+" width="+a)}if(!s){var v=it.call(this),b=v.width,y=v.height;!s&&(s=y),!a&&(a=b),this.logger.trace(this["Format[ContentRoll]"]+"._updateObservableAdvancedNodePosition() videoContainer  wrapper    nodeHeight="+y+" nodeWidth="+b)}var A=Object(m.h)(d),O={top:Object(g.t)(window.scrollY<A.top?A.top:A.top-s),left:Object(g.t)(A.left),height:Object(g.t)(s),width:Object(g.t)(a),pointerEvents:"none"};return this.logger.trace("Format[ContentRoll]._updateObservableAdvancedNodePosition() ("+JSON.stringify(O,null,"\t")+")"),Object(m.c)(e,O),t&&o&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(ot.bind(this,e),1)),e},o._getModuleVisibility=function(t){var e=this;void 0===t&&(t=0);var r=this._watchTempObservableModuleNodeVisibility,i=this._tempObservableModuleNode,o=this.moduleNode,n=this.options.moduleAPI,a=n.getVideoSlot,s=n.getControlNode,l=a(),d=(l||{}).style,c=d&&"hidden"!==d.display&&l.clientHeight&&l||s("container")||o,u=[];return r&&i&&u.push(Object(g.o)(i)),c&&u.push(Object(g.o)(c)),Promise.all(u).then((function(r){if(e.logger.trace(e["Format[ContentRoll]"]+"._getModuleVisibility() promises.length="+u.length+" counter="+t+" values.length="+r.length+" [0].intersectionRatio="+r[0].intersectionRatio+" [0].moduleSquare="+r[0].moduleSquare+" [1].intersectionRatio="+(r.length>1&&r[1].intersectionRatio)+" [1].moduleSquare="+(r.length>1&&r[1].moduleSquare),1,"brown"),r.length<2)return e.logger.none(e["Format[ContentRoll]"]+"._getModuleVisibility() values.length="+r.length+" RETURN "+r[0],1,"brown"),r[0];var i=r.filter((function(t){return t.intersectionRatio}));if(e.logger.none(e["Format[ContentRoll]"]+"._getModuleVisibility() positiveRatios.length="+i.length,1,"brown"),t<3&&!r[0].intersectionRatio&&r[1].intersectionRatio&&!r[1].moduleSquare)return e.logger.log(e["Format[ContentRoll]"]+"._getModuleVisibility() RECURSION",1,"brown"),e._getModuleVisibility(t+1);var o=i.reduce((function(t,e){return!t||e.intersectionRatio>t.intersectionRatio?e:t}),null);return i.length?o:r[0]}))},o._onAdSizeChange=function(){this.logger.trace(this["Format[ContentRoll]"]+" @AdSizeChange"),this._updateModuleNodeSize()},o._resetObservableNodes=function(){this.logger.trace(this["Format[ContentRoll]"]+".resetObservableNodes()) this._tempObservableModuleNode="+this._tempObservableModuleNode+" this.watchVisibility="+this.watchVisibility),this.watchVisibility?(this._switchOffObservableAdvancedNode(),this._switchOffObservableCheckingToModuleNode(),this._switchOnObservableCheckingToModuleNode()):this._tempObservableModuleNode&&(this._switchOffObservableCheckingToModuleNode(),this._switchOffObservableAdvancedNode(),this._switchOnObservableAdvancedNode()),window.IntersectionObserver||this._updateModuleState()},o._switchOffAllObserves=function(){this.watchVisibility?(this._switchOffObservableAdvancedNode(),this._switchOffObservableCheckingToModuleNode()):this._tempObservableModuleNode&&(this._switchOffObservableCheckingToModuleNode(),this._switchOffObservableAdvancedNode())},o._switchOffObservableAdvancedNode=function(){this.logger.trace(this["Format[ContentRoll]"]+".switchOffObservableAdvancedNode()"),this._watchTempObservableModuleNodeVisibility&&this._watchTempObservableModuleNodeVisibility.disconnect&&this._watchTempObservableModuleNodeVisibility.disconnect(),this._tempObservableModuleNode&&(this._tempObservableModuleNode.remove(),this._tempObservableModuleNode=null),this._watchTempObservableModuleNodeVisibility=null},o._getNodeForObservableChecking=function(){var t=this.moduleNode,e=this.options.moduleAPI,r=e.getVideoSlot,i=e.getControlNode;return r()||i("vpaidSlot")||t},o._switchOnObservableCheckingToModuleNode=function(){var t=this.scrollNode,e=this.options,r=e.showObservableNode,i=e.doNotWatchVisibility;if(this.logger.trace(this["Format[ContentRoll]"]+"._switchOnObservableCheckingToModuleNode()"),!this.watchVisibility&&!i){var o=this._getNodeForObservableChecking();!0===r&&(Object(m.c)(o,{outlineWidth:"1px",outlineColor:"green",outlineStyle:"solid"}),this.logger.none("._switchOnObservableCheckingToModuleNode() showGrid")),this.watchVisibility=Object(g.y)(o,{threshold:this._getWatchVisibilityThreshold(),registerHandle:function(e){var r="scroll";return t&&t.addEventListener(r,e),{handler:e,event:r,scrollNode:t}}},this._checkModuleState.bind(this)),r&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(ot.bind(this,o),1))}},o._switchOffObservableCheckingToModuleNode=function(){var t=this.watchVisibility,e=this.moduleNode,r=this.options.showObservableNode;t&&(!0===r&&Object(m.c)(e,{outlineWidth:"0",outlineColor:"none",outlineStyle:"none"}),t&&t.disconnect&&t.disconnect(),this.watchVisibility=null)},o.correctAdSize=function(t,e){return this._updateStrategy.correctAdSize(t,e)},o.getModuleNode=function(){return this.moduleNode},o.toString=function(){return z},o.getBaseName=function(){return H.toLowerCase()},i}(p);function X(){this._adHasBeenLoaded&&(this.logger.trace(this["Format[ContentRoll]"]+" @resize"),this._updateModuleNodeSize(),this._updateModuleSize())}function J(t){var e=this,r=t.vpaid;if(!r){var i,o,n=null==this||null===(i=this.options)||void 0===i||null===(o=i.moduleAPI)||void 0===o?void 0:o.getVpaid;r=n&&n()}(r&&r.getFormatOptions&&r.getFormatOptions()||Promise.resolve({})).then((function(t){return t&&e.updateOptions(t),!0})).then((function(){var t=(e.options||{}).setSizeByMedia;if(Object(g.u)(t)){var i=r&&r.getMediaInfo();if(!i)return;i.then((function(r){var i=r||{},o=i.width,n=i.height;if(o&&n&&(!e._updateStrategy||!(e._updateStrategy instanceof V))){var a=e.options,s=a.forceEnableVerticalContent,l=a.moduleAPI,d={width:o,height:n,forceEnableVerticalContent:s,showObservableNode:a.showObservableNode,expandingDuration:a.expandingDuration,logger:e.logger,API:{moduleAPI:l,getWidthNode:e._getWidthNode.bind(e),getModuleNodeSize:it.bind(e),isAdHasBeenStarted:function(){return e._adHasBeenStarted},getModuleNode:function(){return e.moduleNode},getOptions:function(){return L({},e.options)}}};e._updateStrategy=new V(d),e._updateModuleSize(),e._updateModuleNodeSize()||e._resetObservableNodes(),e.logger.log(e["Format[ContentRoll]"]+" onVPAIDCreated() call trigger('vn_FormatChanged') setSizeByMedia="+t);var c=(l||{}).trigger;c&&c("vn_FormatChanged")}}))}else{e.logger.log(e["Format[ContentRoll]"]+" onVPAIDCreated() setSizeByMedia="+t);var o=e._updateStrategy;if(o){var n=ut.call(e);n&&o.setForceHeight(n)&&e._updateModuleSize()}}}))}function Q(){var t=this.options.moduleAPI,e=t.inState,r=t.pauseAd,i=document.visibilityState;this.logger.trace(this["Format[ContentRoll]"]+" @visibilitychange ("+i+")",2),"hidden"===i?e&&e("playing")&&r&&r({invoker:this,method:"onVisibilityChange"}):this._updateModuleState()}function Y(){this.logger.trace(this["Format[ContentRoll]"]+" @AdLoaded",2);var t=this.moduleNode,e=this.options,r=e.expandOnAdLoaded,i=e.expandingDuration,o=e.doNotWatchVisibility;ht.call(this,"AdLoaded","onAdLoadedHandler"),this._adHasBeenLoaded=!0,this._addDOMEventListener(window,"resize",X.bind(this)),this._addDOMEventListener(document,"visibilitychange",Q.bind(this),!1),i>0&&Object(m.c)(t,{transitionProperty:"width, height",transitionDuration:i+"ms",transitionTimingFunction:"ease-out"}),o||(r?(this._switchOnObservableCheckingToModuleNode(),this._updateModuleSize(),this._updateModuleNodeSize(),this._updateModuleState()):(this._updateModuleSize(),this._switchOnObservableAdvancedNode()))}function Z(){var t=this;this.logger.trace(this["Format[ContentRoll]"]+". @vn_VideoSlotRemoved",2,"pink"),setTimeout((function(){return t._resetObservableNodes()}))}function K(t){var e=this;void 0===t&&(t={});var r=this._adVideoWasStarted,i=this.options.moduleAPI,o=i.getIndents,n=i.addVPAIDEventListener,a=i.removeVPAIDEventListener,s="";try{s=t&&JSON.stringify(t,null,2)}catch(t){}this.logger.trace(this["Format[ContentRoll]"]+"  q@slotSizeChanged forceSize="+s+" _adVideoWasStarted="+r,2),o().paddingTop||this.updateControlsLayout(0,!0),void 0!==t.height&&(this.forceHeight=t.height),void 0!==t.width&&(this.forceWidth=t.width),!0!==t.shouldNotResize&&(!0===r?(this.logger.trace(this["Format[ContentRoll]"]+" @slotSizeChanged invoke onResize() _adVideoWasStarted="+r,2),X.call(this)):this._AdVideoStartResizeHandler||(this._AdVideoStartResizeHandler=n("AdVideoStart",(function(){e.logger.trace(e["Format[ContentRoll]"]+" @slotSizeChanged awaited @AdVideoStart invoke onResize() _adVideoWasStarted="+r,2),X.call(e),a("AdVideoStart",e._AdVideoStartResizeHandler,e),e._AdVideoStartResizeHandler=null}),this)))}function $(){this.logger.trace(this["Format[ContentRoll]"]+" @AdStarted",2),this._adHasBeenStarted=!0,ht.call(this,"AdStarted","onAdStartedHandler"),this._updateModuleSize(),this._updateModuleNodeSize(),this._addPlayerExpandedClass(),this._updateModuleState()}function tt(){var t=this,e=this.moduleNode,r=this.options,i=r.playerPlaybackClass,o=r.expandingDuration,n=r.moduleAPI.inState;!n||n("started")?(this.logger.trace(this["Format[ContentRoll]"]+" @AdVideoStart",2),ht.call(this,"AdVideoStart","onAdVideoStartHandler"),i&&e.classList.add(i),setTimeout((function(){t._updateModuleNodeSize(),t._updateModuleState()}),o)):!this._adVideoWasStarted&&(this._adVideoWasStarted=n&&n("playing"))}function et(){var t=this,e=(this.options||{}).destroyTimeout;this.logger.trace(this["Format[ContentRoll]"]+" @AdDestroyed. "+this["Format[ContentRoll]"]+"._destroy() will be called after "+e+" ms",2),this._closeModule(),setTimeout((function(){return t._destroy()}),e)}function rt(){var t=this,e=this.moduleNode,r=this.scrollNode;if(!window.IntersectionObserver&&window.MutationObserver){var i=function(t){for(t=t&&t.parentElement;;t=t.parentElement){if(!t)return null;if(s(t))return t}}(e);if(i){this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() can not use IntersectionObserver, but invisible parent block was found and we use MutationObserver to catch the moment when it becomes visible.");var o=new MutationObserver((function(){s(i)||(o.disconnect(),setTimeout(a.bind(t),1))}));o.observe(i,{attributes:!0})}else this.logger.warn(this["Format[ContentRoll]"]+".initVisibleWatcher() can not use IntersectionObserver and invisible parent block was not found")}this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() watch module visibility.");var n=this._watchModuleNodeNodeVisibility=Object(g.y)(e,{threshold:[.1,1],registerHandle:function(e){var i="scroll";return r&&r.addEventListener(i,e),{handler:e,event:i,scrollNode:t.scrollNode}}},(function(e){var r=e.intersectionRatio,i=e.boundingClientRect;r>0&&(!i||i.right-i.left>0)&&(n&&n.disconnect&&n.disconnect(),setTimeout(a.bind(t),1))}));function a(){var t=this,r=this.options.moduleAPI.getControlNode;if(e.clientWidth){this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() module is visible now. Changing its size",2,"green");var i=r&&r("wrapper"),o=(i&&Object(g.i)(i)||{}).paddingTop;this.updateControlsLayout(o||25,!0),this._updateModuleSize(),this._updateModuleNodeSize(!0),this._tempObservableModuleNode&&(this._switchOffObservableAdvancedNode(),this._switchOnObservableAdvancedNode()),this._getModuleVisibility().then((function(e){e.intersectionRatio&&setTimeout((function(){t._updateModuleState()}),100)}))}else this._addTimeout("watchModuleNodeNodeVisibilityTimerId",a.bind(this),100)}function s(t){var e=getComputedStyle(t)||{};return t.hidden||"none"===e.display||"hidden"===e.visibility}}function it(){var t=this.forceHeight,e=this.moduleNode,r=this.options,i=r.forceEnableVerticalContent,o=r.moduleAPI,n=o.getAdAspectRatio,a=o.getAdWidth,s=n&&n(),l=e.clientWidth||a();return{width:l,height:t||s&&l&&l*(!b.h&&s>1&&!i?9/16:s)}}function ot(t){if(Object(m.p)(t)&&(this.logger.none(this["Format[ContentRoll]"]+".showGrid()"),!this._moduleWasClosed)){var e=t.getBoundingClientRect();if(e.height){nt.call(this);var r=this._startFactor,i=this._stopFactor,o=this.options.moduleAPI,n=o.getMainModuleId,a=o.getControlNode,s=o.getVideoSlot,l=0,d=0,c=a("container"),u=s();if(t===c||t===u){var h=a("iframe");if(h){var p=h.getBoundingClientRect();l=p.top,d=p.left}}var f=n&&n(),v=2147483647;if(!this.grid||!this.grid.length){var b={height:"1px",borderTopWidth:"1px",position:"absolute",pointerEvents:"none",zIndex:v};this.grid=[];var y=e.height,A=Object(m.b)(window.document.body,"div",L({},b,{height:y,borderTopColor:"yellow",borderTopStyle:"dashed"}));A.className="vn-grid-frame vn-module__"+f,this.grid.push({pos:0,line:A});for(var O=.1;O<1;O=(100*(O+.1)^0)/100)if(O!==r&&O!==i){var w=Object(m.b)(window.document.body,"div",L({},b,{borderTopColor:"yellow",borderTopStyle:.5===O?"dashed":"dotted"}));w.className="vn-grid-"+O+" vn-module__"+f,this.grid.push({pos:O,line:w})}if(r){var _=Object(m.b)(window.document.body,"div",L({},b,{borderTopColor:"red",borderTopStyle:"solid",zIndex:v+1}));_.className="vn-grid-start-factor-"+r+" vn-module__"+f,this.grid.push({pos:r,line:_})}if(i){var S=Object(m.b)(window.document.body,"div",L({},b,{borderTopColor:"pink",borderTopStyle:"dashed",zIndex:v+2}));S.className="vn-grid-stop-factor-"+i+" vn-module__"+f,this.grid.push({pos:i,line:S})}}var P=this.grid,C=e.width,j=e.height,E="relative"===getComputedStyle(window.document.body).position?Object(g.i)(window.document.body):{marginLeft:0,marginTop:0,borderTopWidth:0,borderLeftWidth:0},D=E.marginLeft,I=E.marginTop,T=E.borderTopWidth,k=E.borderLeftWidth,V=window.document.documentElement.getBoundingClientRect();this.logger.none(this["Format[ContentRoll]"]+".showGrid() drawing...");for(var R=0;R<P.length;R++){var M=P[R],x=M.pos,N=M.line;N&&Object(m.c)(N,{top:Object(g.t)(e.top-V.top-I-T+x*j+l),left:Object(g.t)(e.left-V.left-D-k+d),width:Object(g.t)(C)})}}}}function nt(){var t=this.grid;if(t)for(this.logger.none(this["Format[ContentRoll]"]+".clearGrid()");t&&t.length;){var e=t.pop();if(!e)return;var r=e.line;Object(m.t)(r)}}function at(){var t=this.moduleNode,e=this.options.showObservableNode;if(!t)return null;var r=lt.call(this);return r&&r.element?(e&&(r.element.style.backgroundColor="pink"),this.logger.trace(this["Format[ContentRoll]"]+"._closeModule() markTop = "+r.top+" markBottom = "+r.bottom)):this.logger.trace(this["Format[ContentRoll]"]+"._closeModule() correction position: mark element not found",1,"#d2691e"),r}function st(t,e){var r=this;void 0===e&&(e=10),setTimeout((function(){var i=(r.moduleNode||{}).clientHeight;if(r.logger.trace(r["Format[ContentRoll]"]+".attemptCompensation() counter="+e),!e&&i)r.logger.trace(r["Format[ContentRoll]"]+".attemptCompensation() not found moment for compensation");else if(e&&i)st.call(r,t,e-1);else{var o=t.top,n=t.bottom,a=t.element,s=o?a.getBoundingClientRect().top-o:n?a.getBoundingClientRect().bottom-n:0;s&&window.scrollBy(0,s),r.logger.trace(r["Format[ContentRoll]"]+".attemptCompensation() compensation="+s+" counter="+e)}}),20)}function lt(){for(var t=this.moduleNode.getBoundingClientRect().bottom,e=document.documentElement,r=e.clientWidth,i=e.clientHeight,o=r/10,n=(i-t)/10,a=o;a<r-o;a+=o)for(var s=t+5;s<i;s+=n){var l=dt(t,document.elementFromPoint(a,s));if(l)return l}return!1}function dt(t,e){if(!e)return null;var r=document.documentElement.clientHeight,i=(getComputedStyle(e)||{}).position;if("absolute"===i||"fixed"===i)return null;var o=e.getBoundingClientRect(),n=o.top,a=o.bottom;return n>0&&n>t&&n<r?{element:e,top:n}:a>0&&a>t&&a<r?{element:e,bottom:a}:null}function ct(t){void 0===t&&(t={});var e=Object(w.h)(Object(g.j)(window,document))||{},r=e.expandOnAdLoaded,i=e.shouldStart,o=e.showObservableNode,n=e.expandingDuration;return void 0!==n&&(t.expandingDuration=n),o&&(t.showObservableNode=Object(g.u)(o)),i&&i.length&&(t.shouldStart=i),r&&(t.expandOnAdLoaded=Object(g.u)(r)),t}function ut(){var t=this._maxHeight;if(t){var e=this.getSlotSize(),r=e.width,i=e.height;if(r){var o=Object(g.n)(t,r);if(o<i)return o}}return null}function ht(t,e){var r=this[e],i=(this.options.moduleAPI||{}).removeVPAIDEventListener;i&&r&&(i(t,r,this),this[e]=null)}function pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ft="Format[ContinuousRoll]",vt={maxSegments:-1,playerSelectorPercent:"0%"},mt=0,bt=0,yt=function(t){var e,r;function i(e,r){var i,o,n=r&&r.ancestor&&r.ancestor+":"+ft||"Module::Format[ContinuousRoll]",s=r&&r.moduleAPI&&r.moduleAPI.logger||a.a;return((null==s||null===(i=s.getChildWriter)||void 0===i?void 0:i.call(s,ft))||s).trace(n+".constructor()"),o=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},vt,{MODULE_ID:ft},r,{ancestor:n}))||this,o["Format[ContinuousRoll]"]=n,o.slotPlaceholders=[],1!==o.options.maxSegments&&o._initSlotPlaceholders(),o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._vpaidInitAd=function(){this.logger.trace(this["Format[ContinuousRoll]"]+".vpaidInitAd()");var e=(this.options.moduleAPI||{}).addVPAIDEventListener,r=t.prototype._vpaidInitAd.call(this);return e("AdLoaded",wt.bind(this),this),e("AdStarted",Ot.bind(this),this),e("AdVideoComplete",At.bind(this),this),r},o._destroy=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._destroy()");var e=this._reachInventoryFactory;e&&e.destroy&&e.destroy(),t.prototype._destroy.call(this)},o.getReachInventoryFactory=function(){var t=this,e=this._reachInventoryFactory,r=this.scrollNode;if(this.options.doNotWatchVisibility)return null;if(e)return e;var i=this.slotPlaceholders.map((function(e){return t._createReachInventoryFactory(r,e)}));return this._reachInventoryFactory={id:"vn-visible-inventory-marks-group_"+this+"_"+mt++,waiterCreator:function(){return Promise.race(i.map((function(t){return t.waiterCreator()})))},destroy:function(){return i.forEach((function(t){t.destroy&&t.destroy()}))},markNode:""}},o._updateModulePosition=function(){this.logger.none(this["Format[ContinuousRoll]"]+".updateModulePosition()");var t=this._findNearestSlotPlaceholder();this._nearestSlotPlaceholder!==t&&(this._nearestSlotPlaceholder=t,this.trigger("NearestSlotPlaceholderChanged")),t&&this._updateModulePositionCoordinates(t)},o._updateModulePositionCoordinates=function(t){var e=this.moduleNode,r=Object(m.i)(t,e),i=r.top,o=r.left;Object(m.c)(e,{position:"absolute",top:Object(g.t)(i+2),left:Object(g.t)(o),width:Object(g.t)(t.clientWidth),visibility:""});var n=Object(g.i)(e).outsideHeight;Object(m.c)(t,{height:Object(g.t)(n)})},o._findNearestSlotPlaceholder=function(){var t=window.innerHeight/2;return this.slotPlaceholders.reduce((function(e,r){var i=r.getBoundingClientRect(),o=i.top,n=i.height,a=o+n/2,s=Math.abs(a-t);return n>0&&s<e.distance?{distance:s,slotPlaceholder:r}:e}),{distance:1/0,slotPlaceholder:null}).slotPlaceholder},o._getModuleVisibility=function(){var t=this._findNearestSlotPlaceholder();return Object(g.o)(t)},o._initSlotPlaceholders=function(){var t,e=this,r=this.options,i=r.showObservableNode,o=r.playerAfter,n=r.playerElement,a=r.minDistance,s=r.maxSegments,l=r.lookupNode,d=window,c=d.scrollY,u=d.innerHeight,h=l||document.body,p=Object(m.p)(n)?[n]:Array.from(Object(m.l)(n,h)),f=s<0?1/0:s;if((t=this.slotPlaceholders).push.apply(t,p.slice(0,f)),(f-=this.slotPlaceholders.length)&&o){var v=this.slotPlaceholders[this.slotPlaceholders.length-1],b=u*a,y=v?v.getBoundingClientRect().top+c+b:u;Array.from(Object(m.l)(o,h)).some((function(t){if(t.getBoundingClientRect().top+c>y){var r=document.createElement("div");f-=1,t.parentNode.insertBefore(e._addDOMNode(r),t.nextSibling),e.slotPlaceholders.push(r),y+=b}return!f}))}var A=Pt.call(this).visible,O=(A&&A.length&&A[0]).previousElementSibling,w=O&&O.getBoundingClientRect().top;Object(m.c)(this.slotPlaceholders,{boxSizing:"border-box",paddingTop:Object(g.t)(2),paddingBottom:Object(g.t)(2),backgroundColor:"transparent"}),O&&window.scrollBy(0,O.getBoundingClientRect().top-w),i&&Object(m.c)(this.slotPlaceholders,{outlineWidth:"1px",outlineColor:"pink",outlineStyle:"solid"}),this.slotPlaceholders.forEach((function(t){return t.className="vn-placeholder"}))},o._closeModule=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._closeModule()"),t.prototype._closeModule.call(this);var e={height:0,paddingTop:0,paddingBottom:0},r=Pt.call(this),i=r.above,o=r.below,n=r.visible;setTimeout((function(){if(Object(m.c)([].concat(o,n),e),n&&n.length){var t=(n&&n.length&&n[0]).previousElementSibling,r=t&&t.getBoundingClientRect().top;Object(m.c)(i,e),r&&window.scrollBy(0,t.getBoundingClientRect().top-r)}}),1)},o._closeRestOfSlotPlaceholders=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._closeRestOfSlotPlaceholders()");var t=window.innerHeight;this.slotPlaceholders.forEach((function(e){var r=e.getBoundingClientRect().top;t-r<0&&Object(m.c)(e,{height:0,paddingTop:0,paddingBottom:0})}))},o._updateModuleNodeSize=function(e){void 0===e&&(e=!1);var r=t.prototype._updateModuleNodeSize.call(this,e),i=r||{},o=i.width,n=i.height;if(o&&n){var a={width:Object(g.t)(o),height:Object(g.t)(n+2+2)},s=Pt.call(this),l=s.above,d=s.below,c=s.visible;Object(m.c)([].concat(d,c),a);var u=l.map((function(t){return Object(g.i)(t).outsideHeight})).reduce((function(t,e){return t+e}),0);Object(m.c)(l,a);var h=l.map((function(t){return Object(g.i)(t).outsideHeight})).reduce((function(t,e){return t+e}),0),p=h-u;window.scrollBy(0,p)}return r},o._switchOnObservableAdvancedNode=function(){var t=this,e=this.slotPlaceholders,r=this.options.doNotWatchVisibility;if(!this._tempObservableModuleNode&&!r){var i=this._tempObservableModuleNode={items:[],remove:function(){return i.items.forEach((function(t){return Object(m.t)(t)}))}},o=this._watchTempObservableModuleNodeVisibility={items:[],disconnect:function(){return o.items.forEach((function(t){t.disconnect&&t.disconnect()}))}};e&&e.forEach((function(e){var r=t._createObservableAdvancedNode(),n=r.node,a=r.watcher,s=Object(m.h)(e),l=s.top,d=s.left;n.style.top=Object(g.t)(l+2),n.style.left=Object(g.t)(d),n&&window.document.body.appendChild(n);var c=t._addDOMNode(n);n.className=("vn-start-mark_"+t+"_"+bt++).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),i.items.push(c),o.items.push(a)}))}},o.getModuleVisibility=function(){return this._watchTempObservableModuleNodeVisibility&&this._tempObservableModuleNode?Promise.race(this._tempObservableModuleNode.items.map((function(t){return Object(g.o)(t)}))):Object(g.o)(this.moduleNode)},o.toString=function(){return ft},o.getBaseName=function(){return"ContinuousRoll".toLowerCase()},i}(G);function At(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdVideoComplete. Closing all placeHolders that positioned lower in the document",2),this._closeRestOfSlotPlaceholders()}function Ot(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdStarted",2),this._updateModulePosition()}function wt(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdLoaded",2);var t=this.scrollNode;this._addDOMEventListener(t,"scroll",_t.bind(this)),this._addDOMEventListener(window,"resize",St.bind(this))}function _t(){this.logger.none(this["Format[ContinuousRoll]"]+" @scroll"),this._updateModulePosition()}function St(){this.logger.trace(this["Format[ContinuousRoll]"]+" @resize"),this._updateModulePosition()}function Pt(){var t=[],e=[],r=[],i=window.innerHeight;return this.slotPlaceholders.forEach((function(o){var n=o.getBoundingClientRect(),a=n.top,s=n.bottom<0,l=a>i;s&&t.push(o),l&&r.push(o),s||l||e.push(o)})),{above:t,visible:e,below:r}}var Ct=r(11);function jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var It="FlyRoll",Tt="Format[FlyRoll]",kt={playerEmbeddedClass:"vn-embedded",playerFloatingClass:"vn-floating",zIndex:null,playerDesktopFactor:.6,playerMobileFactor:.6,playerDesktopStartFactor:.5,playerDesktopStopFactor:.5,playerMobileStartFactor:.5,playerMobileStopFactor:.5,floatingWidth:"200px",floatingBottom:"2%",floatingRight:"3%",flyExpandingDuration:0,flyExpandingStartOpacity:.05,switchToEmbeddedModeAtTheEnd:!0,flyBelowOnly:!1},Vt=0,Rt=1,Mt=!1,xt=0,Nt=function(t){var e,r;function i(e,r){var i,o,n;void 0===r&&(r={});var s=r&&r.ancestor&&r.ancestor+":"+Tt||"::Format[FlyRoll]";if(Mt)throw Error(s+".Format instance already active on the page");var l=r&&r.moduleAPI&&r.moduleAPI.logger||a.a,d=(null==l||null===(i=l.getChildWriter)||void 0===i?void 0:i.call(l,Tt))||l,c=r.canFlyModeStart;r.canFlyModeStart=Object(g.u)(c);var u={};r.canFlyModeStart&&(u.doNotWatchVisibility=!1,u.expandOnAdLoaded=!0),d.trace(s+".constructor()"),n=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},kt,{},r,{},u,{ancestor:s}))||this,n._fakeVideoSlot=null,n.options.flyBelowOnly=Object(g.u)(n.options.flyBelowOnly),n["Format[FlyRoll]"]=s,n._setInstanceEIsExists(),n._replaceModuleInnerNode();var h=n.options,p=h.floatingElement,f=h.floatingWidth,v=h.floatingTop,y=h.floatingRight,A=h.floatingBottom,O=h.floatingLeft,w=h.floatingTranslateX,_=void 0===w?0:w,S=h.floatingTranslateY,P=void 0===S?0:S,C=h.flyExpandingDuration,j=h.flyExpandingStartOpacity;n._mode=Vt,n.traceLogEnabled=Object(g.u)(Object(Ct.b)("flyroll.trace"));var E={position:"fixed",zIndex:2147483646,backgroundColor:"white",boxShadow:"0 0 10px black",width:Object(g.t)(f),top:Object(g.t)(v),right:Object(g.t)(y),bottom:Object(g.t)(A),left:Object(g.t)(O),transitionProperty:"none",transitionDuration:0,opacity:C?j:1,transform:"translate("+Object(g.t)(_)+", "+Object(g.t)(P)+")"},D={position:"absolute",textAlign:"center",width:"100%",zIndex:Dt(n).options.zIndex,backgroundColor:"",top:0,left:0,transform:"translate(0, 0)",minWidth:"auto",maxWidth:"auto",transitionProperty:"none",transitionDuration:0,boxShadow:"none",opacity:1};n._style=((o={})[Vt]=n._updateEmbeddedBlockStyle(D),o[Rt]=n._updateFlyBlockStyle(E),o);var I=Object(m.k)(p);n._strictFloatingWidth=parseFloat(f)||null,n._floatingWidthInPercents="%"===(""+f).trim().substr(-1)&&parseFloat(f)||null,(n._floatingPositionNode=I||n._floatingPositionNode)&&n._addDOMEventListener(window,"resize",(function(){n._updateSlotSizeAndPosition()}));var T=Dt(n).options,k=T.playerDesktopFactor,V=T.playerMobileFactor,R=T.playerDesktopStartFactor,M=T.playerDesktopStopFactor,x=T.playerMobileStartFactor,N=T.playerMobileStopFactor;return n._playerFactor=b.h?V:k,n._playerStartFactor=b.h?x:R,n._playerStopFactor=b.h?N:M,n._updateSlotSizeAndPosition(),n}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._updateEmbeddedBlockStyle=function(t){return t||{}},o._updateFlyBlockStyle=function(t){return t||{}},o._replaceModuleInnerNode=function(){},o.isFloatingMode=function(){return this._mode===Rt},o._initDOM=function(){t.prototype._initDOM.call(this);var e=this.moduleNode,r=this.insideIframe,i=this.options,o=i.floatingElement,n=i.showObservableNode;if(r)throw Error(this["Format[FlyRoll]"]+"._initDOM(). Unable create flyRoll inside iframe");var a=o&&Object(m.k)(o);this._floatingPositionNode=a||function(){return this._addDOMNode(Object(m.b)(document.body,"div",{position:"fixed",zIndex:-1,top:0,bottom:0,left:0,right:0}))}.call(this),!0===n&&Object(m.c)(this._floatingPositionNode,{outlineWidth:"1px",outlineColor:"magenta",outlineStyle:"solid"}),Object(m.c)(e,{zIndex:null}),this._updateSlotSizeAndPosition()},o._vpaidInitAd=function(){var e=this;this.logger.trace(this["Format[FlyRoll]"]+"._vpaidInitAd()");var r=t.prototype._vpaidInitAd.call(this);this.isFloatingMode()||this._updateFakeVideoSlot();var i=this.options.canFlyModeStart,o=this.options.moduleAPI,n=o.addVPAIDEventListener;!!(0,o.AdVideoStartWasHappenedAtLeastOnce)()&&(i=this.options.canFlyModeStart=!0,this.options.expandOnAdLoaded=!0),n&&(ht.call(this,"AdLoaded","onAdLoadedHandlerFlyRollBase_2"),this.onAdLoadedHandlerFlyRollBase_2=n("AdLoaded",(function(){ht.call(e,"AdLoaded","onAdLoadedHandlerFlyRollBase_2"),e._updateSlotClass(),e.isFloatingMode()||(e._updateModuleSize(),e._updateModuleNodeSize())}),this)),i&&n&&(ht.call(this,"AdLoaded","onAdLoadedHandlerFlyRollBase"),this.onAdLoadedHandlerFlyRollBase=n("AdLoaded",(function(){ht.call(e,"AdLoaded","onAdLoadedHandlerFlyRollBase"),e.logger.log(e["Format[FlyRoll]"]+" @AdLoaded canFlyModeStart!"),Bt.call(e)}),this));var a=function(){var t=(e.options||{}).switchToEmbeddedModeAtTheEnd;(void 0===t||t)&&e.isFloatingMode()&&e._setMode(Vt)};return n&&(ht.call(this,"AdVideoComplete","onAdVideoCompleteHandlerFlyRollBase"),this.onAdVideoCompleteHandlerFlyRollBase=n("AdVideoComplete",a,this),ht.call(this,"AdSkipped","onAdSkippedHandlerFlyRollBase"),this.onAdSkippedHandlerFlyRollBase=n("AdSkipped",a,this),ht.call(this,"AdVideoStart","onAdVideoStartHandlerFlyRollBase"),this.onAdVideoStartHandlerFlyRollBase=n("AdVideoStart",(function(){ht.call(e,"AdVideoStart","onAdVideoStartHandlerFlyRollBase"),e.trigger("vnFormatStateChanged",{src:Tt,isFloating:e._mode===Rt})}),this)),r},o._getNodeForObservableChecking=function(){return this._fakeVideoSlot||this.moduleNode},o._updateModuleNodeSize=function(e){void 0===e&&(e=!1);var r=this._floatingModeWasExists,i=this.options.canFlyModeStart;if(!this.isFloatingMode())if(i&&!r)t.prototype._updateModuleNodeSize.call(this,!0);else{var o=(t.prototype._updateModuleNodeSize.call(this,e||i&&r)||{}).height;o&&this._updateSlotSizeAndPosition(o)}},o._applyModuleStateCheckPausedAndPlaying=function(e){var r=e.intersectionRatio,i=e.moduleSquare,o=e.boundingClientRect,n=this.traceLogEnabled,a=this._playerStartFactor,s=this._playerStopFactor,l=this._playerFactor,d=this._floatingModeWasExists,c=this._moduleWasClosed,u=this.moduleNode,h=this.options,p=h.flyBelowOnly,f=h.canFlyModeStart,v=h.moduleAPI,m=v.inState,b=v.getState,y=v.resumeAd,A=v.pauseAd;if(!c){var O=this.isFloatingMode();O||(this.maxEmbeddedIntersectionRatio=Math.max(r,this.lastEmbeddedIntersectionRatio||0));var w=b(),_=m&&!m("loaded")||f,S=m&&m(["paused","pausing"]),P=m&&m("playing"),C=m&&m("afterplay"),j=u&&u.getBoundingClientRect()||{},E=j.top,D=j.bottom,I=j.width;if(n&&this.logger.trace(this["Format[FlyRoll]"]+"._applyModuleStateCheckPausedAndPlaying() !!!! intersectionRatio="+r+" moduleNodeWidth="+I+" boundingClientRect.width="+o.width+" moduleSquare="+i+" _floatingModeWasExists="+d+" floating="+O+" _playerFactor="+l+" state="+w+" playing="+P+" paused="+S+" started="+_+" this._adHasBeenStarted="+this._adHasBeenStarted+" maxEmbeddedIntersectionRatio="+this.maxEmbeddedIntersectionRatio,1),!O&&p){var T=document.documentElement.clientHeight,k=D>=T&&E<=T&&E>0||!r&&D>=T&&E>=T;if(n&&this.logger.trace(this["Format[FlyRoll]"]+". forbiddenSetFlyMode="+k+" top="+E+" bottom="+D+" clientHeight="+T+" intersectionRatio="+r+" floating="+O,2,"pink"),k)return void t.prototype._applyModuleStateCheckPausedAndPlaying.call(this,{intersectionRatio:r})}S&&(O||r>=a)&&y&&y(),!O&&P&&this.maxEmbeddedIntersectionRatio<s&&!d&&A&&A();var V=i&&!Object(g.q)(I,o.width,10),R=f||this.lastEmbeddedIntersectionRatio>=l||this.lastEmbeddedIntersectionRatio>=a&&r<this.lastEmbeddedIntersectionRatio||d;this.logger.none(this["Format[FlyRoll]"]+"._applyModuleStateCheckPausedAndPlaying()\nfloating="+O+"\neqModuleNode="+V+"\ncanSwitchMode="+R+"\n intersectionRatio="+r+"\n moduleNodeWidth="+I+"\n boundingClientRect.width="+o.width+"\n moduleSquare="+i+"\n _floatingModeWasExists="+d+"\n floating="+O+"\n _playerFactor="+l+"\n playing="+P+"\n paused="+S+"\n started="+_+"\n this._adHasBeenStarted="+this._adHasBeenStarted+"\n maxEmbeddedIntersectionRatio="+this.maxEmbeddedIntersectionRatio+"\n_playerStartFactor="+a,1),_&&O&&r>=l&&V?this._setMode(Vt):_&&!O&&!C&&r<l&&V&&R&&this._setMode(Rt),O||(this.lastEmbeddedIntersectionRatio=r),this.trigger("applyModuleStateCheckPausedAndPlaying")}},o._moduleResizeAd=function(e,r){var i=this.traceLogEnabled,o=this.options.moduleAPI,n=o.getIndents,a=o.saveAdParams,s=o.getSavedAdParams,l=o.inState,d=n&&n(),c=null==d.clientHeight;if(i&&this.logger.trace(this["Format[FlyRoll]"]+"._moduleResizeAd() mode="+this._mode),this._updateSlotClass(),this.isFloatingMode()){var u=this._mode,h=this._strictFloatingWidth,p=this._floatingWidthInPercents,f=this.moduleInnerNode,v=this.options.moduleAPI,b=v.resizeAd,y=v.setWrapperSize,A=v.getControlNode,O=v.AdVideoStartWasHappenedAtLeastOnce,w=d.borderTop,_=d.paddingTop,S=d.borderBottom,P=d.paddingBottom,C=d.marginTop,j=!!O(),E=this.getBaseName()+"_moduleResizeAd",D=s(E);if((c||!l(["loaded","starting","playing","pausing","paused"]))&&j)return void(Object(g.w)(D&&D[u],this.logger,"Format[FlyRoll] _moduleResizeAd().")||Ht.call(this,["AdVideoStart"],"_updateModuleState()"));var I=window.getComputedStyle(e),T=!p&&h||Math.round(e.clientWidth-parseFloat(I.paddingLeft)-parseFloat(I.paddingRight));p&&(i&&this.logger.trace(this["Format[FlyRoll]"]+" _moduleResizeAd() floatingWidth="+T*p/100+" moduleWidth="+T+"  _strictFloatingWidth="+h+" _floatingWidthInPercents="+p),T*=p/100);var k=Math.min(window.innerWidth,T),V=Math.min(window.innerHeight,Math.round(k*r));this.logger.log(this["Format[FlyRoll]"]+" _moduleResizeAd() width="+k+" height="+V);var R=Lt.call(this,k,V,e,r),M=R.width,x=R.height;M===k&&x===V||this.logger.log(this["Format[FlyRoll]"]+" _moduleResizeAd() after correction adWidth="+M+" adHeight="+x,1),D||(D={});var N=D[u]=[];b&&(N.push((function(){return b(M,x)})),b(M,x));var L=(x||0)+(w||0)+(S||0)+(_||0)+(P||0),F={width:Object(g.t)(M),height:Object(g.t)(L+(C||0))};Object(m.c)(f,F),N.push({node:f,moduleInnerStyles:F}),N.push((function(){return y(L)})),y(L);var W=(this.options||{}).setSizeByMedia;if(Object(g.u)(W)){var H=A("vpaidSlot");if(H){var z={position:"absolute",top:0,left:0,width:"100%",height:"100%",textAlign:"center"};Object(m.c)(H,z),N.push({node:H,styles:z})}}a(E,D)}else t.prototype._moduleResizeAd.call(this,e,r)},o._getTopLeftForEmbedded=function(){return{top:0,left:0}},o._updateSlotSizeAndPosition=function(t){void 0===t&&(t=null);var e=this._mode,r=this.moduleNode,i=this.options,o=i.forceEnableVerticalContent,n=i.flyExpandingDuration,s=i.moduleAPI,l=s.getIndents,d=s.getAdAspectRatio,c=s.AdVideoStartWasHappenedAtLeastOnce,u=s.inState,h=s.saveAdParams,p=s.getSavedAdParams,f=this.moduleInnerNode,v=this.traceLogEnabled;if(f&&null!=e){var y=l(),A=null==y.clientHeight,O=!!c();v&&this.logger.trace(this["Format[FlyRoll]"]+"._updateSlotSizeAndPosition() mode="+e+" wrapperNotFound="+A+" notFirstAd="+O);var w=this.getBaseName()+"_updateSlotSizeAndPosition",_=p(w)||{};if(!A&&u(["loaded","starting","playing","pausing","paused"])||!O){_||(_={});var S=_[e]=[];if(Object(m.c)(f,this._style[e]),this._mode===Vt){var P=t||y.outsideHeight,C=this._getTopLeftForEmbedded(),j=C.top,E=C.left,D=Object(g.i)(r),I=D.clientWidth,T=D.marginRight,k=D.marginLeft,V=r.style,R=V.marginLeftStr,M=V.marginRightStr,x=I+k+T-(parseFloat(R)||0)-(parseFloat(M)||0);f&&Object(m.c)(f,{top:Object(g.t)(j),left:Object(g.t)(E),visibility:""}),v&&this.logger.trace(this["Format[FlyRoll]"]+"._updateSlotSizeAndPosition() height="+P+" width="+x+" top="+j+" left="+E+" forceHeight="+t),void 0!==P&&f&&Object(m.c)(f,{height:Object(g.t)(P)}),void 0!==x&&f&&Object(m.c)(f,{width:Object(g.t)(x)})}else{var N=d&&d();!b.h&&N>1&&!o&&(N=9/16);var L=this._getWidthNode();this._moduleResizeAd(L,N),S.push(this._moduleResizeAd.bind(this,L,N));var F=Ft.call(this)||{};F&&Object(m.c)(f,F),n&&setTimeout((function(){return Object(m.c)(f,{transitionProperty:"opacity",transitionDuration:Object(g.s)(n),opacity:1})}),1)}var W=getComputedStyle(f),H=Object.keys(this._style[Vt]).concat("height").reduce((function(t,e){return t[e]=W[e],t}),{});S.push({node:f,styles:H}),h(w,_)}else Object(g.w)(_&&_[e],a.a,"Format[FlyRoll] _updateSlotSizeAndPosition() .")}},o._updateSlotClass=function(){var t=this._mode,e=this.options,r=e.playerEmbeddedClass,i=e.playerFloatingClass,o=e.moduleAPI.getControlNode,n=o&&o("slot");n&&(t===Rt?(n.classList.remove(r),n.classList.add(i)):(n.classList.remove(i),n.classList.add(r)))},o._getWidthNode=function(){var t=this._mode,e=this._floatingPositionNode,r=this.widthNode,i=this.options.moduleAPI.getControlNode;return(t===Rt?e:r)||i&&i("slot")},o._setMode=function(e){if(this.logger.trace(this["Format[FlyRoll]"]+"._setMode("+e+")",2),!this._moduleWasClosed){this.isFloatingMode()||this._updateFakeVideoSlot(),this._mode=e;var r=e===Rt;t.prototype._resetObservableNodes.call(this),this._updateModuleSize(),this._updateModuleNodeSize(),this._updateSlotSizeAndPosition(),r&&(this._floatingModeWasExists=!0),this._updateSlotClass(),this.trigger("vnFormatStateChanged",{src:Tt,isFloating:r})}},o._destroy=function(){this.logger.log(this["Format[FlyRoll]"]+"._destroy()"),this._resetInstanceEIsExists(),t.prototype._destroy.call(this),this.logger.log(this["Format[FlyRoll]"]+"._destroy() Destroyed")},o._resetInstanceEIsExists=function(){Mt===this&&(this.logger.log(this["Format[FlyRoll]"]+"._destroy() RESET _instanceIsExist",2),Mt=!1)},o._setInstanceEIsExists=function(){Mt||(this.logger.log(this["Format[FlyRoll]"]+".constructor SET _instanceIsExist",2),Mt=this)},o._createReachInventoryFactory=function(e,r){var i=this.traceLogEnabled,o=this.options,n=o.canFlyModeStart,a=o.moduleAPI.getMainModuleId;i&&this.logger.trace(this["Format[FlyRoll]"]+"._createReachInventoryFactory() canFlyModeStart="+n,2,"magenta");var s=a&&a();if(!n)return t.prototype._createReachInventoryFactory.call(this,e,r);return{id:("vn-visible-inventory-mark_"+this+"_"+xt+++" vn-module__"+s).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),waiterCreator:function(){return Promise.resolve()},moduleNode:r}},o._getWatchVisibilityThreshold=function(){var t=this._playerFactor,e=this._playerStartFactor,r=this._playerStopFactor,i=[];t>=0&&(i.push(t),t>.01&&i.push(t-.01),1-t>.01&&i.push(t+.01));return e>=0&&i.push(e),r!==e&&r>=0&&i.push(r),i.push(e),i.length&&(0!==t&&i.push(0),1!==t&&i.push(1)),i.sort()},o._closeModule=function(e){void 0===e&&(e={});var r=this.options.moduleAPI.getControlNode;this._resetInstanceEIsExists();var i=r&&r("slot");Object(m.c)(i,{display:"none"}),t.prototype._closeModule.call(this,e)},o._updateFakeVideoSlot=function(){var t=this._fakeVideoSlot,e=this.moduleNode,r=this.options,i=r.showObservableNode,o=r.moduleAPI.getControlNode,n=t;Object(m.p)(n)||(this._fakeVideoSlot=n=document.createElement("div"),Object(m.c)(n,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0}),e.insertBefore(n,e.firstElementChild),!0===i&&(Object(m.c)(this._floatingPositionNode,{outlineWidth:"1px",outlineColor:"lightpink",outlineStyle:"solid"}),n.classList="fakeVideoSlot"));var a=o&&o("vpaidSlot"),s=a&&Object(m.i)(a,n)||{};return Object(m.c)(n,{top:Object(g.t)(s.top||0)}),n},o.toString=function(){return Tt},o.getBaseName=function(){return It.toLowerCase()},i}(G);function Lt(t,e,r,i){var o=this.options,n=o.floatingMinHeight,a=o.floatingMaxHeight,s=o.floatingMinWidth,l=o.floatingMaxWidth,d=o.moduleAPI.getIndents,c=d&&d(),u=c.top+c.bottom,h=r.clientWidth,p=document.documentElement,g=p.clientHeight,f=p.clientWidth,v=Wt(l,h),m=Wt(s,h),b=Wt(a,g),y=Wt(n,g);function A(r){t=r,e=Math.round(t*i)}function O(r){e=r,t=Math.round(e/i)}return m&&t<m&&A(m),y&&e+u<y&&O(y-u),v&&t>v&&A(v),f&&t>f&&A(f),b&&e+u>b&&O(b-u),{width:t,height:e}}function Ft(){var t=this._style,e=this._floatingPositionNode,r=this.traceLogEnabled,i=this.options,o=i.floatingHCenter,n=i.floatingTop,a=i.floatingRight,s=i.floatingBottom,l=i.floatingLeft,d=i.moduleAPI,c=d.getAdHeight,u=d.getAdWidth,h=d.getIndents,p=c&&c(),f=u&&u();if(!(p&&f&&e&&t))return r&&this.logger.trace(this["Format[FlyRoll]"]+" one or more parameters is false: adHeight="+p+" adWidth="+f+" _floatingPositionNode="+e+" _style="+t,1,"pink"),null;var v=e.getBoundingClientRect(),m=v.width,b=v.height,y=v.left,A=v.top,O=h&&h()||{},w=O.top,_=O.outsideWidth,S=O.insideHeight;if(isNaN(w)||isNaN(_)||isNaN(S))return r&&this.logger.trace(this["Format[FlyRoll]"]+" parameters isNaN topPadding="+w+" flWidth="+_+" flHeight="+S,1,"pink"),null;var P=S+w,C="";if(o){var j=(m-_)/2;C+="translateX("+Object(g.t)(j)+") "}else l?C+="translateX("+Object(g.t)(l)+") ":a&&(C+="translateX(calc("+Object(g.t)(m)+" - "+Object(g.t)(a)+" - "+Object(g.t)(_)+")) ");return n?C+="translateY("+Object(g.t)(n)+") ":s&&(C+="translateY(calc("+Object(g.t)(b)+" - "+Object(g.t)(s)+" - "+Object(g.t)(P)+")) "),r&&this.logger.trace(this["Format[FlyRoll]"]+' calcFloatingWidthAndPosition() transform="'+C+'"\n width='+m+" flWidth="+_+" adWidth="+f+" top="+A+" left="+y+" adHeight="+p+" flHeight="+S),{width:Object(g.t)(_),top:Object(g.t)(A),left:Object(g.t)(y),transform:C}}function Wt(t,e){var r=Object(w.f)(t);return r&&r*e||+t}function Ht(t,e){var r=this,i=this.traceLogEnabled,o=this.options.moduleAPI,n=o.removeVPAIDEventListener,a=o.addVPAIDEventListener;if((0,o.inState)(["loaded","starting","playing"]))this._setMode(this._mode);else{var s=this.handlersForUpdateModuleState;s||(s=this.handlersForUpdateModuleState={}),i&&this.logger.trace(this["Format[FlyRoll]"]+".setHandlersForUpdateModuleState()"),t.forEach((function(t){s[t]||(s[t]&&n(t,s[t],r),s[t]=a(t,zt.bind(r,e+" @{eventName}"),r))}))}}function zt(t){var e=this,r=this.traceLogEnabled,i=this.options.moduleAPI.removeVPAIDEventListener,o=this.handlersForUpdateModuleState;Object.values(o||{}).forEach((function(t){var r=t[0],n=t[1];n&&(i(r,n,e),o[r]=null)})),r&&this.logger.trace(this["Format[FlyRoll]"]+"."+t+" Calls _setMode("+this._mode+")"),this._setMode(this._mode)}function Bt(){var t=this.options.moduleAPI,e=t.inState,r=t.resumeAd,i=t.startAd;this._mode=Rt;var o=this._addVPAIDEventListener(this,"applyModuleStateCheckPausedAndPlaying",function(){this._removeVPAIDEventListener(this,"applyModuleStateCheckPausedAndPlaying",o),this.isFloatingMode()&&(this._setMode(Rt),e(["paused","pausing"])?r():e("playing")||i())}.bind(this))}function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(r),!0).forEach((function(e){Gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xt="Format[FlyRollTop]",Jt={embeddedPosition:"absolute",zIndex:2147483646},Qt=function(t){var e,r;function i(e,r){var i,o=r&&r.ancestor&&r.ancestor+":"+Xt||"::Format[FlyRollTop]";return(i=t.call(this,e,qt({},Jt,{},r,{ancestor:o}))||this)["Format[FlyRollTop]"]=o,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._updateFlyBlockStyle=function(t){var e=(t||{}).width;return e&&e.endsWith("%")&&delete t.width,qt({},t,{right:0,bottom:0})},o._updateEmbeddedBlockStyle=function(t){return qt({},t,{position:"absolute",height:0,overflow:"hidden"})},o._replaceModuleInnerNode=function(){this.moduleInnerNode=Object(g.l)(window).document.body.appendChild(this.moduleInnerNode.parentElement.removeChild(this.moduleInnerNode))},o._getTopLeftForEmbedded=function(){return function(t){if(!t)return{top:0,left:0};var e=t.getBoundingClientRect(),r=document,i=r.body,o=r.documentElement,n=window.pageYOffset||o.scrollTop||i.scrollTop,a=window.pageXOffset||o.scrollLeft||i.scrollLeft,s=o.clientTop||i.clientTop||0,l=o.clientLeft||i.clientLeft||0,d=e.top+n-s,c=e.left+a-l;return{top:d,left:c}}(this.moduleNode)},o.toString=function(){return Xt},i}(Nt);function Yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Kt="Format[FlyRollAlwaysFly]",$t={embeddedPosition:"absolute",zIndex:2147483646,ignoreCreatePlayerElement:!0,canFlyModeStart:!0},te=function(t){var e,r;function i(e,r){var i,o=r&&r.ancestor&&r.ancestor+":"+Kt||"::Format[FlyRollAlwaysFly]";return i=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(r),!0).forEach((function(e){Zt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},$t,{},r,{ancestor:o}))||this,i["Format[FlyRollAlwaysFly]"]=o,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._getTopLeftForEmbedded=function(){return{top:0,left:0}},o._setMode=function(e){e===Rt&&(this._switchOffObservableAdvancedNode(),t.prototype._setMode.call(this,e))},o._updateFakeVideoSlot=function(){},o._updateModuleNodeSize=function(){},o._initDOM=function(){t.prototype._initDOM.call(this);var e=this.moduleNode;Object(m.p)(e)&&Object(m.c)(e,{height:0})},o.toString=function(){return Kt},i}(Qt);function ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(r),!0).forEach((function(e){ie(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ie(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oe="Format[FlyRollRegular]",ne={zIndex:null,embeddedPosition:"relative"},ae=function(t){var e,r;function i(e,r){var i,o=r&&r.ancestor&&r.ancestor+":"+oe||"::Format[FlyRollRegular]";return(i=t.call(this,e,re({},ne,{},r,{ancestor:o}))||this)["Format[FlyRollRegular]"]=o,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._updateEmbeddedBlockStyle=function(t){return re({},t,{position:"absolute"})},o._getTopLeftForEmbedded=function(){return{top:0,left:0}},o.toString=function(){return oe},i}(Nt),se={"Loading video...":" ...","Skip ad in {{x}} sec":"   {{x}} ","Skip ad in":' <div style="font-size: smaller"> </div>',"{{x}} sec":"{{x}} ","Going after":'<div style="font-size: smaller">  </div>',"Learn more":"",Advertisement:"","Watch video":" ","Watch video<br/>after ad":"</br> ","Pull to skip<br/>{{x}}":",<br/> <br/>{{x}}","Push to watch<br/>360 video":",  <br/>360- ","The ad will end in {{x}} sec":"   {{x}} ","Click to get Videonow debug":"    Videonow"},le={ru:se},de=!1,ce="en";function ue(){var t;try{t=(top.navigator.language||top.navigator.userLanguage).substr(0,2)}catch(e){t=(navigator.language||navigator.userLanguage).substr(0,2)}de=!0,le[t]&&(ce=t)}var he,pe=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(de||ue(),"en"===ce){if(String.raw)return String.raw(t,r);if(!le[ce]){var o=le[ce]={};Object.keys(se).forEach((function(t){o[t]=t}))}}var n=t.join(""),a=le[ce],s="";return Object.keys(a).forEach((function(t){s||t.replace(/{{x}}/g,"")!==n||(s=a[t],r&&r.forEach((function(t){s=s.replace(/{{x}}/g,t)})))})),s||String.raw(t,r)},ge=r(26),fe=r.n(ge),ve=r(27),me=r.n(ve),be=r(6);function ye(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["Pull to skip<br/>",""]);return ye=function(){return t},t}function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _e,Se,Pe,Ce,je="SlideRoll",Ee="Format[SlideRoll]",De=(null===a.a||void 0===a.a||null===(he=a.a.getChildWriter)||void 0===he?void 0:he.call(a.a,Ee))||a.a,Ie={playerElement:null,playerAfter:null,playerBefore:null,playerFactor:.5,closeFactor:.3,transitionDuration:0,expandOnAdLoaded:!1},Te={videoSlot:{boxShadow:"0 0 20px 5px rgba(0, 0, 0, 0.5)"},title:{top:"10px",left:"10px",padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},logo:{top:"5px",right:"5px",bottom:"auto",left:"auto"},play:null,skipAd:null,skipAdCountdown:{display:"none",position:"absolute",top:"auto",right:"auto",bottom:"5px",left:"50%",width:"160px",margin:"0 auto 5px auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center"},subtitle:{bottom:"25%"}},ke=function(t){var e,r;function i(e,r){var i;if(De.trace("Format[SlideRoll].constructor()"),!b.h)throw new Error("Mobile not detected");return i=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach((function(e){we(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ie,{},r,{ancestor:Ee}))||this,we(Oe(i),"_proceedToNextDefaultAd",(function(t){t&&(i.logger.trace("Format[SlideRoll] @vnProceedToNextDefaultAd",2),i.module.isVpaidStartAdWasInvokedOnce&&i._updateModuleState())})),i.options.expandOnAdLoaded=Object(g.u)(i.options.expandOnAdLoaded),i.waitingForInitialScroll=!0,i.onResize=Me.bind(Oe(i)),i.onScroll=xe.bind(Oe(i)),i.onTouchEnd=Be.bind(Oe(i)),i.onTouchStart=ze.bind(Oe(i)),i._scrollTo=Re.bind(Oe(i)),i._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",i._proceedToNextDefaultAd),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._initDataXml=function(){var t=this;return new Promise((function(e){De.trace("Format[SlideRoll].initDataXml()");var r=t.module,i=t.options,o=window.innerWidth,n=O(i,""+t),a=n.moduleNode,s=n.moduleInnerNode;t.moduleNode=t._addDOMNode(a),t.moduleInnerNode=t._addDOMNode(s);var l=t.slot=t._initSlotNode();Object(m.c)(a,{position:"relative"}),Object(m.c)(s,{clip:"rect(0,0,0,0)"});var d=a.getBoundingClientRect(),c=d.left,u=d.right;Object(m.c)(a,{marginLeft:"-"+c+"px",marginRight:"-"+(o-u)+"px"}),Object.keys(Te).forEach((function(t){var e=Te[t];r.setControlData(t,{css:e})})),r.setControlData("logo",{content:fe.a}),r.setControlData("slot",{node:l}),t._addVPAIDEventListener(r,"AdLoaded",Ne.bind(t)),t._addVPAIDEventListener(r,"AdResumed",Fe.bind(t)),t._addVPAIDEventListener(r,"AdVideoStart",Le.bind(t)),t._addVPAIDEventListener(r,"AdSkippableStateChange",We.bind(t)),t._addVPAIDEventListener(r,"AdStopped",He.bind(t)),t._addVPAIDEventListener(r,"AdDestroyed",(function(){return t._destroy()})),e()}))},o._destroy=function(){De.trace("Format[SlideRoll].destroy()"),t.prototype._destroy.call(this);var e=this._getDimensions().moduleTop,r=this.requestAnimationID;r&&window.cancelAnimationFrame(r),e&&window.scrollTo(window.scrollX,e),Object.assign(this,{onScroll:null,onResize:null,onTouchEnd:null,onTouchStart:null,module:null,moduleNode:null,moduleInnerNode:null,slot:null,_scrollTo:null})},o._createSlideToSkipAd=function(){var t=this.module,e=t.getControlNode("wrapper"),r=Object(m.b)(e,"div",{display:"none",position:"absolute",zIndex:5,top:"auto",right:"auto",bottom:"10px",left:"50%",width:"160px",margin:"0 auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center",lineHeight:1,pointerEvents:"none"},pe(ye(),me.a)),i=function(){var e=t.getAdSkippableState();Object(m.c)(r,{display:e?"":"none"})};i(),this._addVPAIDEventListener(t,"AdSkippableStateChange",i),t.setControlData("slideToSkipAd",{node:r})},o._initSlotNode=function(){var t=this.moduleInnerNode;return Object(m.b)(t,"div",{position:"fixed",zIndex:2147483647,left:0,bottom:0,backgroundColor:"#000",transform:"translate3d(0,0,0)"})},o._updateModuleState=function(){var t=this.module,e=this.options,r=e.playerFactor,i=e.closeFactor,o=this._getDimensions(),n=o.visiblePercent,a=o.moduleTop;(De.none("Format[SlideRoll] updateModuleState("+n+") "+t.state),!Pe&&!Se&&this.waitingForInitialScroll&&n>i&&(this._scrollTo(a),this.waitingForInitialScroll=!1),be.c.call(t,"loaded")&&n>r&&t.startAd(),be.c.call(t,["paused","pausing"])&&n>r&&t.resumeAd(),be.c.call(t,"playing")&&n<r&&t.pauseAd(),be.c.call(t,"playing"))&&(t.getAdSkippableState()||window.scrollTo(window.scrollX,a))},o._updateModulePosition=function(){var t=this.module,e=this.options.closeFactor,r=this._getDimensions(),i=r.visiblePercent,o=r.moduleTop,n=r.viewportTop;!Se&&be.c.call(t,"playing")&&i>1-e&&this._scrollTo(o),0===i&&o<n&&!be.c.call(t,["loaded","afterplay","skipping","complete","completing","stopped","destroyed","destroying"])&&t.getAdSkippableState()&&t.skipAd()},o._updateModuleSize=function(){var t=this.module,e=this.moduleNode,r=this.moduleInnerNode,i=this.slot,o=window,n=o.innerWidth,a=o.innerHeight;De.trace("Format[SlideRoll] updateModuleSize("+n+":"+a+")"),Object(m.c)(r,{clip:"rect(0,"+n+"px,"+a+"px,0)"}),Object(m.c)([e,i],{width:n+"px",height:a+"px"}),t.resizeAd(n,a)},o._getDimensions=function(){var t=this.moduleNode,e=window,r=e.scrollY,i=e.innerWidth,o=e.innerHeight,n=i,a=o,s=r,l=r+o,d=a,c=s+(t&&t.getBoundingClientRect()||{}).top,u=c+a,h=Math.max(s,c),p=Math.min(l,c+a),g=Math.max(0,Math.min(a,p-h));return{viewportWidth:n,viewportHeight:a,viewportTop:s,viewportBottom:l,moduleHeight:d,moduleTop:c,moduleBottom:u,visibleTop:h,visibleBottom:p,visibleHeight:g,visiblePercent:a&&g/a}},o._getModuleDimensions=function(){return Object(g.k)(window,this.moduleNode)},o.toString=function(){return Ee},o.getBaseName=function(){return je.toLowerCase()},i}(p),Ve=function(){_e&&_e(),_e=null};function Re(t,e){var r,i=this;De.trace("Format[SlideRoll].scrollTo("+t+", "+typeof e+")"),e&&(Ce=e);Se||Pe||(Pe=t,this.requestAnimationID=window.requestAnimationFrame((function o(n){if(void 0===n&&(n=0),(!Se||Ce)&&Pe){r=r||n;var a=Math.min(1,(n-r)/1e3*2),s=(Pe-window.scrollY)*a;if(a>0&&Math.abs(s)<.05)return De.trace("Format[SlideRoll].scrollTo("+t+") Calling callback  ("+typeof e+")"),Ce&&Ce(),window.scrollTo(window.scrollX,Pe),Ce=null,void(Pe=null);window.scrollTo(window.scrollX,Math.round(window.scrollY+s)),i.requestAnimationID=window.requestAnimationFrame(o)}}))),Pe=t}function Me(){De.trace("Format[SlideRoll] @resize"),this._updateModuleSize()}function xe(){var t=this._getDimensions().visiblePercent,e=this.options.closeFactor;if(this._updateModuleState(),!Se&&t>e&&Pe){var r=this.requestAnimationID;r&&window.cancelAnimationFrame(r),this.scrollTo=null}if(b.g){var i=this.module.getControlNode("volume"),o=.6*(window.innerHeight-document.querySelector("html").clientHeight);Object(m.c)(i,{marginBottom:o+"px"})}}function Ne(){De.trace("Format[SlideRoll] @AdLoaded",2);var t=this.module,e=this.slot,r=this.options.expandOnAdLoaded,i=t.getAdAspectRatio();if(!i)throw new Error("Format[SlideRoll] Invalid aspect ratio  ("+i+")");var o=t.getControlNode("iframe");this.wrapper=t.getControlNode("wrapper"),Object(m.c)(o,{position:"absolute",left:0,bottom:0,width:"100%"}),Object(m.c)(e,{display:"",transform:"translate3d(0,0,0)"}),this._createSlideToSkipAd(t),this._addDOMEventListener(window,"resize",this.onResize),this._addDOMEventListener(window,"scroll",this.onScroll),this._addDOMEventListener(window,"touchstart",this.onTouchStart,{passive:!0}),this._addDOMEventListener(window,"touchend",Ve,{passive:!0}),this._addDOMEventListener(this.wrapper,"touchstart",this.onTouchStart,{passive:!0}),this._addDOMEventListener(this.wrapper,"touchend",Ve,{passive:!0}),r&&(this._updateModuleState(),this._updateModuleSize())}function Le(){De.trace("Format[SlideRoll] @AdVideoStart",2),this._updateModuleSize(),this._updateModulePosition(),this._updateModuleState()}function Fe(){De.trace("Format[SlideRoll] @AdResumed",2),this._updateModuleState()}function We(){var t=this.module.getAdSkippableState();De.trace("Format[SlideRoll] @AdSkippableStateChange("+t+")",2),this._updateModuleState()}function He(){De.trace("Format[SlideRoll] @AdStopped",2)}function ze(){De.trace("Format[SlideRoll] @touchstart"),Se=!0,Pe=null,this._addDOMEventListener(window,"touchend",this.onTouchEnd),this._addDOMEventListener(this.wrapper,"touchend",this.onTouchEnd)}function Be(){De.trace("Format[SlideRoll] @touchend"),Se=!1,this._removeDOMEventListener(window,"touchend",this.onTouchEnd),this._removeDOMEventListener(this.wrapper,"touchend",this.onTouchEnd);var t=this.module,e=this.options.closeFactor,r=this._getDimensions(),i=r.visiblePercent,o=r.moduleTop;De.none("Format[SlideRoll] updateModuleState("+i+") "+t.state),this.waitingForInitialScroll&&i>e&&(this._scrollTo(o),this.waitingForInitialScroll=!1),this._updateModulePosition(),this._updateModuleState()}var Ue=r(9),qe=r(28),Ge=r.n(qe),Xe=r(13),Je=r(23);function Qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ye="::TimeBeforeSkipChecker",Ze=function(t){var e,r;function i(e){var r,i;void 0===e&&(e={}),(i=t.call(this,e)||this).moduleAPI=e.moduleAPI,i.starting=!1,i.updateStateChecker=e.updateStateChecker,i.getTimeBeforeSkip=e.getTimeBeforeSkip,i.shouldSetAdSkippableState=!1!==e.shouldSetAdSkippableState;var o=Qe(i).moduleAPI||{},n=o.addVPAIDEventListener,a=o.inState,s=o.logger;return i.logger=(null==s||null===(r=s.getChildWriter)||void 0===r?void 0:r.call(s,Ye))||s,a("started","starting","playing")?i.start():(n("AdVideoStart",(function(){return i.start()}),Qe(i)),n("AdStarted",(function(){return i.start()}),Qe(i)),n("AdPlaying",(function(){return i.start()}),Qe(i)),n("AdResumed",(function(){return i.start()}),Qe(i)),n("AdStopped",(function(){return i.stop()}),Qe(i)),n("AdPaused",(function(){return i.stop()}),Qe(i)),n("AdSkipped",(function(){return i.stop()}),Qe(i))),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.stop=function(){var t=this.timeCounter;t&&t.stop()},o.start=function(){var t=this.logger,e=this.timeCounter;if(e)e.start();else{var r=this.moduleAPI,i=this.getTimeBeforeSkip,o=this.shouldSetAdSkippableState,n=(r||{}).setAdSkippableState,a=this.timeBeforeSkip=i&&i();t&&t.log("::TimeBeforeSkipChecker. timeBeforeSkip="+a);var s=!(void 0===a||a);o&&n(s),s||t&&t.log("::TimeBeforeSkipChecker. timeBeforeSkip="+a+". Unskippable Ad."),this.timeCounter=new Je.a({increasePieceOfTime:500,tickHandler:this.tickHandler.bind(this)}),this.timeCounter.start()}},o.tickHandler=function(t){var e=t.elapsedTime,r=this.timeBeforeSkip,i=this.moduleAPI,o=this.timeCounter,n=this.updateStateChecker,a=this.shouldSetAdSkippableState,s=(i||{}).setAdSkippableState;r&&r<=e&&(a&&s(!0),n&&n(),o&&o.stop())},o.getAdElapsedTime=function(){var t=this.timeCounter;return t?t.getAdElapsedTime():0},o.isSkippable=function(){var t=this.getTimeBeforeSkip;return t&&!!(this.timeBeforeSkip=t&&t())},i}(n.a),Ke=Ze,$e=r(12);function tr(){var t=or(["Watch video"]);return tr=function(){return t},t}function er(){var t=or(["Going after"]);return er=function(){return t},t}function rr(){var t=or(["Skip ad in"]);return rr=function(){return t},t}function ir(){var t=or(["Watch video<br/>after ad"]);return ir=function(){return t},t}function or(t,e){return e||(e=t.slice(0)),t.raw=e,t}function nr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function ar(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(e){sr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var lr="CollapsingThumbnail",dr="Format["+lr+"]",cr={right:"5%",bottom:"60%",width:"25%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)",transitionDuration:350,skipControlsTransitionDuration:350,skipControlsTransitionDelay:20,getThumbnailTimeout:500,startFadingDuration:2e3,fadingDuration:500,raisingDuration:0,intermediateFadingOpacity:.7,targetFadingOpacity:0,countdownBackgroundColor:"#d3d3d3",countdownBackgroundHoverColor:"#aaa",countdownColor:"black",countdownHoverColor:"#eee",thumbnailBackgroundColor:"#f2f2f2",thumbnailWrapperWidth:"62%"},ur={wrapper:{paddingTop:0,paddingBottom:0},logo:{},skipAd:{top:0,right:0,padding:"5px",margin:"0 5px 5px 0"},skipAdCountdown:m.n,title:{top:0,right:"40px",left:"auto",margin:"5px 0",padding:"5px",color:"white",background:"rgba(0, 0, 0, 0.27)"},vnAfterplay:{marginTop:0},play:{marginTop:0}},hr=function(t){var e,r;function i(e,r,i){var o,n,a,s,l=r&&r.ancestor&&r.ancestor+":"+dr||"Module::Format[CollapsingThumbnail]";(s=t.call(this,lr,e,!1)||this)["Format[CollapsingThumbnail]"]=l,s.module=e,s._getCurrentPlayer=i,s.options=function(t){void 0===t&&(t={});var e=Object(w.h)(Object(g.j)(window,document))||{},r=e.vn_t_startFadingDuration,i=e.vn_t_fadingDuration,o=e.vn_t_raisingDuration,n=e.vn_t_intermediateFadingOpacity,a=e.vn_t_targetFadingOpacity;return void 0!==r&&(t.startFadingDuration=parseInt(r,10)),void 0!==i&&(t.fadingDuration=parseInt(i,10)),void 0!==o&&(t.raisingDuration=parseInt(o,10)),void 0!==n&&(t.intermediateFadingOpacity=parseFloat(n)),void 0!==a&&(t.targetFadingOpacity=parseFloat(a)),t}(ar({},cr,{},r)),s.TIMER_NAME=s.MODULE_ID+":RemainingTimeChange",s.adWidthPrev=null,s.mainTransitionWasStarted=!1,s.mainTransitionWasFinished=!1;var d=e.getControlNode("wrapper"),c=null===(o=(n=s)._getCurrentPlayer)||void 0===o?void 0:o.call(n),u=c?null==c||null===(a=c.getSize)||void 0===a?void 0:a.call(c):{},h=u.width,p=void 0===h?0:h,f=u.height,v=void 0===f?0:f,b=e.getControlUnionData(lr,"css")||{};return s._overlayControls=Object(m.b)(d,"div",ar({position:"absolute",zIndex:2,cursor:"auto",width:p+"px",height:v+"px",fontSize:0,color:"#333",borderRadius:"4px",boxShadow:"none",transitionProperty:"top, width, height",transitionDuration:r.transitionDuration+"ms",transitionTimingFunction:"ease-out",visibility:"hidden",background:"transparent",opacity:0},b),null),e.setControlData(lr,{node:s._overlayControls}),s}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.init=function(){var t=this,e=this.module,r=e.getControlUnionData("skipAdCountdown","timeBeforeSkip")||e.getControlUnionData("skipAd","timeBeforeSkip");this.timeBeforeSkipChecker=new Ke({getTimeBeforeSkip:function(){return r},moduleAPI:e.getAPI(),shouldSetAdSkippableState:!0,logger:this.logger}),this._addDestroyableObject(this.timeBeforeSkipChecker),br.call(this).then((function(){t.logger.trace(t["Format[CollapsingThumbnail]"]+".init() we have got thumbnail")})),pr.call(this),this._addVPAIDEventListener(e,"AdStarted",jr.bind(this,e)),this._addVPAIDEventListener(e,"AdVideoStart",(function(){Dr.call(t),t.update.call(t,!0,!0,!0,!1)})),this._addVPAIDEventListener(e,"AdVideoComplete",Er.bind(this)),this._addVPAIDEventListener(e,"AdUserClose",this._removeTimeout.bind(this,this.TIMER_NAME)),this._addVPAIDEventListener(e,"AdSkipped",(function(){t._removeTimeout(t.TIMER_NAME)})),this._addVPAIDEventListener(e,"AdStopped",(function(){t._removeTimeout(t.TIMER_NAME)})),this._addVPAIDEventListener(e,"AdError",Cr.bind(this)),this._addVPAIDEventListener(e,"AdSkippableStateChange",(function(){var r=e.getAdSkippableState();t.logger.trace("Format[CollapsingThumbnail] @AdSkippableStateChange adSkippableState="+r,2),!r&&t._playButtonWasShown&&(t._playButtonWasShown=!1,t._startChunkTime=t.getAdElapsedTime(),t.logger.trace(t["Format[CollapsingThumbnail]"]+" @AdSkippableStateChange this._startChunkTime="+t._startChunkTime),Pr.call(t),Dr.call(t))}))},o.getAdElapsedTime=function(){var t=this.module,e=this.timeBeforeSkipChecker;return e?e.getAdElapsedTime():t&&t.getAdElapsedTime()||0},o.update=function(t,e,r,i){var o=this;void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=!0),this.logger.none(this["Format[CollapsingThumbnail]"]+".update()",2,"blue");var n=this.module,a=this.options.transitionDuration,s=_r.call(this),l=s.blockWidth,d=s.blockHeight,c=Ir.call(this,n),u=c.time,h=c.duration,p=c.adDuration,g=u<=0&&h<=p;function f(){var t=this;e&&vr.call(this,l,d),i&&yr.call(this,g),this._addTimeout("waitManualCheckId",(function(){v.call(t)}),a+10)}function v(){var t;function e(){this.mainTransitionWasFinished?clearInterval(t):this.updateAfterTransitionEndWithBind({forceUpdate:!0})}this.mainTransitionWasFinished||(this.logger.log(this["Format[CollapsingThumbnail]"]+".update() startManualCheck() mainTransitionWasFinished is still false",1,"pink"),e.call(this),t=setInterval(e.bind(this),500))}this.logger.trace(this["Format[CollapsingThumbnail]"]+".update() this.mainTransitionWasStarted="+this.mainTransitionWasStarted+" this.adWidthPrev === blockWidth="+(this.adWidthPrev===l)+" forcedUpdate="+t),this.mainTransitionWasStarted||this.adWidthPrev===l&&!t||(this.mainTransitionWasStarted=!0,r&&mr.call(this,d).then((function(t){o.logger.trace(o["Format[CollapsingThumbnail]"]+".update() gotThumbnail="+t+" shouldUpdateOverlay="+e+" blockWidth="+l+" blockHeight="+d),f.call(o)})).catch((function(t){o.logger.error(o["Format[CollapsingThumbnail]"]+".update() error: "+t),f.call(o)})),this.adWidthPrev=l)},o.setZIndex=function(t){this._overlayControls&&(this._overlayControls.style.zIndex=t)},i}($e.a);function pr(){var t,e=this;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initOverlayControls()"),this._overlayControls.classList.add("___overlay___"),Pr.call(this),gr.call(this),fr.call(this);this.updateAfterTransitionEndWithBind=t=function(r){var i=r||{},o=i.propertyName,n=i.forceUpdate;if(!n){if("height"!==o&&"width"!==o)return;var a=0^e._overlayControls.offsetWidth,s=0^e._overlayControls.offsetHeight,l=e.overlayControlsTargetWidth,d=e.overlayControlsTargetHeight;if(e.logger.trace(e["Format[CollapsingThumbnail]"]+".updateAfterTransitionEnd() forceUpdate="+n+" isManualCheck="+(r&&r.manualCheck)+" propertyName="+(r&&r.propertyName)+" width="+a+" overlayControlsTargetWidth="+l+" height="+s+" overlayControlsTargetHeight="+d+" mainTransitionWasFinished="+e.mainTransitionWasFinished+" mainTransitionWasStarted="+e.mainTransitionWasStarted,2),!l||!d||!e.mainTransitionWasStarted||!r||"height"!==r.propertyName&&"width"!==r.propertyName||Math.abs(s-d)>5||Math.abs(a-l)>5)return}e.mainTransitionWasFinished=!0,e.mainTransitionWasStarted=!1,e.logger.none(e["Format[CollapsingThumbnail]"]+".updateAfterTransitionEnd() mainTransitionWasStarted="+e.mainTransitionWasStarted),e._removeDOMEventListener(e._overlayControls,"transitionend",t),setTimeout((function(){e.update(!1,!1);var t=e._thumbnailDefaultText,r=e._thumbnailWrapper,i=e.options.thumbnailBackgroundColor;t&&Object(m.c)(t,{opacity:1}),Object(m.c)(r,{backgroundColor:i})}),1)}.bind(this),setTimeout((function(){e._addDOMEventListener(e._overlayControls,"transitionend",t)}),1)}function gr(){var t=this.options.transitionDuration;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initThumbnail()"),this._thumbnailWrapper=Object(m.b)(this._overlayControls,"div",{position:"relative",zIndex:2,width:"100%",height:"100%",borderRadius:"4px 0 0 4px",textAlign:"center",overflow:"hidden",opacity:.95,backgroundColor:"transparent",transitionProperty:"top, width, height",transitionDuration:t+"ms",transitionTimingFunction:"ease-out",display:"flex",alignItems:"center",justifyContent:"center"}),this._thumbnailWrapper.className="___thumbnailWrapper___",this._thumbnailDefaultText=Object(m.b)(this._thumbnailWrapper,"div",{height:"auto",width:"auto",zIndex:1,color:"grey",lineHeight:1.2,opacity:0,transition:"all "+t+"ms ease-out"},pe(ir()))}function fr(){var t=this.options,e=t.skipControlsTransitionDuration,r=t.skipControlsTransitionDelay,i=t.thumbnailWrapperWidth;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initCountdown()");var o=100-parseFloat(i),n=o+"%",a=o+.5+"%",s=this._skipAd=Object(m.b)(this._overlayControls,"div",{position:"absolute",zIndex:1,top:0,right:n,width:a,height:"100%",visibility:"hidden",display:"flex",flex:"0 0 auto",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",background:"white",borderRadius:"0 4px 4px 0",fontSize:"2.7vh",transition:"all "+e+"ms ease-out",transitionDelay:(r||1.5*e)+"ms"});s.className="___skipAd___",this._countdownText=Object(m.b)(s,"div",{display:"none",paddingTop:0,paddingBottom:0,paddingLeft:"5%",paddingRight:"5%",lineHeight:1,textAlign:"center"}),this._countdownValue=Object(m.b)(s,"div",{textAlign:"center"});var l=this._countdownValueText=Object(m.b)(this._countdownValue,"div",{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px",fontWeight:"bold",width:"2vh",height:"2vh",lineHeight:1,borderRadius:"50%",backgroundColor:"#d3d3d3",boxSizing:"border-box"});l.className="___countdownValueText___",setTimeout((function(){return Object(m.c)(l,{transition:"all 250ms"})}),1)}function vr(t,e){var r=this._overlayControls,i=this._thumbnailWrapper,o=this.options,n=o.right,a=o.bottom,s=o.transitionDuration,l=o.thumbnailWrapperWidth;this.logger.trace(this["Format[CollapsingThumbnail]"]+".updateOverlayControls()");var d=0^parseFloat(t),c=0^parseFloat(e);this.overlayControlsTargetWidth=t,this.overlayControlsTargetHeight=e,this.logger.none(this["Format[CollapsingThumbnail]"]+".updateOverlayControls() blockWidth:"+d+" blockHeight:"+c,2,"brown"),Object(m.c)([r,i],{transitionDuration:s+"ms"}),setTimeout((function(){Object(m.c)(r,{right:n,bottom:a,width:Object(g.t)(d),height:Object(g.t)(c)}),Object(m.c)(i,{width:l})}),1),this._getCurrentPlayer()||Object(m.c)(r,{transition:"width 1ms, height 1ms",left:"-"+t})}function mr(t){var e=this;this.logger.trace(this["Format[CollapsingThumbnail]"]+".updateThumbnail()");var r=this._thumbnailDefaultText;return br.call(this).then((function(i){return e.logger.trace(e["Format[CollapsingThumbnail]"]+".updateThumbnail() gotThumbnail="+i),r&&Object(m.c)(r,{fontSize:parseInt(t,10)/6+"px"}),i}))}function br(){var t=this;if(this._thumbnail)return Promise.resolve(this._thumbnail);if(this._tumbnailImage)return i.call(this);var e=this.options.getThumbnailTimeout,r=new Promise((function(e){var r=t._getCurrentPlayer(),o=r&&r.getThumbnail&&r.getThumbnail();if(!o){var n=r?"currentPlayer did not return thumbnailImage ":"Can not found currentPlayer";return t.logger.warn(t["Format[CollapsingThumbnail]"]+".updateThumbnail() "+n),e(!1)}return t.logger.log(t["Format[CollapsingThumbnail]"]+".getThumbnail() Got currentPlayer",2,"green"),Object(Ue.c)(o).then((function(e){return"error"!==e.type?t._tumbnailImage=o:null})).then((function(){return i.call(t)})).then((function(t){return e(!!t)})),e(!0)}));return Promise.race([r,new Promise((function(t,r){e&&setTimeout((function(){r(Error("Timeout("+e+") for getThumbnail was expired"))}),e)}))]);function i(){var t=this,e=this._thumbnailWrapper,r=this._thumbnailDefaultText;if(!e)return Promise.resolve(!1);var i=this._tumbnailImage;return new Promise((function(o){r&&(r.remove(),delete t._thumbnailDefaultText);var n=null;i&&((n=t._thumbnail=Object(m.b)(e,"img",{position:"relative",height:"100%",zIndex:2})).src=i),o(n)}))}}function yr(t){var e=this;if(this.mainTransitionWasFinished){var r=this._overlayControls,i=this._skipAd,o=this._countdownText,n=this._thumbnail,a=this._countdownValueText,s=this._overlayControlsSetOpacity,l=this.options,d=l.right,c=l.skipControlsTransitionDuration,u=l.boxShadow,h=r.clientHeight;(b.h||h<=55||!n)&&(t=!1);var p=t?h/2:h/1.5;if(Object(m.c)(o,{display:t?"":"none"}),Object(m.c)(r,{boxShadow:u}),Object(m.c)(i,{visibility:"visible"}),this._getCurrentPlayer()){if(!s){var g=this.options,f=g.startFadingDuration,v=g.fadingDuration,y=g.intermediateFadingOpacity,A=g.raisingDuration,O=g.targetFadingOpacity;this._overlayControlsSetOpacity=!0;var w=this.module.getControlNode("slot"),_=this.module.getControlNode("vpaidSlot");Object(m.c)(r,{transitionProperty:"opacity",transitionDuration:f+"ms",transitionTimingFunction:"linear"});var S,P=!!b.h,C=!1,j=_.querySelector("iframe");try{S=j&&j.contentWindow&&j.contentWindow.document}catch(t){}var E=S||_||w,D=!b.h&&this._addDOMEventListener(E,"mousemove",(function(){P=!0,C&&(Or.call(e,y,A),e._removeDOMEventListener(E,"mousemove",D))})),I=this._addDOMEventListener(r,"transitionend",(function(t){"opacity"===t.propertyName&&(e.logger.log(".updateCountdown() mouseout transitionend mouseInArea="+P),C=!0,!P&&wr.call(e,O,v),I&&e._removeDOMEventListener(r,"transitionend",I))}));Object(m.c)(r,{opacity:y}),setTimeout((function(){e._removeDOMEventListener(r,"transitionend",I),C||I&&e._removeDOMEventListener(r,"transitionend",I),C=!0}),f+100),b.h||(this._addDOMEventListener(w,"mouseover",(function(t){var i=t.relatedTarget;if(i!==_&&i!==r){var o=Ar.call(e,i,[r],"slot mouseover");o!==r&&Or.call(e,y,o?v:A)}})),this._addDOMEventListener(_||w,"mouseover",(function(t){var i=t.relatedTarget;if(i!==w){var o=Ar.call(e,i,[r,w],"vpaidSlot mouseover");Or.call(e,y,o?v:A)}})),this._addDOMEventListener(r,"mouseenter",(function(){Or.call(e,1,A)})),this._addDOMEventListener(w,"mouseout",(function(t){var i=t.relatedTarget,o=Ar.call(e,i,[r,_],"slot mouseout");o!==_&&o!==_&&o!==r&&wr.call(e,O,v)})),this._addDOMEventListener(r,"mouseout",(function(t){var i=t.relatedTarget;Ar.call(e,i,[r],"_overlayControls mouseout")!==r&&(i===w&&i===_||wr.call(e,O,v))})))}Object(m.c)(o,{transition:"none"}),Object(m.c)(i,{fontSize:h/6+"px",transition:"width 0ms, transform "+c/2+"ms ease-out",transform:"translateX(98%)"})}else Object(m.c)(r,{right:d,transition:"all "+c+"ms ease-out"}),Object(m.c)(i,{flexDirection:"row",width:"100%",right:"0",transition:"none"});Object(m.c)(a,{fontSize:p/2+"px",width:p+"px",height:p+"px"})}else this.logger.trace(this["Format[CollapsingThumbnail]"]+'.updateCountdown() event "transitionend" for overlayControls can be not occurs')}function Ar(t,e,r){void 0===r&&(r=""),this.logger.none(" "+r+" relatedTarget="+Object(g.f)(t));for(var i=t;i&&e.indexOf(i)<0;)i=i.parentElement;return i}function Or(t,e){void 0===e&&(e=0);var r=this._overlayControls,i=this._overlayControlsStartOpacity,o=void 0!==i&&i||1;Object(m.c)(r,{transition:"none",opacity:o}),Object(m.c)(r,{transitionProperty:"opacity",transitionDuration:e+"ms",transitionTimingFunction:"linear"}),Object(m.c)(r,{opacity:t})}function wr(t,e){var r=this._overlayControls,i=getComputedStyle(r).opacity;this._overlayControlsStartOpacity=parseFloat(i),Object(m.c)(r,{transitionProperty:"opacity",transitionDuration:e+"ms"}),Object(m.c)(r,{opacity:t})}function _r(){var t=this.module,e=this.options.width;this.logger.trace(this["Format[CollapsingThumbnail]"]+".calculateBlockSize()");var r=(Xe.a.call(t)||{}).outsideWidth*(parseInt(e,10)/100);return{blockWidth:r+"px",blockHeight:r/2.5+"px"}}function Sr(){var t=this.module,e=this._overlayControls,r=this._countdownValueText,i=this.options,o=i.countdownColor,n=i.countdownBackgroundColor,a=i.countdownHoverColor,s=i.countdownBackgroundHoverColor;this.logger.none(this["Format[CollapsingThumbnail]"]+" setCountdownAsPlayButtonBehavior()"),e.removeEventListener("click",this._overlayControlsClickHandler),this._overlayControlsClickHandler=function(){t.skipAd()},this._overlayControls.addEventListener("click",this._overlayControlsClickHandler),Object(m.c)(e,{cursor:"pointer"}),this._overlayControlsMouseenterHandler=this._addDOMEventListener(e,"mouseenter",(function(){Object(m.c)(r,{backgroundColor:s,color:a})})),this._overlayControlsMouseleaveHandler=this._addDOMEventListener(e,"mouseleave",(function(){Object(m.c)(r,{backgroundColor:n,color:o})}))}function Pr(){var t=this._overlayControls,e=this._overlayControlsClickHandler;this.logger.trace(this["Format[CollapsingThumbnail]"]+" clearCountdownAsPlayButtonBehavior()"),t.removeEventListener("click",e),t.removeEventListener("touchend",e),this._overlayControlsClickHandler=function(t){t.stopPropagation()},this._overlayControls.addEventListener("click",this._overlayControlsClickHandler),this._overlayControls.addEventListener("touchend",this._overlayControlsClickHandler),Object(m.c)(t,{cursor:"auto"}),this._removeDOMEventListener(t,"mouseenter",this._overlayControlsMouseenterHandler),this._removeDOMEventListener(t,"mouseleave",this._overlayControlsMouseleaveHandler)}function Cr(){this._removeTimeout(this.TIMER_NAME)}function jr(){var t=this._overlayControls;Object(m.c)(t,{visibility:"visible",opacity:1}),Dr.call(this)}function Er(){this.logger.trace(this["Format[CollapsingThumbnail]"]+" @AdVideoComplete",2),this._removeTimeout(this.TIMER_NAME)}function Dr(){var t=this;this._addTimeout(this.TIMER_NAME,(function(){Tr.call(t),Dr.call(t)}),500)}function Ir(t){var e=this.timeBeforeSkipChecker,r=t.getAdDuration()||0,i=this.getAdElapsedTime(),o=t.getControlUnionData("skipAdCountdown","timeBeforeSkip")||t.getControlUnionData("skipAd","timeBeforeSkip")||r;return{time:Math.round(Math.min(r,o)-i),skipTime:o,adDuration:r,isSkippable:e&&e.isSkippable()}}function Tr(){var t=this.module,e=this._countdownText,r=this._countdownValueText,i=Ir.call(this,t),o=i.time,n=i.skipTime,a=i.adDuration,s=i.isSkippable,l=t.getAdSkippableState();this.logger.none(this["Format[CollapsingThumbnail]"]+" @AdRemainingTimeChange "+o+":"+n+":"+a,1,"#8fbc8f"),!l&&o>0&&(e.innerHTML=pe(s?rr():er()),r.innerHTML=""+o),(l||o<=0&&n<=a&&!this._playButtonWasShown)&&(this._playButtonWasShown=!0,t.setAdSkippableState(!0),e.innerHTML=pe(tr()),r.innerHTML=Ge.a,Sr.call(this)),yr.call(this,!0)}function kr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Vr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kr(Object(r),!0).forEach((function(e){Mr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xr,Nr="ViqeoPlayerRoll",Lr="Format[ViqeoPlayerRoll]",Fr={playerPlaybackClass:"vn-playback-viqeo-roll",destroyTimeout:5e3,playerDesktopStartFactor:.5,playerDesktopStopFactor:0,playerMobileStartFactor:.5,playerMobileStopFactor:0,hideThumbnail:!1},Wr={},Hr=function(t){var e,r;function i(e,r){var i;if(r=Vr({},Fr,{},r,{ancestor:Lr}),Mr(Rr(i=t.call(this,e,r)||this),"_proceedToNextDefaultAd",(function(t){t&&(i.logger.trace("Format[ViqeoPlayerRoll] @vnProceedToNextDefaultAd",2),i._updateModuleState())})),i.slot=e.getControlNode("slot"),!i.slot)throw Error("Format[ViqeoPlayerRoll] player don't give the slot");i._initModule();var o=Rr(i).options,n=o.playerDesktopStartFactor,a=o.playerDesktopStopFactor,s=o.playerMobileStartFactor,l=o.playerMobileStopFactor;return i._startFactor=parseFloat(b.h?s:n),i._stopFactor=parseFloat(b.h?l:a),i.scrollNode=Object(m.k)(r.scrollElement)||window,i.vqPlayer=e.environmentVars.vqPlayer,i.collapsingThumbnail=null,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.isFloatingMode=function(){var t=this.vqPlayer;return!(!t||!t.inMode("flying"))},o._initModule=function(){var t=this,e=this.module,r=this.options;e._applyLayout(Vr({},ur,{},Wr)),this._addVPAIDEventListener(e,"AdLoaded",(function(){t.collapsingThumbnail=!r.hideThumbnail&&new hr(e,r,(function(){return t.vqPlayer}));var i=t.collapsingThumbnail,o=(t.options.moduleAPI||{}).isVpaidJs;o&&o()&&i&&(i.options.transitionDuration=0),i&&i.init()})),this._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",this._proceedToNextDefaultAd)},o.setZIndex=function(t){var e=this.collapsingThumbnail;this.logger.trace("Format[ViqeoPlayerRoll].setZIndex("+t+")"),e&&e.setZIndex(t)},o._updateModuleState=function(){var t=this;this.logger.none("Format[ViqeoPlayerRoll].updateModuleState()");var e=this.module,r=this._startFactor,i=this._stopFactor;Object(g.o)(this.slot).then((function(o){var n=o.intersectionRatio;be.c.call(e,["paused","pausing"])&&n>=r&&e.resumeAd(),be.c.call(e,"playing")&&n<i&&e.pauseAd(),be.c.call(e,"loaded")&&n>=r&&e.isVpaidStartAdWasInvokedOnce&&(t.logger.trace("Format[ViqeoPlayerRoll] startAd() for defaultAd manually"),e.startAd())}))},o._vpaidInitAd=function(){this.logger.trace("Format[ViqeoPlayerRoll].vpaidInitAd()");var e=this.scrollNode,r=this.options.moduleAPI||{},i=r.addVPAIDEventListener,o=r.extendEnvironmentVars;return o&&o({forceAspectRatio:!b.h}),i("AdLoaded",Br.bind(this),this),i("AdStarted",Xr.bind(this),this),i("AdVideoStart",Gr.bind(this),this),i("AdStopped",Jr.bind(this),this),i("AdDestroyed",Qr.bind(this),this),i("AdSizeChange",Ur.bind(this),this),this._addDOMEventListener(e,"scroll",zr.bind(this)),t.prototype._vpaidInitAd.call(this)},o.getModuleOptions=function(){return{isInsideTextContent:!1,disableHoverAudio:!0,startingVolume:0,vpaidJsVideoSlotShouldBeMuted:!0}},o.hasReachInventoryFactory=function(){return!0},o.getReachInventoryFactory=function(){var t=this;return this.logger.trace("Format[ViqeoPlayerRoll].getReachInventoryFactory()"),{markNode:"",waiterCreator:function(){return t._waitAdvStart()},destroy:null,id:"vn-visible-inventory-mark_"+this}},o._waitAdvStart=function(){var t=this;return this.logger.trace("Format[ViqeoPlayerRoll].waitForAdvStart"),new Promise((function(e){Zr.call(t,e,"advStart")}))},o._getModuleDimensions=function(){var t=this.vqPlayer,e=t.getModuleDimensions(),r=e.viewportHeight,i=e.viewportTop,o=e.viewportBottom,n=e.moduleTop;return{viewportHeight:r,viewportWidth:t.getSize().width,viewportTop:i,viewportBottom:o,moduleTop:n}},o.updateOptions=function(t){this.options=Vr({},this.getOptions(),{},t);var e=this.collapsingThumbnail,r=this.options.hideThumbnail;e&&r&&(this.logger.log("Format[ViqeoPlayerRoll] updateOptions() hideThumbnail="+r+" so collapsingThumbnail is hidden"),e._destroy(),this.collapsingThumbnail=null)},o.toString=function(){return Lr},o.getBaseName=function(){return Nr.toLowerCase()},i}(v);function zr(){this.logger.none("Format[ViqeoPlayerRoll] @scroll"),this._updateModuleState()}function Br(){this.logger.trace("Format[ViqeoPlayerRoll] @AdLoaded",2),this._addDOMEventListener(document,"visibilitychange",qr.bind(this),!1),this._updateModuleState()}function Ur(){this.logger.trace("Format[ViqeoPlayerRoll] @AdSizeChange",2);var t=this.module,e=this.collapsingThumbnail;be.c.call(t,["pausing","paused","resuming","playing"])&&e&&e.update(!0)}function qr(){var t=this.module,e=document.visibilityState;this.logger.trace("Format[ViqeoPlayerRoll] @visibilitychange ("+e+")",2),"hidden"===e?be.c.call(t,"playing")&&t.pauseAd({invoker:this,method:"onVisibilityChange"}):this._updateModuleState()}function Gr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdVideoStart",2),Yr.call(this,!0),this._updateModuleState()}function Xr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdStarted",2),this._updateModuleState()}function Jr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdStopped",2),Yr.call(this,!1)}function Qr(){var t=this;this.logger.trace("Format[ViqeoPlayerRoll] @AdDestroyed",2),Yr.call(this,!1);var e=this.options.destroyTimeout;setTimeout((function(){return t._destroy()}),e)}function Yr(t){void 0===t&&(t=!0);var e=this.slot,r=this.options.playerPlaybackClass;e&&r&&(t?e.classList.add(r):e.classList.remove(r))}function Zr(t,e){var r=this.vqPlayer;this.logger.trace("Format[ViqeoPlayerRoll] Got "+e+" from player"),r.subscribe(t,e)}function Kr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function $r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ei,ri="AmpRoll",ii="Format[AmpRoll]",oi=(null===a.a||void 0===a.a||null===(xr=a.a.getChildWriter)||void 0===xr?void 0:xr.call(a.a,ii))||a.a,ni={playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerSelectorPercent:"100%",widthElement:null,playerElement:"#c",lookupElement:"#c",playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.2,preloadDistance:190,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,doNotWatchVisibility:!0,expandingDuration:0},ai=function(t){var e,r;function i(e,r){var i,o=r&&r.ancestor&&r.ancestor+":"+ii||"Module::Format[AmpRoll]";oi.trace(o+".constructor()"),i=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kr(Object(r),!0).forEach((function(e){$r(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},ni,{},r,{ancestor:o}))||this,i["Format[AmpRoll]"]=o,i.lastPostponedAction=null,i.adLoaded=!1,i.intersectionRatio=0,i.unlistenObserveIntersection=null,window.context.observeIntersection&&(i.unlistenObserveIntersection=window.context.observeIntersection(i._ampObserveIntersection.bind(ti(i))));var n=new g.a;return i.visibleInventoryPromise=n.promise,i.visibleInventoryResolve=n.resolve,(0,ti(i).options.moduleAPI.setControlData)("wrapper",{css:{position:"absolute"}}),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.waitBeforeLoadUrl=function(t){return oi.trace(this["Format[AmpRoll]"]+".waitBeforeLoadUrl("+t+")"),Promise.resolve(t)},o._vpaidInitAd=function(){oi.trace(this["Format[AmpRoll]"]+".vpaidInitAd()");var e=this.module;this._addVPAIDEventListener(e,"AdLoaded",si.bind(this)),this._addVPAIDEventListener(e,"AdStarted",li.bind(this));var r=t.prototype._vpaidInitAd.call(this);return Object(_.g)(e.environmentVars,{forceAspectRatio:!1}),r},o.abort=function(){window.context.noContentAvailable&&(oi.trace(this["Format[AmpRoll]"]+".abort() invoke window.context.noContentAvailable()"),window.context.noContentAvailable())},o._destroy=function(){this.unlistenObserveIntersection&&this.unlistenObserveIntersection(),t.prototype._destroy.call(this)},o._ampObserveIntersection=function(t){var e=this;t.forEach((function(t){var r=t.intersectionRatio;r>0&&e.visibleInventoryResolve(),oi.none(e["Format[AmpRoll]"]+"._ampObserveIntersection() intersectionRatio="+r+" this.intersectionRatio="+e.intersectionRatio),e.intersectionRatio!==r&&(e.intersectionRatio=r,oi.none(e["Format[AmpRoll]"]+"._ampObserveIntersection() intersectionRatio="+r+" this.adLoaded="+e.adLoaded),e.adLoaded?e._updateModuleState():e.lastPostponedAction=e._updateModuleState.bind(e))}))},o.hasReachInventoryFactory=function(){return!0},o.getReachInventoryFactory=function(){var t=this;return oi.trace(this["Format[AmpRoll]"]+".getReachInventoryFactory()"),{id:"vn-visible-inventory-mark_"+this,waiterCreator:function(){return t.visibleInventoryPromise},destroy:null,markNode:""}},o._moduleResizeAd=function(t,e){var r=this.options.moduleAPI,i=r.resizeAd,o=r.getIndents,n=o&&o()||{},a=n.top,s=n.bottom,l=window.getComputedStyle(t),d=Math.min(window.innerWidth,Math.round(t.clientWidth-parseFloat(l.paddingLeft)-parseFloat(l.paddingRight))),c=Math.min(window.innerHeight-a-s,Math.round(d*e));i&&i(d,c)},o.canExecuteNoAd=function(){return!0},o._getModuleShown=function(){return this.intersectionRatio},o._updateModuleState=function(){var t=this.intersectionRatio;this._applyModuleState({intersectionRatio:t,moduleSquare:1})},o._updateModuleNodeSize=function(){var t=this.moduleNode,e=this.options.moduleAPI,r=e.getControlNode,i=e.getIndents,o=t&&t.parentElement||{},n=o.clientWidth,a=o.clientHeight;Object(m.c)(t,{width:Object(g.t)(n),height:Object(g.t)(a)});var s=r&&r("iframe");Object(m.c)(s,{position:"absolute",left:0,top:0,width:"100%",height:"100%"});var l=(i&&i()||{}).outsideHeight,d=r&&r("wrapper"),c=d&&d.parentElement;if(c){var u=Object(g.i)(c).height;u=Math.min(a,u),oi.trace(this["Format[AmpRoll]"]+".updateModuleNodeSize("+n+":"+a+") parentHeight="+u+" outsideHeight="+l),d&&u&&Object(m.c)(d,{top:Object(g.t)(u/2-l/2)})}},o.getModuleOptions=function(){return{isInsideTextContent:!0,canExecuteNoAd:!0}},o.toString=function(){return ii},o.getBaseName=function(){return ri.toLowerCase()},i}(G);function si(){var t=this;window.context.reportRenderedEntityIdentifier&&window.context.reportRenderedEntityIdentifier("videonow"),this.adLoaded=!0;var e=this.lastPostponedAction;e&&e(),setTimeout((function(){return t._updateModuleNodeSize()}),1)}function li(){var t=this;if(window.context.renderStart){var e=this.options.moduleAPI.getIndents,r=e&&e()||{},i=r.outsideWidth,o=r.outsideHeight;i&&o&&(oi.log(this["Format[AmpRoll]"]+".onAdStarted() renderStart("+i+", "+o+")",2,"green"),window.context.onResizeSuccess((function(e,r){oi.trace(t["Format[AmpRoll]"]+".onAdStarted:onResizeSuccess("+e+", "+r+")"),setTimeout((function(){return t._updateModuleNodeSize()}),1)})),window.context.renderStart({width:i,height:o}))}}function di(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function ci(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var hi="Overlay",pi="Format[Overlay]",gi=(null===a.a||void 0===a.a||null===(ei=a.a.getChildWriter)||void 0===ei?void 0:ei.call(a.a,pi))||a.a,fi={},vi=function(t){var e,r;function i(e,r){var i;if(gi.trace("Format[Overlay].constructor()"),!b.h)throw new Error("Mobile not detected");if(!mi)throw new Error("Fixed positioning support not detected");i=t.call(this,e,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?di(Object(r),!0).forEach((function(e){ci(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):di(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},fi,{},r||{},{ancestor:pi}))||this;var o=window,n=o.innerWidth,a=o.innerHeight,s=i.overlayNode=i._addDOMNode(Object(m.b)(document.body,"div",{visibility:"hidden",position:"fixed",zIndex:-1,top:0,left:0,width:n+"px",height:a+"px",background:"rgba(0, 0, 0, .9)"}));i._addDOMEventListener(s,"touchmove",m.d);var l=Object(m.b)(s,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"});e.setControlData("underplay",{node:l});var d=i.slotNode=Object(m.b)(s,"div",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:n+"px",height:"0px"}),c=ui(i).options.moduleAPI.addVPAIDEventListener;return window.savedRequestAnimationFrame=null,i.savedRequestAnimationFrameCallbacks=[],e.setControlData("slot",{node:d}),c("AdLoaded",yi.bind(ui(i)),ui(i)),c("AdVideoStart",Ai.bind(ui(i)),ui(i)),c("vn_hideOverlayFormatWrapper",(function(){gi.warn("Format[Overlay] @vn_hideOverlayFormatWrapper"),i.hide()}),ui(i)),c("vn_setOverlayZIndex",(function(t){var e=t.zIndex;gi.warn("Format[Overlay] @vn_setOverlayZIndex");var r=ui(i).overlayNode;r&&!isNaN(e)&&Object(m.c)(r,{zIndex:e})}),ui(i)),c("AdDestroyed",Oi.bind(ui(i)),ui(i)),c("resize",bi.bind(ui(i)),ui(i)),c("vn_VPAIDCreated",wi.bind(ui(i)),ui(i)),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o._resize=function(){var t=this.module,e=this.overlayNode,r=this.slotNode,i=this.isFullscreen,o=this.mediaInfo,n=window,a=n.innerWidth,s=n.innerHeight,l=t.getAdAspectRatio(),d=a,c=i?s:Math.min(a*l,s);gi.trace("Format[Overlay].resize("+d+"("+a+"):"+c+"("+s+")/"+l+")"),Object(m.c)(e,{width:a+"px",height:s+"px"}),Object(m.c)(r,{width:a+"px",height:s+"px"}),t.resizeAd(a,s,i);var u=o&&function(t,e){var r=e||{},i=r.width,o=r.height,n=r.scalable,a=r.type;if(!a||!a.includes("javascript"))return null;var s=parseFloat(i),l=parseFloat(o),d=Object(g.u)(n);if(s||l){if(d&&s&&l){var c=t.clientHeight,u=t.clientWidth,h=s/l,p=u/h;p>c?s=(l=c)*h:(s=u,l=p)}return{position:"absolute",overflow:"hidden",top:l?"50%":0,left:s?"50%":0,height:l?Object(g.t)(l):"100%",width:s?Object(g.t)(s):"100%",marginTop:l?Object(g.t)(-l/2):0,marginLeft:s?Object(g.t)(-s/2):0}}return null}(r,o),h=this.forceInsideHeight,p=this.forceInsideWidth,f=t.getControlNode("vpaidSlot");!u&&f&&h&&p?Object(m.c)(f,{position:"relative",display:"inline-block",verticalAlign:"middle",width:Object(g.t)(Math.min(p,a)),height:Object(g.t)(Math.min(h,s))}):f&&u&&Object(m.c)(f,u)},o.hide=function(){gi.trace("Format[Overlay].hide()");var t=this.overlayNode;t&&Object(m.c)(t,{height:0,opacity:0,zIndex:-1}),Object(m.c)(document.body,{overflow:""})},o._close=function(){gi.trace("Format[Overlay].close()");var t=this.slotNode,e=this.overlayNode;Object(m.c)(t,{transition:"all 300ms ease-out"}),setTimeout((function(){Object(m.c)(t,{height:0,opacity:.5})}),50),setTimeout((function(){Object(m.t)(e)}),500)},o.getModuleOptions=function(){return{isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}},o.fullscreenSwitchOn=function(){this.isFullscreen=!0},o.getModuleNode=function(){return this.overlayNode},o.getSlotNode=function(){return this.slotNode},o._getModuleDimensions=function(){return Object(g.k)(window,this.getModuleNode())},o.toString=function(){return pi},o.getBaseName=function(){return hi.toLowerCase()},i}(p),mi=function(){var t=!1;if(document.createElement){var e=document.createElement("div");if(e&&e.style){e.style.position="fixed",e.style.top="10px";var r=document.body;r&&r.appendChild&&r.removeChild&&(r.appendChild(e),t=10===e.offsetTop,r.removeChild(e))}}return t}();function bi(){var t=this;gi.trace("Format[Overlay] @resize"),(window.savedRequestAnimationFrame||requestAnimationFrame)((function(){return t._resize()}))}function yi(){gi.trace("Format[Overlay] @AdLoaded",2),this.module.startAd()}function Ai(){var t=this;gi.trace("Format[Overlay] @AdVideoStart",2),this._resize(),Object(m.c)(document.body,{overflow:"hidden"}),Object(m.c)(this.overlayNode,{visibility:"",zIndex:2147483647}),window.savedRequestAnimationFrame||(window.savedRequestAnimationFrame=window.requestAnimationFrame,window.requestAnimationFrame=function(e){t.savedRequestAnimationFrameCallbacks.push(e)})}function Oi(){gi.trace("Format[Overlay] @AdDestroyed",2),this._close(),gi.trace("Format[Overlay] Restoring DOM elements"),window.savedRequestAnimationFrame&&(window.requestAnimationFrame=window.savedRequestAnimationFrame,this.savedRequestAnimationFrameCallbacks.forEach(requestAnimationFrame),window.savedRequestAnimationFrame=null,this.savedRequestAnimationFrameCallbacks=[])}function wi(t){var e=this,r=t.vpaid,i=(this.options||{}).setSizeByMedia,o=r&&r.getMediaInfo();o&&(Object(g.u)(i)?o.then((function(t){var r=t.width,i=t.height;r&&i&&(e.forceInsideHeight=i,e.forceInsideWidth=r,e._resize())})):o.then((function(t){e.mediaInfo=t,e._resize()})))}var _i="::Formats",Si={vpaid:v,instream:v,contentroll:G,continuousroll:yt,flyroll:function(t,e){var r=e||{},i=r.alwaysFly,o=r.flyrollAbsTop;return!0===o||"true"===o?new Qt(t,e):!0===i||"true"===i?new te(t,e):new ae(t,e)},slideroll:ke,overlay:vi,viqeoplayerroll:Hr,amproll:ai},Pi=function(t,e,r){var i,o=t&&t.getAPI&&t.getAPI().logger||a.a,n=(null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,_i))||o;if("string"==typeof e){var s=e.toLowerCase(),l=t.options,d=l&&l.amp;if(d){if("contentroll"!==s.toLowerCase())return n.warn("::Formats Failed to create format ("+e+") because only the ContentRoll format is available for amp"),null;s="amproll"}var c=Si[s];if(c){n.log("::Formats.getFormat("+e+" -> "+s+")");var u=t.format;u&&(n.log("::Formats Destroying existing format"),u._destroy()),n.log("::Formats Initializing format ("+e+" -> "+s+")");var h=t.options[s],p=t.getAPI(),g=Object(_.g)({},d?{}:r,h,{moduleAPI:p});return d&&(g.amp=!0),new c(t,g)}n.warn("::Formats Format not defined ("+s+")")}return n.warn("::Formats Invalid format name ("+e+")"),null};function Ci(t){var e=t||{},r=e.destroyIframeAction,i=e.logger||a.a;this.logger=i,this.destroyIframeAction=r,this._controlData=this._rootControlData={},this.pushControlsDataStack=function(){this._controlData=Object.create(this._controlData)},this.popControlsDataStack=function(){if(this._controlData){var t=this._controlData;Object.prototype.hasOwnProperty.call(t,"iframe")&&t.iframe.node&&(this.logger.trace(":ControlsDataStack.popControlsDataStack() -> _destroyIframe"),this.destroyIframeAction());var e=Object.getPrototypeOf(t);e&&(this._controlData=e)}},this.updateControlData=function(t,e,r){var i,o;Object(_.g)(this._controlData,((i={})[t]=e,i)),r&&Object(_.g)(this._rootControlData,((o={})[t]=e,o))},this.setControlData=function(t,e,r){if(e){var i=r?this._rootControlData:this._controlData;!i&&!r&&(i=this._controlData={}),"solid"===e[_.b]||Array.isArray(e)||"object"!=typeof e?i[t]=e:i[t]=Object(_.g)({},Object.prototype.hasOwnProperty.call(i,t)&&i[t]||{},e)}},this.getControlData=function(t,e,r,i){void 0===r&&(r=!1),i||(i=function(){return!0});for(var o,n,a=this._rootControlData,s=this._controlData,l=r?a:s;l;l=Object.getPrototypeOf(l)){var d=Object.prototype.hasOwnProperty.call(l,t)&&l[t];if(d&&(void 0===o&&i(d)&&(o=e?null!=d[e]&&void 0!==d[e]?d[e]:void 0:d),o&&d[_.a]&&(n=e?d[e]:d)),void 0!==n&&o)break}return Object(_.h)(void 0!==n?n:o)},this.getControlRawUnionData=function(t,e,r){return Di.call(this,t,e,r)},this.getControlRawUnionDataGlobal=function(t,e,r){return Di.call(this,t,e,r,(function(t){return t}),!0)},this.getControlUnionData=function(t,e,r){return Di.call(this,t,e,r,_.h.bind(null))},this.getControlUnionDataGlobal=function(t,e,r){return Di.call(this,t,e,r,_.h.bind(null),!0)},this.getControlNode=function(t){var e=this.getControlUnionData(t);return e?e&&e.node:(this.logger.none(".getControlNode("+t+") Unable to find control.node"),null)}}var ji=function(t){Ci.call(this,t)},Ei=ji;function Di(t,e,r,i,o){void 0===i&&(i=function(t){return t}),void 0===o&&(o=!1),r||(r=function(){return!0});for(var n=[],a=o?this._rootControlData:this._controlData;a;a=Object.getPrototypeOf(a)){var s=Object.prototype.hasOwnProperty.call(a,t)&&a[t];if(s&&r(s)){var l={data:s,parsePoint:s.parsePoint};n.push(l)}}if(n.length){var d=i(function(t,e){var r=t.reduceRight((function(t,r){var i=!!r.parsePoint||e&&r[e]&&!!r[e].parsePoint;delete r.parsePoint;var o=r.data||{},n=t,a=Object(_.g)(n,r);return i&&!o.display&&delete a.display,i&&!o.visibility&&delete a.visibility,!i||o.position||"absolute"!==n.position||"hidden"!==n.visibility&&"none"!==n.display||delete a.position,a}),{}),i=r.data||{};return e?i[e]:i}(n,e));return null===d||void 0!==d&&("object"!=typeof d||Object.keys(d).length)?d:void 0}}function Ii(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ti(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}"undefined"!=typeof exports&&(exports.ControlsDataStack=ji);var ki="vnNoAd",Vi="::Extension[vnNoAd]";function Ri(t,e){return void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseVnCreative()"),w.i.call(this,t,ki,Mi,{parentPrefix:e})}function Mi(t){var e=t&&t.querySelector("scriptUrl");if(e){var r=Object(w.d)(e);return this.logger.trace(Vi+" functionUrl:"+r),{functionUrl:r}}var i=t&&t.querySelector("function");if(i){var o=Object(w.d)(i);return this.logger.trace(Vi+" function:"+o),{functionText:o}}return null}function xi(t,e){var r=t.format,i=t.options,o=t.getAPI&&t.getAPI().logger||a.a,n=(i||{}).canExecuteNoAd;return new Promise((function(i,a){o.log(Vi+" Executing"),n||r&&r.canExecuteNoAd&&r.canExecuteNoAd()||a(new Error(Vi+" runNoAd(). canceled "));var s=e||{},l=s.functionText,d=s.functionUrl;if(l&&l.length){var c=document.createElement("script");c.innerHTML=l,document.body.appendChild(c),i(t)}else if(d&&d.length){if(d){var u=decodeURIComponent(d);Object(Ue.a)(u).then((function(){o.log(Vi+" script "+u+" was successfully loaded"),i(t)})).catch((function(t){console.warn(Vi+" fail load script "+u+" "+t),a(t)}))}}else a(new Error(Vi+" runNoAd(). No exists any function to execute"))}))}var Ni="vnVisibleInventory",Li="::Extension[vnVisibleInventory]";function Fi(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Li))||i).trace(""+Li);var o,n=(t._getLastParameters()||{}).vnVisibleInventory||{},s=n.urls,l=n.important,d=n.global;(l||d||s&&s.length)&&t.setControlData(Ni,((o={urls:s})[_.a]=l,o),d);e(t)}))}var Wi=r(8),Hi="vnMinPlayerSize",zi="::Extension[vnMinPlayerSize]",Bi=function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,zi))||i).trace(""+zi);var o,n=(t._getLastParameters()||{}).vnMinPlayerSize||{},s=n.size,l=n.important,d=n.global;(l||d||s&&(s.width||s.height))&&t.setControlData(Hi,((o={size:s})[_.a]=l,o),d);e(t)}))};function Ui(t,e){void 0===e&&(e="minPlayerSize"),(this.logger||a.a).trace(".parseVnMinPlayerSizeObject()");var r,i,o=t&&(e?t[e]:t)||{};if("string"==typeof o){var n=o.split("x");r=n[0],i=n[1]}else Array.isArray(o)?(r=o[0],i=o[1]):(r=o.width,i=o.height);var s={};return r&&(s.width=parseInt(r,10)),i&&(s.height=parseInt(i,10)),{size:s}}function qi(t){var e,r=t.getControlData(Hi)||{},i=r.size,o=r.fatal,n=i||{},a=n.width,s=n.height;if(!a&&!s)return null;var l=t.format,d=l&&(null===(e=l.getSlotSize)||void 0===e?void 0:e.call(l))||{},c=d.width,u=d.height;if(s&&!u)return t._addVPAIDEventListener(t,"AdStarted",(function(){var e=qi(t);e&&Wi.i.call(t,e,!0)})),null;if(a&&c<a||s&&u<s){var h=Xi(t),p=h.topWindow,g=h.contentParent;return Gi("\n    width: "+c+";\n    minWidth: "+a+";\n    height: "+u+";\n    minHeight: "+s+"\n    Viewport: "+(p?p.innerWidth:"Unknown")+";\n    Container width: "+g.offsetWidth+";\n    Ratio: "+c/g.offsetWidth+"`\n",!!o)}return null}function Gi(t,e){void 0===e&&(e=!1);var r=Error("Wrong slot size was detected: "+t);return r.code=o.a.AD_SIZE_ERROR,r.message=t,r.fatal=e,r}function Xi(t){var e=t.environmentVars,r=t.getControlNode("slot")||e.slot,i=Object(g.l)(window),o=i&&Object(g.h)(i)||Object(g.x)(window),n=o&&o.querySelector("body"),a=Object(m.g)(r,n).reverse(),s=n;return a.length&&a.forEach((function(t){s===n&&t.offsetWidth!==n.offsetWidth&&(s=t)})),s.documentElement&&(s=s.documentElement),{topWindow:i,contentParent:s}}var Ji=function(){function t(t,e,r){void 0===r&&(r=console),this.handler=e,this.timeout=t,this.log=r&&r.trace||console.log,this.id=null,this.startedTime=null,this.isStarted=!1,this.log(" InterruptibleTimeout constructor() timeout="+t)}var e=t.prototype;return e.start=function(){var t=this,e=this.timeout,r=this.handler;!this.startedTime&&e&&(this.startedTime=Date.now(),this.isStarted=!0,this.id=setTimeout((function(){t.log(" InterruptibleTimeout.start() setTimeout global timeout "+e+" expired this.id:"+t.id+" "),t.stop(),r()}),e),this.log(" InterruptibleTimeout.start() global timeout starts with "+e+" id:"+this.id))},e.pause=function(t){void 0===t&&(t="was paused");var e=this.id,r=this.timeout,i=this.startedTime,o=this.handler,n=this.isStarted;if(e&&r&&i&&n){this.isStarted=!1;var a=Date.now()-i;this.startedTime=0,clearTimeout(e),this.timeout-=a,this.log(" InterruptibleTimeout.pause() global timeout "+t+". the rest of timeout is "+this.timeout+" dif="+a+" id:"+e),this.timeout<=0&&(this.stop(),o&&o())}},e.stop=function(){this.log(" InterruptibleTimeout stop() id:"+this.id),this.id&&this._destroy()},e._destroy=function(){this.log(" InterruptibleTimeout _destroy() id:"+this.id),clearTimeout(this.id),this.isStarted=!1,this.timeout=0,this.id=null},t}(),Qi=r(16),Yi=r(17);function Zi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ki(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zi(Object(r),!0).forEach((function(e){$i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function to(t,e,r){var i=this,o=Ki({},t&&(e?t[e]:t));if(Object(g.r)(o))return null;var n=eo(o);io(o);var a=Object.entries(o).reduce((function(t,e){var r=e[0],o=e[1],n=s.call(i,o);return Object(g.r)(n)||(t[r]=n),t}),{});return Object(g.r)(a)?null:Ki({},n,{},a);function s(t){var e=eo(t)||{},i=r.call(this,t);return i?"object"!=typeof i||Array.isArray(i)?i:Ki({},i,{},e):null}}function eo(t,e){if(void 0===e&&(e={}),!t)return e;var r=t.global,i=t.important,o=t.overwrite,n=t.fatal,a=t.remove;r&&(e.global=r);var s=Object(g.u)(i);s&&(e[_.a]=s);var l=Object(g.u)(n);return l&&(e.fatal=l),Object(g.u)(a)&&(e[_.d]=!0),null!=o&&(e[_.b]=o),e}function ro(t,e,r,i){void 0===r&&(r={}),void 0===i&&(i={});var o=i,n=o.processValue,a=void 0===n?function(t){return t}:n,s=o.includeCondition,l=void 0===s?function(){return!0}:s;return t&&[].concat(e).forEach((function(e){var i=t[e];e&&l(i)&&(r[e]=a(i))})),r}function io(t){return t&&w.l.forEach((function(e){return delete t[e]})),t}var oo=function(t){var e=t||{},r=e.options,i=e.important,o=Object(g.u)(i);if(Object(g.r)(r))return null;var n=Object.keys(r).reduce((function(t,e){var n,a=r[e];if(void 0===a)return t;var s=t[e]=((n={})[_.e]=a,n[_.c]=!0,n);return null!=i&&(s[_.a]=o),t}),{});return null!=i&&(n[_.a]=o),n};function no(t,e){var r=t&&(e?t[e]:t)||{};if("string"==typeof r)return{urls:r.split(",")};if(Array.isArray(r))return{urls:r};var i=e?to.call(this,t,e,o.bind(this)):o.call(this,t);return i&&i.length&&i[0]||i||null;function o(t){return t?"string"==typeof t?[t]:t:null}}var ao=r(21),so="::PreprocessDataUrl[clientinfo]",lo="Module::PreprocessDataUrl[weborama]",co="{weborama_data}",uo="//wam.solution.weborama.fr/fcgi-bin/dispatch.fcgi?d.A=prd&d.key=n9d9C9I4XN1I&d.format=json&d.top_clusters=10",ho="Module::PreprocessDataUrl[roxot]",po="{roxot_data}";function go(t,e){try{var r=localStorage.getItem(e);return null===r&&(r=1+Math.floor(Math.random()*t),localStorage.setItem(e,r)),""+r}catch(e){return""+(t+1)}}function fo(){return""+(1+Math.floor(100*Math.random()))}var vo=[function(t){var e=t.url,r=t.module;return new Promise((function(t){var i,o=r&&r.getAPI&&r.getAPI().logger||a.a,n=(null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,so))||o;if(ao.a.CLIENT_INFO_DOMAINS.some((function(t){return~e.indexOf(t)}))){n.trace(so+" Injecting client info:"),b.f||(n.trace(so+" Injecting flash=0"),e=Object(w.a)(e,{flash:0}));var s=r.adWidth,l=r.adHeight;s&&l&&(n.trace(so+" Injecting size w="+s+" & h="+l),e=Object(w.a)(e,{w:s,h:l}));var d=Object(g.j)(window,document);d&&(n.trace(so+" Injecting location="+d),e=Object(w.a)(e,{location:d}))}t({url:e,module:r})}))},function(t){var e=t.url,r=t.module;return new Promise((function(t){var i,o=r&&r.getAPI&&r.getAPI().logger||a.a,n=(null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,lo))||o;if(-1!==e.indexOf(co)){n.trace(lo+" Injecting weborama data:");new Promise((function(t){var e,r=Date.now(),i=r-864e5;try{e=JSON.parse(localStorage.getItem(uo))}catch(t){n.warn(lo+" Failed to get weborama data from localStorage: "+t)}e&&e.timestamp>i?(n.trace(lo+" Using cached weborama data"),t(e)):(n.trace(lo+" Fetching weborama data from "+uo),Object(Ue.f)(uo).then((function(e){var i={};try{i=JSON.parse(e.target.responseText)}catch(t){n.warn(lo+" Failed to parse weborama data: "+t)}n.trace(lo+" Retrieved weborama data: "+e.target.responseText),t({timestamp:r,data:i})})).catch((function(e){n.warn(lo+" Failed to retrieve weborama data: "+e.target.statusText),t({})})))})).then((function(t){return new Promise((function(e){try{localStorage.setItem(uo,JSON.stringify(t))}catch(t){n.warn(lo+" Failed to save weborama data to localStorage: "+t)}finally{e(t)}}))})).then((function(t){return new Promise((function(r){var i=t&&t.data||{},o=i.socio_demographics||{},a="&"+Object(w.a)("",{puid33:o.gender||"",puid34:o.age||"",puid35:o.social_class||"",puid36:(i.clusters||[]).slice(0,10).join(":"),puid37:(i.audiences||[]).slice(0,10).join(":")}).substr(1).replace("%3A",":"),s=e.replace(co,a);n.trace(lo+" Injected weborama data"),r(s)}))})).then((function(e){return t({url:e,module:r})}))}else t({url:e,module:r})}))},function(t){var e=t.url,r=t.module;return new Promise((function(t){var i,o=r&&r.getAPI&&r.getAPI().logger||a.a,n=(null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,ho))||o;if(-1!==e.indexOf(po)){n.trace(ho+" Injecting roxot data");var s={};[{key:"roxot-group-id",f:go.bind(null,1e3)},{key:"roxot-sector-id",f:go.bind(null,100)},{key:"roxot-deep",f:go.bind(null,100)},{key:"roxot-event-group-id",f:fo.bind(null)},{key:"roxot-event",f:fo.bind(null)},{key:"roxot-event-deep",f:fo.bind(null)},{key:"roxot-minutes",f:function(){return(new Date).getUTCMinutes().toString()}},{key:"roxot-hours",f:function(){return(new Date).getUTCHours().toString()}},{key:"roxot-day",f:function(){return(new Date).getUTCDay().toString()}}].forEach((function(t){s[t.key]=t.f(t.key)})),t({url:e.replace(po,Object(w.a)("",s).substr(1)),module:r})}else t({url:e,module:r})}))}];function mo(t){return this.logger.trace(".preprocessDataUrl("+t+")"),Object(g.b)(vo,{url:t,module:this}).then((function(t){return t.url}))}function bo(t){yo.call(this,t)||(this.failedInsertingFormatOptions=(this.failedInsertingFormatOptions||[]).concat(t))}function yo(t){return(this.failedInsertingFormatOptions||[]).some((function(e){return r=e,i=t,Object.entries(r).every((function(t){var e=t[0],r=t[1];return i[e]==r}));var r,i}))}function Ao(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Oo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ao(Object(r),!0).forEach((function(e){wo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _o="vnFormat",So="::Extension[vnFormat]";function Po(t,e){void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseVnFormat()");var r=Object(w.i)(t,_o,Co,{parentPrefix:e,multipleOptionName:"Format"});if(r){var i=Object.values(r),o=i&&i.length&&i[0];if("object"!=typeof o)throw Error(So+".parseVnFormat() invalid type");return o}return null}function Co(t){var e=Object(w.d)(t,"name")||t.getAttribute("name"),r=Object(w.k)(t),i={name:e};return r&&(i.options=r),i}function jo(t,e){void 0===e&&(e="vnFormat"),(this.logger||a.a).trace(".parseVnFormatObject()");var r=e?to.call(this,t,e,Eo.bind(this)):Eo.call(this,t);return r&&r.length?r[0]:r}function Eo(t){var e=Oo({},t),r=(e||{}).name;if(!r)return null;var i=eo(e,{name:r});io(e);var o=oo(e);return o&&(i.options=o),i}function Do(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Io(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Do(Object(r),!0).forEach((function(e){To(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Do(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function To(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ko="vnControls",Vo="::Extension[vnControls]";var Ro={adlabel:"title",countdown:"skipAdCountdown",close:"skipAd",logo:"logo",soundbtn:"volume",progress:"progress",progressbar:"progressBar",advlogo:"advLogo",callbutton:"callButton",moreinfo:"moreInfo",bottomborder:"bottomBorder",video:"slot",play:"play",spinner:"spinner",videoclick:"videoclick",collapsingthumbnail:"CollapsingThumbnail"},Mo={background:"background",containerbackground:"containerBackground",videobackground:"videobackground",maincontainer:"mainContainer"},xo={layout:function(t){return"0"===t?{css:m.n}:{css:m.r}},display:function(t){return{css:{display:t}}},action:function(t){return{action:t}},enablewithvpaid:function(t){return{enableWithVPAID:t}},width:function(t){return{css:{width:t}}},height:function(t){return{css:{height:t}}},color:function(t){return{css:{color:t,fill:t,stroke:t}}},bgcolor:function(t){return{css:{backgroundColor:t}}},hoverbgcolor:function(t){return{hoverBackgroundColor:t}},hovercolor:function(t){return{hoverColor:t}},imgsrc:function(t){return{css:{backgroundImage:"url("+t+")"}}},padding:function(t){return{css:{padding:t}}},text:function(t){return{text:t}},url:function(t){return{url:t}},type:function(t){return void 0!==t&&t?{isIframe:"iframe"===t.toLowerCase()}:{}},position:function(t){return{position:t}},marginh:function(t){return{marginH:t}},marginv:function(t){return{marginV:t}},valign:function(t,e){var r=e.getControlNode("slot");r&&Object(m.c)(r,{top:t,transform:"translate(-50%, -"+t+")"})},overwrite:function(t){var e;return(e={})[_.b]=t,e},logosrc:function(t){return{customerlogo:{logoSrc:t}}},logoheight:function(t){return{customerlogo:{logoHeight:t}}},logowidth:function(t){return{customerlogo:{logoWidth:t}}},totaltimecountdown:function(t){return{totalTimeCountdown:t}},remove:function(t){return{remove:Object(g.u)(t)}},important:function(t){var e;return(e={})[_.a]=Object(g.u)(t),e}};function No(t,e){return void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseVnControls()"),Object(w.i)(t,ko,Lo.bind(this),{parentPrefix:e})}function Lo(t){var e=this,r=t.querySelectorAll("control");if(r){var i=Array.from(r).reduce((function(t,r){var i={},o=r.getAttribute("id");i.id=o,i.parsePoint=!0;try{var n=Object(w.e)(r);n&&(i.css=JSON.parse(n)),r&&r.getAttributeNames&&r.getAttributeNames().forEach((function(t){return i[t]=r.getAttribute(t)})),i.global=Object(g.u)(i.global)}catch(t){e.logger.warn(Vo+" Failed to parse CSS JSON of control "+o+" ("+t+")")}return o&&(t[o]=i),t}),{});if(!Object(g.r)(i))return{controls:i}}return null}function Fo(t,e){void 0===e&&(e="vnControls");var r=to(t,e,(function(t){if(Object(g.r)(t))return null;var e=Io({},t),r=eo(e,{});return io(e),ro(e,"enableWithVPAID",r,{processValue:function(t){return Object(g.u)(t)}}),ro(e,"remove",r,{includeCondition:function(t){return null!=t},processValue:function(t){return Object(g.u)(t)}}),r.parsePoint=!0,r}));return Object(g.r)(r)?null:{controls:r}}var Wo="vnAdErrorsRules",Ho="::Extension[vnAdErrorsRules]",zo=ao.a.ERRORS_TRACKING_DOMAIN;function Bo(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||a.a).trace(Ho+".parseVnAdErrorsRules()"),Object(w.i)(t,Wo,Uo,{parentPrefix:e})}function Uo(t){var e=qo(t&&t.querySelector("include")),r=qo(t&&t.querySelector("exclude")),i=Object(w.d)(t,"availableUrlsPattern");return e||r||i?{include:e,exclude:r,availableUrlsPattern:i}:null}function qo(t,e){void 0===e&&(e={optionName:"code"});var r=Object(w.k)(t,e);return r&&Object.keys(r).forEach((function(t){r[t][_.e]=t})),r}function Go(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Go(Object(r),!0).forEach((function(e){Jo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qo="vnSkipTime",Yo="::Extension[skipTime/skipTime2]";function Zo(t,e){void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseSkipTime()");var r=t.querySelector("Linear[skipoffset]"),o=r&&r.getAttribute("skipoffset");o&&(o=~o.indexOf("%")?function(t,e){var r=Object(i.b)(t),o=.01*parseInt(e.substr(0,2),10);return r&&Math.floor(Object(w.g)(r)*o)||NaN}(t,o):Object(w.g)(o));var n=w.i.call(this,t,"skipTime",Ko,{parentPrefix:e});return Object(g.r)(n)&&(n=w.i.call(this,t,"skipTime2",Ko,{parentPrefix:e})),Object(g.r)(n)?null!=o&&{skipTime:o}||null:Xo({},n,{},null!=o&&{skipTime:o})}function Ko(t){if(!t)return null;var e=Object(w.e)(t)||Object(w.d)(t,"value");return null==e?null:{skipTime:Object(w.g)(e),strict:Object(w.d)(t,"strict")||Object(g.u)(t.getAttribute("strict"))}}function $o(t,e){void 0===e&&(e="vnSkipTime");var r=to(t,e,(function(t){if(Object(g.r)(t))return null;if("string"==typeof t)return Object(w.g)(t);var e=Xo({},t),r=eo(e,{});io(e);var i=e.value;return delete r.value,r.skipTime=i&&Object(w.g)(i)||0,r}));return Object(g.r)(r)?null:r}function tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function en(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(r),!0).forEach((function(e){rn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var on="vnProhibitedWords",nn="::Extension[vnProhibitedWords]";function an(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||a.a).trace(nn+".parseVnProhibitedWords()"),w.i.call(this,t,on,sn,{parentPrefix:e})}function sn(t){if(t){this.logger.trace(nn+" parseVnProhibitedWords");var e=Object(w.k)(t),r=Object(g.u)(Object(w.d)(t,"fatal")),i=t&&t.querySelector("words"),o=i&&Object(w.e)(i).replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),n=Object(w.e)(t,"selector")||"",a=t.querySelectorAll("blockedMetrics"),s=a&&Array.from(a).map((function(t){return Object(w.e)(t)}));return e||o||n||s?{options:e,pattern:o,selector:n,trackings:s,fatal:r}:null}return null}function ln(t,e){void 0===e&&(e="vnProhibitedWords"),(this.logger||a.a).trace(".parseVnProhibitedWordsObject()");var r=e?to.call(this,t,e,dn.bind(this)):dn.call(this,t);return r&&r.length&&r[0]||r||null}function dn(t){var e=en({},t),r=eo(e);io(e);var i=e.words,o=e.selector,n=e.blockedMetrics,a=i.replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),s=[].concat(n);return a||o||s?en({},r,{pattern:a,selector:o,trackings:s}):null}var cn=r(29),un=r.n(cn),hn=r(25),pn=r.n(hn),gn=r(30),fn=r.n(gn);function vn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function mn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bn={shouldCreateIframe:!0,cssClass:"vn-container-iframe",attributes:{height:"100%",width:"100%",hspace:0,vspace:0,marginHeight:0,marginWidth:0},iframeAttributes:{allow:"autoplay",allowfullscreen:"",mozallowfullscreen:"",webkitallowfullscreen:""},styles:{position:"relative",zIndex:1,width:"100%",height:"100%",padding:0,margin:0,border:"none",overflow:"hidden",maxWidth:"initial",maxHeight:"initial"},sandbox:"allow-same-origin allow-scripts allow-popups"};function yn(t,e){return void 0===e&&(e={}),new Promise((function(r){var i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(r),!0).forEach((function(e){mn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},bn,{},e||{}),o=i||{},n=o.shouldCreateIframe,a=o.attributes,s=o.styles,l=o.iframeAttributes,d=o.logger,c=o.sandbox,u=o.cssClass;d&&d.trace(".initIframe() Creating sandboxed iframe");var h=document.createElement(n?"iframe":"div");Object(m.v)(h,a),Object(m.c)(h,s),u&&h.classList.add(u),n&&(Object(m.v)(h,l||{}),h.sandbox=c);var p=Object(m.w)(h,{onload:function(){d&&d.trace(" createIframe() initIframe() @load"),clearInterval(p),r(h)}});n&&(h.src=b.i?"javascript:":"about:blank"),t&&t.appendChild(h),d&&d.log(" createIframe() onFrameLoaded() sandboxed iframe was appended")}))}function An(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function On(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _n="vnAfterplay",Sn="::Extension[vnAfterplay]",Pn=function(t){var e,r;function i(e){var r,i,o=e.module,n=o&&o.getAPI&&o.getAPI().logger||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Sn))||n;return wn(On(i=t.call(this,{ancestor:Sn,logger:s})||this),"_onAdError",(function(){i._isAdErrorDispatched=!0})),wn(On(i),"_onAdDestroyed",(function(){var t,e,r=null===(t=i._module)||void 0===t||null===(e=t.getControlUnionData(_n,null,(function(t){return t.parsePoint})))||void 0===e?void 0:e.function,o=On(i).afterplayTimeoutId;i.logger.trace(Sn+" @AdDestroyed Clearing auto close timeout ("+o+")",2),clearTimeout(o);var n=window[r];if(n&&!i._isAdErrorDispatched){var a=On(i)._formatExpandingDuration;setTimeout((function(){try{n()}catch(t){console.error(""+t)}}),(a||0)+100)}})),i.module=o,i.moduleAPI=o&&o.getAPI&&o.getAPI(),i.afterplayTimeoutId=null,i._isActive=!1,i._isReplay=!1,i._isRunning=!1,i._continueNumber=0,i._module=null,i._isAdErrorDispatched=!1,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.shouldShowStub=function(){return!this._getContinueNumber()&&this._isActive},o.isReplay=function(){return this._isReplay},o._getContinueNumber=function(){return this._continueNumber},o._getCycleCounter=function(){return this.module._cycleCounter||0},o._incCycleCounter=function(){var t=this.module;return t._cycleCounter||(t._cycleCounter=0),++t._cycleCounter},o._setSuccessfulPlays=function(t){var e=this.module,r=this._getCycleCounter(),i=e._successfulPlaysCounters;i||(i=e._successfulPlaysCounters=[]),i[r]=t},o._getSuccessfulPlays=function(){var t=this.module,e=this._getCycleCounter(),r=t._successfulPlaysCounters;return r&&r[e]||0},o._getTotalSuccessfulPlays=function(){var t=this.module._successfulPlaysCounters;return t&&t.reduce((function(t,e){return t+e}),0)||0},o._incSuccessfulPlays=function(){var t=this.module,e=this._getContinueNumber();if(this._getTotalSuccessfulPlays()<e){var r=this._getCycleCounter(),i=t._successfulPlaysCounters;i||(i=t._successfulPlaysCounters=[]),i[r]||(i[r]=0),i[r]+=1}return this._getTotalSuccessfulPlays()},o.shouldContinue=function(){var t=this._getTotalSuccessfulPlays(),e=this._getContinueNumber();return e>=0&&t<e},o.init=function(t){var e=this;return this._module=t,new Promise((function(r){t.vnAfterplay=e,[].concat((t._getLastParameters()||{}).vnAfterplay||null).filter((function(t){return t})).forEach((function(r){e.logger.trace(Sn+" Init"),t.setControlData(_n,r,r.global)}));var i=t.getControlUnionData(_n,null,(function(t){return t.parsePoint}));if(i){var o=i.continueNumber;o?e._continueNumber=o+1:(e._continueNumber=0,e._addVPAIDEventListener(t,"AdVideoComplete",En.bind(e,t,i)),e._addVPAIDEventListener(t,"AdSkipped",En.bind(e,t,i)),e._addVPAIDEventListener(t,"AdError",e._onAdError),e._addVPAIDEventListener(t,"AdDestroyed",e._onAdDestroyed),e.manualRun=function(){return En.call(e,t,i)}),e._isActive=!0,e._isReplay=!1}r(t)}))},o._destroy=function(){t.prototype._destroy.call(this)},i}(n.a);function Cn(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||a.a).trace(Sn+".parseVnAfterPlay()"),Object(w.i)(t,_n,jn,{parentPrefix:e})}function jn(t){if(!t)return null;var e={},r=parseInt(Object(w.e)(t,"continue"),10);if(!r>0){var i=t.querySelector("continue");r=i&&parseInt(i.getAttribute("value"),10)}if(r>0)return{continueNumber:r,parsePoint:!0};e.fgColor=Object(w.e)(t,"color","white"),e.bgColor=Object(w.e)(t,"bgColor","black"),e.function=Object(w.e)(t,"function"),e.timeout=Object(w.g)(Object(w.e)(t,"time"));var o=t.querySelector("replay");if(o){var n=Object(w.e)(o,"label","  "),a={},s=o.querySelectorAll("clickTracking");a.clicks=s&&Array.from(s).map((function(t){return Object(w.e)(t)})),e.replay={title:n,trackings:a}}var l=t.querySelector("close");if(l){var d=l&&Object(w.e)(l,"label",""),c={},u=l.querySelectorAll("clickTracking");c.clicks=u&&Array.from(u).map((function(t){return Object(w.e)(t)})),e.close={title:d,trackings:c}}var h=t.querySelector("advertiser");if(h){var p=Object(w.e)(h,"label","   "),g=Object(w.e)(h,"url")||Object(w.e)(t,"ClickThrough"),f={};if(Object(w.e)(h,"clickTracking",!1)){var v=h.querySelectorAll("clickTracking");f.clicks=v&&Array.from(v).map((function(t){return Object(w.e)(t)}))}else{var m=t.querySelectorAll("VideoClicks ClickTracking");f.clicks=m&&Array.from(m).map((function(t){return Object(w.e)(t)}))}e.advertiser={title:p,url:g,trackings:f}}var b=t.querySelector("featured");if(b){var y=Object(w.e)(b,null,"");e.featured={html:y}}return e.parsePoint=!0,e}function En(t,e){var r=this;this.logger.trace(Sn+" Afterplay"),be.d.call(t,"afterplay");var i=10*(b.h&&window.devicePixelRatio||0),o=e.function,n=e.fgColor,a=e.bgColor,s=this.afterplayTimeoutId,l=(this.moduleAPI||{}).getOptions,d=(l&&l()||{}).formatExpandingDuration;if(this._formatExpandingDuration=d||0,o){if(window[o])return this.logger.log(Sn+' function "'+o+'" was called.'),clearTimeout(s),this._isActive=!1,void t.stopAd();this.logger.warn(Sn+' function "'+o+'" not found.')}var c=t.getControlNode("wrapper"),u=t.getControlNode("skipAd"),h=t.getControlUnionData(_n,"css")||{},p=Object(m.b)(c,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?An(Object(r),!0).forEach((function(e){wn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:4,top:0,right:0,bottom:0,left:0,overflow:"hidden"},h)),g=e.advertiser,f=e.replay,v=e.close,y=f||g||v,A=Object(m.b)(p,"div",{display:y?"flex":"block",alignItems:"stretch",width:"100%",height:"100%",fontSize:100-i+"%",lineHeight:1.5,fill:n,stroke:n,color:n,backgroundColor:a,userSelect:"none"});if(u&&Object(m.c)(u,{display:"none"}),y){var O=Object(m.b)(A,"div",{flex:"1 1 50%",display:"flex",flexFlow:"column nowrap",justifyContent:"center"});O.className="afterplay-controls";var w=function(t,e,r,o){var n=Object(m.b)(t,"div",{display:"flex",alignItems:"center",padding:"2% 4%",cursor:"pointer",boxSizing:"border-box",textAlign:"left"},null,o);return Object(m.b)(n,"div",{flex:"1 1 10%",maxWidth:"50px",minWidth:"20px",maxHeight:"50px",minHeight:"20px",transform:"scale("+(1-i/100)+")"},e),Object(m.b)(n,"div",{flex:"1 1 90%",paddingLeft:"10px"},r),b.h||(n.addEventListener("mouseenter",(function(){return Object(m.c)(n,{opacity:.8})})),n.addEventListener("mouseleave",(function(){return Object(m.c)(n,{opacity:1})}))),n},_=t.isVpaidJs();if(_&&this.logger.log(Sn+"::Replay The ad that has been played was VPAID so we can not replay the same ad. Replay is not available."),f&&!_){var S=f.title,P=f.trackings;w(O,un.a,S,(function(){r.logger.trace(Sn+"::Replay @click Clearing updateVolume timeout ("+s+")"),clearTimeout(s),Object(m.t)(p);var e=(P||{}).clicks;e&&Wi.m.call(t,e),t._replay(),r._isReplay=!0,u&&t&&t.adSkippableState&&Object(m.c)(u,{display:"block"})})).className="___vn-replay-control_replay___"}if(g){var C=g.title,j=g.trackings,E=g.url;if(E||(E=t._getLastParameters().ClickThrough)&&this.logger.log(Sn+"::Advertiser @AdStopped advertiser's url is not defined so got url from last VAST's VideoClicks->ClickThrough ("+E+")"),E)w(O,pn.a,C,(function(){r.logger.trace(Sn+"::Advertiser @click Clearing updateVolume timeout ("+s+")"),clearTimeout(s);var e=(j||{}).clicks;e&&Wi.m.call(t,e),Object(Ue.b)(E)})).className="___vn-replay-control_open_url___"}if(v){var D=v.title,I=v.trackings;w(O,fn.a,D,(function(){r.logger.trace(Sn+"::Close @click Clearing updateVolume timeout ("+s+")"),clearTimeout(s);var e=(I||{}).clicks;e&&Wi.m.call(t,e),r._isActive=!1,t.stopAd()}))}u&&Object(m.c)(u,{display:"none"})}var T=e.featured;T&&Dn.call(this,t,T,A,y);var k=e.timeout;k&&k<1/0&&(this.logger.log(Sn+" Afterplay auto close timeout "+1e3*k+"ms"),this.afterplayTimeoutId=setTimeout((function(){r.logger.log(Sn+" Afterplay auto close timeout reached",1),t._destroy()}),1e3*k))}function Dn(t,e,r,i){var o=this,n=i?{flex:"1 1 50%"}:{},a=Object(m.b)(r,"div",n);a.className="afterplay-featured",yn(a,{shouldCreateIframe:!0,logger:this.logger,sandbox:"allow-forms allow-same-origin allow-pointer-lock allow-scripts allow-popups allow-top-navigation"}).then((function(r){var i=e.html,n=r.contentDocument&&r.contentDocument.body||r;n.innerHTML=i;var a=n.getElementsByTagName("script");if(a){var s=o,l=t.getControlNode("iframe");(l&&l.contentWindow||window).VIDEONOW={subscribe:t.subscribe.bind(t)},function(t,e){!function r(i){var o=a.item(i);if(o)if(o.src){var n=e.createElement("script");n.src=o.src,n.onload=r.bind(this,i+1);var l=e.getElementsByTagName("head")[0];try{l.appendChild(n)}catch(t){s.logger.warn(Sn+' Failed to execute featured script src="'+n.src+'" ('+t+")")}}else{try{t.eval(o.innerHTML)}catch(t){s.logger.warn(Sn+" Failed to execute featured script ("+t+")")}r(i+1)}}(0)}(r.contentWindow||window,r.contentDocument||document)}}))}var In="vnAdEvents",Tn="::Extension[vnAdEvents]",kn=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdVideoComplete","AdClickThru","AdLog","AdError","AdAudioOnlyStart","AdReadyToShow"],Vn=function(t){var e,r;function i(e){var r,i=e.module,o=i&&i.getAPI&&i.getAPI().logger||a.a,n=(null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,Tn))||o;return t.call(this,{ancestor:Tn,logger:n})||this}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype.init=function(t){var e=this;return new Promise((function(r){t.vnAdEvents=e,e.logger.trace(""+Tn);var i=t._getLastParameters(),o=i&&i.vnAdEvents||{},n=o.global,a=o.handlerName,s=o.vnFunction,l=o.vnScriptUrl,d=o.events;(a||s||l||d&&d.length)&&t.setControlData(In,{handlerName:a,vnFunction:s,vnScriptUrl:l,events:d},n),a=t.getControlUnionData(In,"handlerName"),d=t.getControlUnionData(In,"events"),s=t.getControlUnionData(In,"vnFunction"),(l=t.getControlUnionData(In,"vnScriptUrl"))||s||(a&&d.forEach((function(r){return e._addVPAIDEventListener(t,r,(function(){window[a]&&window[a](t.mainModuleId,r)}))})),r(t))}))},i}(n.a);function Rn(t){var e=t&&t.querySelector('Extensions > Extension[type="vnAdEvents"]'),r=e&&e.querySelector("function"),i=e&&e.querySelector("scriptUrl"),o=i&&decodeURIComponent(i),n=Object(w.d)(e,"global"),a=Object(w.d)(e,"handlerName"),s=Object(w.d)(e,"events"),l=s&&s.length?"*"===s?"*":s.split(/[\s+,]/):null,d=l&&l.length?"*"===l?kn:kn.filter((function(t){return l.indexOf(t)>-1})):null;return n||a||d||r||o?{global:n,handlerName:a,events:d,vnFunction:r,vnScriptUrl:o}:null}var Mn="vnEventsParams",xn="::Extension[vnEventsParams]";function Nn(t){var e=t&&t.querySelector('Extension[type="vnEventsParams"]');return e?{eventsParams:Object(w.k)(e,{optionName:"Event",onlyTopLevel:!0}).reduce((function(t,e){var r=e.getAttribute("name"),i=Object(w.k)(e,{optionName:"Parameter"});return r&&i&&(t[r]=i),t}),{}),global:Object(w.d)(e,"global"),important:Object(w.d)(e,"important")||e.getAttribute("important")}:null}var Ln="vnCreative",Fn="::Extension[vnCreative]";function Wn(t,e){return void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseVnCreative()"),Object(w.i)(t,Ln,Hn,{parentPrefix:e})}function Hn(t){var e=Object(w.d)(t,"global"),r=Object(w.d)(t,"important"),i=["debug","passed","passed2","select","impression"].reduce((function(i,o){var n=t&&t.querySelector(o);if(n){var a=Object(w.d)(n),s=zn(n,"global"),l=zn(n,"important");i[o]={url:a,important:Bn(r,l),global:Bn(e,s)}}return i}),{});return Object(g.r)(i)?null:i}function zn(t,e){var r=t.getAttribute(e);return"true"===r||"false"!==r&&null}function Bn(t,e){return null==t?e:null==e?t:t&&e}var Un=r(24),qn="vnBrowserCache",Gn="::Extension[vnBrowserCache]";function Xn(t){this.logger.trace(Gn+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="vnBrowserCache"]');return e?{enabled:"true"===e.getAttribute("enabled"),global:"true"===e.getAttribute("global"),important:"true"===e.getAttribute("important")}:null}var Jn="vnCache",Qn="::Extension[vnCache]";function Yn(t){this.logger.trace(Qn+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="vnCache"][caching="true"]');if(e){var r="true"===e.getAttribute("global"),i="true"===e.getAttribute("important");return{serverUrl:e.getAttribute("serverUrl"),strict:"true"===e.getAttribute("strict"),global:r,important:i}}return null}var Zn="vnPageChanged",Kn="::Extension[vnPageChanged]",$n=function(t){var e,r;function i(e){var r,i,o=e.module,n=o&&o.getAPI&&o.getAPI().logger||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Kn))||n;return(i=t.call(this,{ancestor:Kn,logger:s})||this).module=o,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.init=function(){var t=this,e=this.module;return new Promise((function(r){e.vnPageChanged=t,t.logger.trace(""+Kn);var i=e._getLastParameters(),o=i&&i.vnPageChanged||{},n=o.global,a=o.important,s=o.handlerName,l=o.eventName;s&&e.setControlData(Zn,{handlerName:s,important:a},n),(s=e.getControlUnionData(Zn,"handlerName"))&&(window[s]=function(){e._abort()}),l&&e.setControlData(Zn,{eventName:l,important:a},n),(l=e.getControlUnionData(Zn,"eventName"))&&t._addDOMEventListener(window.document,l,(function(){e._abort()})),r(e)}))},o._destroy=function(){t.prototype._destroy.call(this);var e=this.module.getControlUnionData(Zn,"handlerName");e&&delete window[e]},i}(n.a);function ta(t){var e=t&&t.querySelector('Extension[type="vnPageChanged"]'),r=Object(w.d)(e,"eventName"),i=Object(w.d)(e,"handlerName"),o=Object(w.d)(e,"global"),n=Object(w.d)(e,"important");return i||r||n||o?{global:o,important:n,eventName:r,handlerName:i}:null}var ea=r(31),ra=r.n(ea),ia="vnUnderplay",oa="::Extension[vnUnderplay]";function na(t){var e=t&&t.querySelector('Extension[type="vnUnderplay"]');if(!e)return null;var r=e.querySelector("url > clickTracking"),i=Object(w.e)(e,"url > url"),o=Object(w.e)(e,"html",""),n=Object(w.d)(e,"global"),a=Object(w.d)(e,"important"),s=Object(w.e)(e,"color"),l=Object(w.e)(e,"bgColor"),d=Object(w.e)(e,"bgImage"),c=Object(w.e)(e,"bgPosition","cover"),u=Object(w.e)(e,"opacity","1"),h=e.querySelector("close");return{global:n,important:a,html:o,clickTracking:r,openWindowUrl:i,color:s,backgroundColor:l,backgroundImage:d,backgroundSize:c,opacity:u,closeData:h&&{img:h.getAttribute("img"),time:h.getAttribute("time"),top:h.getAttribute("top"),right:h.getAttribute("right"),bottom:h.getAttribute("bottom"),left:h.getAttribute("bottom"),width:h.getAttribute("width"),height:h.getAttribute("height")}}}var aa="timer",sa="period_checking_timer",la="repeat_start_timer",da=2e3,ca=.5,ua={threshold:[ca]},ha=function(t){var e,r;function i(e,r){var i,o,n=r.moduleId,s=r.startEventName,l=r.trackUrlsAction,d=n,c=e&&e.getAPI&&e.getAPI().logger||a.a,u=(null==c||null===(i=c.getChildWriter)||void 0===i?void 0:i.call(c,"ViewableImpressionChecker"))||c;return(o=t.call(this,{ancestor:n,logger:u})||this).logger.trace(d+" constructor()"),o.trackUrlsAction=l,o._moduleId=n,o.module=e,o._checkingIsFinished=!1,o._observer=null,o._observerOptions=ua,o._addVPAIDEventListener(e,s,(function(){return o.start()})),o._addVPAIDEventListener(e,"AdPlaying",(function(){return o.start()})),o._addVPAIDEventListener(e,"AdPaused",(function(){return o.reset()})),o._addVPAIDEventListener(e,"AdVideoComplete",(function(){return o.stop()})),o._addVPAIDEventListener(e,"AdDestroyed",(function(){return o.stop()})),o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.start=function(t){var e=this;if(void 0===t&&(t=0),this._removeTimeout(la),!(this._checkingIsFinished||t>=10)){this.logger.trace(this._moduleId+" start() counter="+t),this.reset();var r=this.module,i=Xe.c.call(r),o=r.getControlNode("slot"),n=r.getControlNode("iframe"),a=o&&(o.clientHeight||parseInt(getComputedStyle(o).height,10))||0,s=i&&getComputedStyle(i)||{},l=i&&(i.clientHeight||parseInt(s.height,10))||0,d=!(!s.display||"none"===s.display),c=n&&(n.clientHeight||parseInt(getComputedStyle(n).height,10))||0,u=i&&d&&l?i:o&&a?o:n&&c?n:null;if(u){var h="We are waiting for continuous visibility of the module by 50%% during 2000 ms";if(window.IntersectionObserver)this.logger.log(this._moduleId+" start with IntersectionObserver. "+h),(this._observer=new IntersectionObserver(function(t){var e=this;t.forEach((function(t){var r=t.isIntersecting,i=t.intersectionRatio;r&&i>=ca?(e.logger.log(e._moduleId+" isIntersecting="+r+" intersectionRatio="+i+" >= 50%%"),e._addTimeout(aa,(function(){var t=e.trackUrlsAction;t&&t(),e.stop()}),da)):(e.logger.log(e._moduleId+" clear! isIntersecting="+r+" "+i),e._removeTimeout(aa))}))}.bind(this),this._observerOptions)).observe(u);else this.logger.log(this._moduleId+" start manually checking by timer. "+h),function(){var t=!1;function e(){var r=this;Object(g.o)(u).then((function(i){var o=i.intersectionRatio;o>=ca?t||(t=!0,r.logger.log(r._moduleId+" intersectionRatio="+o+" >= 50%%"),r._addTimeout(aa,(function(){var t=r.trackUrlsAction;t&&t(),r.stop()}),da)):(r.logger.log(r._moduleId+" clear! "+o),t=!1,r._removeTimeout(aa)),r._addTimeout(sa,e.bind(r),100)}))}e.call(this)}.call(this)}else this._addTimeout(la,(function(){return e.start(t+1)}),50)}},o.stop=function(){this.logger.trace(this._moduleId+" stop()"),this._removeTimeout(sa),this.reset(),this._checkingIsFinished=!0,this._destroy()},o.reset=function(){this.logger.trace(this._moduleId+" reset()"),this._removeTimeout(aa),this._removeTimeout(sa),this._checkingIsFinished=!1,this._observer&&(this._observer.disconnect(),this._observer=null)},i}(n.a),pa="vnOTMTrackViewable",ga="::Extension[vnOTMTrackViewable]",fa=function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,ga))||i).trace(""+ga);var o,n=(t._getLastParameters()||{}).vnOTMTrackViewable||{},s=n.urls,l=n.important,d=n.global;(l||d||s&&s.length)&&t.setControlData(pa,((o={urls:s})[_.a]=l,o),d);var c=t.getControlUnionData(pa,"urls");(null==c?void 0:c.length)&&(t._vnOTMTrackViewable&&t._vnOTMTrackViewable._destroy(),t._vnOTMTrackViewable=new ha(t,{moduleId:"::Plugin[ViewableImpressionOTM]",startEventName:"AdStarted",trackUrlsAction:Wi.m.bind(t,c)})),e(t)}))};function va(t,e){return void 0===e&&(e="trackViewable"),(this.logger||a.a).trace(".parseVnOTMTrackViewableObject()"),no.call(this,t,e)}var ma="vnOTMTrackRecordable",ba="::Extension[vnOTMTrackRecordable]",ya=function(t){var e,r;function i(e){var r,i,o=e.module,n=o&&o.getAPI&&o.getAPI().logger||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,ba))||n;return(i=t.call(this,{ancestor:ba,logger:s})||this).module=o,i}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype.init=function(){var t=this,e=this.module,r=e&&e.getAPI&&e.getAPI().logger||a.a;return new Promise((function(i){r.trace(""+ba);var o,n=(e._getLastParameters()||{}).vnOTMTrackRecordable||{},a=n.urls,s=n.important,l=n.global;(s||l||a&&a.length)&&e.setControlData(ma,((o={urls:a})[_.a]=s,o),l);var d=e.getControlData(ma,"urls");t._addVPAIDEventListener(e,"AdLoaded",Oa.bind(t,e,d)),i(e)}))},i}(n.a);function Aa(t,e){return void 0===e&&(e="trackRecordable"),(this.logger||a.a).trace(".parseVnOTMTrackRecordableObject()"),no.call(this,t,e)}function Oa(t,e){if((null==e?void 0:e.length)&&window.IntersectionObserver){var r=new IntersectionObserver((function(){}));r&&(r.disconnect(),setTimeout(Wi.m.bind(t,e)))}}var wa="vnDomainsBlockList",_a="::Extension[vnDomainsBlockList]",Sa=function(t){return new Promise((function(e,r){var i,o=t&&t.getAPI&&t.getAPI().logger||a.a;((null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,_a))||o).trace(""+_a);var n,s=(t._getLastParameters()||{}).vnDomainsBlockList||{},l=s.urls,d=s.important,c=s.global,u=s.fatal;(d||c||l&&l.length)&&t.setControlData(wa,((n={urls:l})[_.a]=d,n.fatal=u,n),c);var h=t.getControlData(wa)||{},p=h.urls,g=h.fatal;if(p){var f;try{f=Array.from(window.location.ancestorOrigins).map((function(t){return new URL(t).hostname}))}catch(t){}if(f&&f.some((function(t){if(p.includes(t)){var e=Error(' vn_module was placed in the forbidden domain "'+t+'"');return e.fatal=!!g,r(e),!0}})))return}e(t)}))};function Pa(t,e){return void 0===e&&(e="domainsBlockList"),(this.logger||a.a).trace(".parseVnDomainsBlockList()"),no.call(this,t,e)}var Ca=r(14),ja="vnDebug",Ea="::Extension[vnDebug]";function Da(t){this.logger.trace(Ea+".parseVnDebug()");var e=t&&t.querySelector('Extension[type="vnDebug"]');return e&&Object.values(Ca.a).includes(Number(e.getAttribute("logLevel")))?{logLevel:Number(e.getAttribute("logLevel"))}:null}var Ia="vnAdType",Ta="::Extension[vnAdType]";function ka(t){var e=t&&t.querySelector('Extension[type="vnAdType"]');return e?{adType:Object(w.d)(e,"adType")||e.getAttribute("adType"),global:Object(w.d)(e,"global")||e.getAttribute("global"),important:Object(w.d)(e,"important")||e.getAttribute("important")}:null}function Va(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ra(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ma="vnSets",xa="::Extension[vnSets]",Na="Set>";function La(t){var e=this;return Object(w.i)(t,Ma,(function(t){var r=t.getAttribute("name")||Object(w.d)(t,"Set> name");if(!r)return null;var i=Fa(t,e),o=Object.keys(i).reduce((function(t,e){var r=i[e]();return r&&(t[e]=r),t}),{});return o?(o.name=r,o):null}),{multipleOptionName:"Set"})}var Fa=function(t,e){return{vnFormat:function(){return Po.call(e,t,Na)},vnControls:function(){return No.call(e,t,Na)},vnSkipTime:function(){return Zo.call(e,t,Na)},vnCreative:function(){return Wn.call(e,t,Na)},vnNoAd:function(){return Ri.call(e,t,Na)},vnCreativeBlock:function(){return Un.b.call(e,t,Na)},vnBrowserCache:function(){return Xn.call(e,t,Na)},vnCache:function(){return Yn.call(e,t,Na)},vnProhibitedWords:function(){return an.call(e,t,Na)},vnAfterplay:function(){return Cn.call(e,t,Na)},vnAdEvents:function(){return Rn.call(e,t,Na)},vnPageChanged:function(){return ta.call(e,t,Na)},vnEventsParams:function(){return Nn.call(e,t,Na)},vnUnderplay:function(){return na.call(e,t,Na)},vnAdErrorsRules:function(){return Bo.call(e,t,Na)},vnDebug:function(){return Da.call(e,t,Na)},vnAdType:function(){return ka.call(e,t,Na)}}},Wa={vnFormat:function(t,e){return jo.call(e,t,null)},vnControls:function(t,e){return Fo.call(e,t,null)},vnProhibitedWords:function(t,e){return ln.call(e,t,null)},vnSkipTime:function(t,e){return $o.call(e,t,null)},vnOTMTrackRecordable:function(t,e){return Aa(e,t)},vnOTMTrackViewableObject:function(t,e){return va(e,t)},vnDomainsBlockList:function(t,e){return Pa(e,t)},vnMinPlayerSize:function(t,e){return Ui(e,t)}};function Ha(t,e){var r=this;return void 0===e&&(e="vnSets"),to(t,e,(function(t){var e=t.extensions;if(!e)return null;var i=io(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Va(Object(r),!0).forEach((function(e){Ra(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Va(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e));return Object.entries(i).reduce((function(t,e){var i=e[0],o=e[1],n=Wa[i];if(n){var a=n(o,r);!Object(g.r)(a)&&(t[i]=a)}return t}),{})}))}var za="vnSetsApply",Ba="::Extension[vnSetsApply]",Ua=["global","orderIndex","overwrite","important","name",_.a,_.b,_.e,_.c];function qa(t){return Object(w.i)(t,za,Ga,{multipleOptionName:"Set"})}function Ga(t){var e=Object(w.d)(t,"name")||t.getAttribute("name");return e&&{name:e}||null}var Xa=r(20);function Ja(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Qa(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ya="VpaidProxy",Za="AD_DURATION_TIMER_ID",Ka=function(t){var e,r;function n(e){var r,i;void 0===e&&(e={});var o=e&&e.ancestor&&e.ancestor+":"+Ya||"::VpaidProxy",n=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Ya))||n;return i=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(r),!0).forEach((function(e){Qa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ja(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{ancestor:o,logger:s}))||this,i.VpaidProxy=o,i.lastPendingCommands={},i._adWasLoaded=!1,i._countdown=null,i.fixedAdHeight=null,i}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var s=n.prototype;return s.getAdLinear=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdLinear():this.adLinear},s.getAdWidth=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdWidth():this.adWidth},s.getAdHeight=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdHeight():this.adHeight},s.getAdAspectRatio=function(){return Object(i.d)(this.vpaid)&&this.vpaid.getAdAspectRatio?this.vpaid.getAdAspectRatio():t.prototype.getAdAspectRatio.call(this)},s.getAdExpanded=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdExpanded():this.adExpanded},s.getAdSkippableState=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdSkippableState():this.adSkippableState},s.getAdRemainingTime=function(){var t=this._countdown,e=this.vpaid;return t?t.getAdRemainingTime():Object(i.d)(e)&&e.getAdRemainingTime()||this.adRemainingTime},s.getAdDuration=function(){var t=this.vpaid,e=this._countdown;this._checkingBanner;if(e)return e.getAdDuration();if(!this._countdown&&Object(i.d)(t)){var r=t.getAdDuration();r>0&&(this.adDuration=r)}return this.adDuration},s.getAdElapsedTime=function(){var e=this.vpaid;return Object(i.d)(e)&&e.getAdElapsedTime?e.getAdElapsedTime():t.prototype.getAdElapsedTime.call(this)},s.getAdVolume=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdVolume():this.adVolume},s.getAdCompanions=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdCompanions():this.adCompanions},s.getAdIcons=function(){return Object(i.d)(this.vpaid)?this.vpaid.getAdIcons():this.adIcons},s.handshakeVersion=function(t){return Object(i.d)(this.vpaid)?this.vpaid.handshakeVersion(t):t},s.initAd=function(t,e,r,i,n,a){this.trigger("AdError","Abstract method call",o.a.GENERAL_VPAID_ERROR)},s.resizeAd=function(t,e,r){void 0===r&&(r=this.viewMode),this.logger.trace(this.VpaidProxy+".resizeAd("+t+", "+e+")"),this.fixedAdHeight?(this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+") adHeight("+this.fixedAdHeight+") is fixed, so it was not changed"),e=this.adHeight=this.fixedAdHeight):this.adHeight=e,this.adWidth=t,this.viewMode=r,this._adWasLoaded&&Object(i.d)(this.vpaid)?(delete this.lastPendingCommands.resizeAd,this.vpaid.resizeAd(t,e,r),this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+", "+r+") executes IMMEDIATELY and clears pending command")):(this.lastPendingCommands.resizeAd=this.resizeAd.bind(this,t,e,r),this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+", "+r+") as pending command ("+this.lastPendingCommands.resizeAd+")"))},s.startAd=function(){try{var t=this.vpaid,e=this._countdown;if(Object(i.d)(t))return e&&e.start(),t.startAd()}catch(t){this.trigger("AdError",""+t,o.a.GENERAL_VPAID_ERROR)}return!1},s.stopAd=function(){var t=this._countdown,e=this.vpaid;Object(i.d)(e)&&(t&&t.stop(),e.stopAd())},s.pauseAd=function(){var t=this._countdown,e=this.vpaid;Object(i.d)(e)&&(t&&t.stop(),e.pauseAd())},s.resumeAd=function(){var t=this._countdown,e=this.vpaid;Object(i.d)(e)&&(t&&t.start(),e.resumeAd())},s.expandAd=function(){return Object(i.d)(this.vpaid)&&this.vpaid.expandAd()},s.collapseAd=function(){return Object(i.d)(this.vpaid)&&this.vpaid.collapseAd()},s.skipAd=function(){var t=this._countdown,e=this.vpaid;Object(i.d)(e)&&(t&&t.stop(),e.skipAd())},s.stopCountdown=function(){var t=this._countdown;t&&t.stop()},s.setAdVolume=function(t,e){if(this._adWasLoaded&&Object(i.d)(this.vpaid)){delete this.lastPendingCommands.setAdVolume;var r=this.VpaidProxy+".setAdVolume("+t+") executes IMMEDIATELY and clears pending command";return(0===t||1===t?this.logger.log:this.logger.trace)(r),Object(i.d)(this.vpaid)&&(this.adVolume=t,1)&&this.vpaid.setAdVolume(t,e)}this.lastPendingCommands.setAdVolume=this.setAdVolume.bind(this,t,e),this.logger.log(this.VpaidProxy+".setAdVolume("+t+") as pending command ("+this.lastPendingCommands.setAdVolume+")")},s.onAdLoaded=function(){var t=this,e=this.vpaid,r=this._countdown,o=this._checkingBanner;if(!r&&!o&&Object(i.d)(e)){this._checkingBanner=!0;var n=e.getAdDuration();n<0?(this.logger.warn(this.VpaidProxy+".getAdDuration() duration="+n+". May be vpaid is a banner."),this._addTimeout(Za,(function(){$a.call(t,n)}),500),this._addVPAIDEventListener(e,"AdDurationChange",es.bind(this))):this.adDuration=n}},s._destroy=function(){t.prototype._destroy.call(this),this.lastPendingCommands={};var e=this.vpaid;if(e&&"function"==typeof e._destroy)try{e._destroy()}catch(t){this.logger.warn(this.VpaidProxy+"._destroy() vpaid._destroy() error: "+(t&&(t.message||t)))}this.vpaid=null},s.getDebugInfo=function(){var t=this,e=this.vpaid;return(e&&Promise.resolve(e)||this.vpaidLoadPromise).then((function(t){return t&&t.getDebugInfo?t.getDebugInfo():Promise.resolve({})})).then((function(e){return{proxyOptions:t.options,options:e.options||{}}}))},s.getAdIframes=function(){var e=this.vpaid;return Object(i.d)(e)&&e.getAdIframes?e.getAdIframes():t.prototype.getAdIframes.call(this)},s.getModuleOptions=function(){return Promise.resolve({})},n}(i.a);function $a(t){var e=this,r=this.VpaidProxy+".getAdDuration() vpaid.getAdDuration() return "+t+". Switched to manual countdown";t=this.adDuration,isNaN(t)||t<=0?(r=r+". Can not get duration from VAST, so set duration="+(t=1/0)+" sec,",this.trigger("vnManualCountdownCreated",{duration:t})):r=r+" with duration="+t+" sec.",this.logger.log(r,2,"green"),this._countdown=new Xa.a({duration:t,VPAID_API:{trigger:this.trigger.bind(this)},logger:this.logger});var i=(this.options||{}).moduleAPI||{},o=i.inState,n=i.addVPAIDEventListener,a=o&&o(["playing"]),s=o&&o(["started","starting"]);return a||s?(this._countdown.start(),!a&&this.trigger("AdVideoStart")):n("AdStarted",(function(){return e.trigger("AdVideoStart")}),this),this.adDuration=t,t}function ts(){this._countdown&&(this._countdown._destroy(),this._countdown=null)}function es(){var t,e=this.vpaid,r=this._countdown;if(e&&(t=e.getAdDuration())>=0){if(this._removeTimeout(Za),r){ts.call(this);var i=this.VpaidProxy+".adDurationChangingCheck() got @AdDurationChange. duration="+t+". Creating the ManualCountdown was canceled.";this.logger.log(i,1,"green")}this.adDuration!==t&&(this.adDuration=t,this.trigger("AdDurationChange"))}var o=!e||null==t||t<0;if(o){var n=this.VpaidProxy+".adDurationChangingCheck() duration="+t+". Need more checks.";this.logger.trace(n,1,"pink")}return o}function rs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function is(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(r),!0).forEach((function(e){os(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function os(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ns="videoSlot",as=function(t){var e,r;function i(e,r){var i,o,n;n=t.call(this,ns,e)||this;var a=is({shouldSetControlData:!0,shouldStayCentered:!1,parentSlot:null},r),s=a.shouldSetControlData,l=a.shouldStayCentered,d=a.parentSlot,c=a.width,u=a.height,h=e.getAdWidth()||c||0,p=e.getAdHeight()||u||0,f=is({position:"absolute",verticalAlign:"middle",width:h?Object(g.t)(h):"100%",height:p?Object(g.t)(p):"100%",zIndex:1,top:p?"50%":0,left:h?"50%":0},e.getControlUnionData(ns,"css"));h&&(f.marginLeft=Object(g.t)(-h/2)),p&&(f.marginTop=Object(g.t)(-p/2));var v=e.getControlNode("containerIframe"),y=(null==v||null===(i=v.contentWindow)||void 0===i||null===(o=i.document)||void 0===o?void 0:o.body)||v,A=d||y,O=n.node=n._slot=A&&n._addDOMNode(Object(m.b)(A,"video",f));l&&new MutationObserver((function(t){t.forEach((function(t){"attributes"!==t.type||O.style.left===f.left&&O.style.top===f.top||Object(m.c)(O,{left:f.left,top:f.top})}))})).observe(O,{attributes:!0,childList:!1,subtree:!1});return n.logger.none("videoSlot initAd() videoSlot="+Object(g.f)(O)+"("+O+") parent="+Object(g.f)(O&&O.parentElement)+"("+(O&&O.parentElement)+")"),O&&(e.vpaidJsVideoSlotShouldBeMuted()&&(O.muted=!0,O.volume=0,n.logger.trace("videoSlot initAd() set videoSlot.muted = "+O.muted)),b.g&&O.setAttribute("playsinline","true"),O&&O.classList&&O.classList.add("vn_module_creature")),s&&e.setControlData(ns,{node:O}),n}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.getSlotNode=function(){return this._slot},o.getControlNode=function(){var t=this.module;return t&&t.getControlNode(ns)},i}($e.a),ss=as,ls=r(18);function ds(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function cs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ds(Object(r),!0).forEach((function(e){us(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function us(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var hs="VpaidJs",ps=function(t){var e,r;function n(e){var r,i;void 0===e&&(e={});var o=e&&e.ancestor&&e.ancestor+":"+hs||"::VpaidJs",n=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a;((null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,hs))||n).trace(o+".constructor()"),(i=t.call(this,cs({},e,{ancestor:o}))||this).VpaidJs=o;var s=e,l=s.jsmedia,d=s.jsmedia,c=d.width,u=d.height,h=d.duration;i.adDuration=h||0,i.adWidth=c,i.adHeight=u,!c&&u>0&&(i.fixedAdHeight=u),i.wasClicked=!1,i.media=l;var p=new g.a;i.vpaidLoadPromise=p.promise,i.vpaidLoadResolve=p.resolve;var f=new g.a;return i._videoStartedPromise=f.promise,i._videoStartedResolve=f.resolve,i.observer=null,i.vpaidEventListeners={},i}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var s=n.prototype;return s.toString=function(){return hs},s.initAd=function(t,e,r,n,a,s){var l=this;void 0===a&&(a={}),void 0===s&&(s={}),this.logger.log(this.VpaidJs+".initAd()");var d=this.options||{},c=d.module,u=d.ancestor,h=d.moduleAPI,p=d.isVpaidProvider,g=(h||{}).getMainModuleId,f=this.media;return new Promise((function(d,v){p&&ys.forEach((function(t){var e=t[0],r=t[1];(window[e]||(window[e]=[])).push(window[r])}));var b=a.AdParameters,y=s.iframe,A=l.options.jsmedia,O=y&&y.contentWindow;if(O&&l.logger.trace(l.VpaidJs+".initAd() getVPAIDAd will be created inside the main iframe created by the vn_module."),!O&&y&&"DIV"===y.tagName){var w=Object(m.s)(document,y.closest("body"));w&&w.length&&(O=w.pop().contentWindow,l.logger.trace(l.VpaidJs+".initAd() getVPAIDAd will be created inside the iframe received form viqeo."))}O||l.logger.trace(l.VpaidJs+".initAd() getVPAIDAd will be created inside the current window."),O||(O=window);var _=O.document,S=_.body,P=_.createElement("script");P.src=A.src,l._addDOMEventListener(P,"load",(function(){l.logger.log(l.VpaidJs+'.initAd() Successfully load "'+A.src+'"');var p=O,m=p.getVPAIDAd,y=p.getVnVPAIDAdProvider;if("function"!=typeof y&&"function"!=typeof m){var w="External script did not provide valid getVnVPAIDAdProvider() method ("+y+")";l.logger.warn(l.VpaidJs+".initAd() "+w);var _=Error(w);return _.code=o.a.VPAID_JS_ERROR,void v(_)}var S=g?"("+g()+"):"+hs:u,P=h&&cs({},h)||{};delete P.logger;var C={duration:l.adDuration,logger:l.logger,ancestor:S,moduleAPI:P,media:f};try{var j=b.replace(/\n+/g," "),E=JSON.parse(j);E.vnVpaidProvider&&(C.vnVpaidProvider=E.vnVpaidProvider)}catch(t){l.logger.error(l.VpaidJs+".initAd() JSON.parse(AdParameters) throws exception: "+t.message)}var D=(c||{}).logLevel;D&&(C.logLevel=D);var I=(C||{}).vnVpaidProvider,T=l.vpaid=y&&I?y(C):m(C);if(!Object(i.d)(T)){var k="External script returned invalid VPAID instance ("+T+")";l.logger.warn(l.VpaidJs+".initAd() "+k);var V=Error(k);return V.code=o.a.VPAID_JS_ERROR,void v(V)}l.logger.log(l.VpaidJs+".initAd() Successfully retrieved VPAID instance by getVPAIDAd()"),l.vpaidLoadResolve(T);var R=l.videoSlot=gs.call(l,c,s.videoSlot,t,e);c.getControlNode("videoSlot")||c.setControlData("videoSlot",{node:R}),R&&R.parentElement&&c.setControlData("videoSlotParent",{node:R.parentElement}),fs.call(l,T,R);try{var M=c.maxSkipTime;a&&a.AdParameters&&a.AdParameters.replace&&(a.AdParameters=a.AdParameters.replace("[MAXSKIPTIME]",M||"")),T.initAd(t,e,r,n,a,cs({},s,{videoSlot:R})),~T.toString().indexOf("Module")&&ls.b.call(T,{isInsideTextContent:!0}),d(l)}catch(t){l.logger.warn(l.VpaidJs+".initAd() Internal error "+t);var x=Error("Internal VpaidJs error ("+t+") stack:"+t.stack);x.code=o.a.VPAID_JS_ERROR,v(x)}})),l._addDOMEventListener(P,"error",(function(){var t="Error loading external script ("+P.src+")";l.logger.warn(l.VpaidJs+".initAd() ("+t+")");var e=Error(t);e.code=o.a.VPAID_JS_ERROR,v(e)})),S&&S.appendChild(P)}))},s.getMediaInfo=function(){var e=this;return t.prototype.getMediaInfo.call(this).then((function(t){var r=t||{},i=r.width,o=r.height;if(i>0||o>0)return t;var n=e.vpaid;return(n&&Promise.resolve(n)||e.vpaidLoadPromise).then((function(t){return t.getMediaInfo&&t.getMediaInfo()}))}))},s.getFormatOptions=function(){var t=this.vpaid;return(t&&Promise.resolve(t)||this.vpaidLoadPromise).then((function(t){return t.getFormatOptions&&t.getFormatOptions()}))},s.stopAd=function(){ms.call(this,["AdStopped","AdSkipped","AdSkippableStateChange"]),t.prototype.stopAd.call(this)},s._destroy=function(){this.logger.trace(this.VpaidJs+".destroy()"),ms.call(this),(this.options||{}).isVpaidProvider&&ys.forEach((function(t){var e=t[0],r=t[1],i=window[e];if(i&&i.length){var o=i.pop();o&&(window[r]=o)}})),t.prototype._destroy.call(this)},s.activateMuteChangingEnable=function(){this.vpaid&&(this.wasClicked=!0)},s.getModuleOptions=function(){var e=t.prototype.getModuleOptions.call(this);return this.vpaidLoadPromise.then((function(t){var r=t.getModuleOptions?t.getModuleOptions():Promise.resolve({});return Promise.all([e,r]).then((function(t){return cs({},t&&t.length?t[0]:{},{},t&&t.length>1?t[1]:{})}))}))},s.getLinkedVpaid=function(){return this.vpaidLoadPromise},n.create=function(t,e){return new Promise((function(r,i){var o=t.MediaFiles,s=t.adParameters,l=t.rawDuration,d=t.duration,c="application/javascript",u="application/x-javascript",h=o[c]&&o[c][0]||o[u]&&o[u][0];if(h&&h.src&&!e.isMediaUrlBlocked(h.src)){var p=(Object(w.h)(Object(g.j)(window,document))||{}).vn_providers_vpaid,f="vn_providers_vpaid";p&&(a.a.warn(" VpaidJs canCreate() "+f+"("+p+") was saved to sessionStorage",2,"color:#ff5722; font-size:1.5em"),Object(Ct.c)(f,p)),p=Object(Ct.a)(f);var v=h.src.includes(f);p&&v&&(a.a.warn(" VpaidJs canCreate() "+f+"("+p+") was restored from sessionStorage",2,"color:#ff5722; font-size:1.5em"),h.src=p),v||e.setSelectedCreative(h.src,l,s),(e&&e.getAPI&&e.getAPI().logger||a.a).log("::VpaidJs.create("+h.src+")");var m,b,y,A=new n({module:e,isVpaidProvider:v,jsmedia:cs({},h,{duration:d}),moduleAPI:e.getAPI(),ancestor:"("+(e&&e.mainModuleId)+")"});v&&(m=A._addVPAIDEventListener(A,"AdLoaded",(function(t){(y=(t||{}).selectedCreativeEventName)?b=A._addVPAIDEventListener(A,y,(function(){e.setSelectedCreative(h.src,l,s)})):e.setSelectedCreative(h.src,l,s)})),A._addVPAIDEventListener(A,"AdError",(function(){A.stopCountdown(),m&&A._removeVPAIDEventListener(A,"AdLoaded",m),b&&A._removeVPAIDEventListener(A,y,b)}))),r(A)}i()}))},n}(Ka);function gs(t,e,r,i){void 0===e&&(e=null);var o,n=e;if(n)o="using existing videoSlot";else{o="videoSlot has been created for loaded external vpaid";var a=new ss(t,{shouldSetControlData:!1,shouldStayCentered:!0,width:r,height:i});n=a&&a.getSlotNode()}return this.logger.log(this.VpaidJs+".initAd() "+o),t.setControlData("videoSlot",{node:n}),n}function fs(t,e){var r=this;vs.call(this,t,["AdLoaded","AdStarted","AdVideoStart"]);var i=this.vpaidEventListeners,o="AdLoaded",n=i.AdLoaded=function(t){r._adWasLoaded=!0,r.trigger(o,t);var e=r.lastPendingCommands.resizeAd;e&&(e(),r.logger.trace(r.VpaidJs+" @"+"AdLoaded execute last resizeAd pending command: "+e),r.trigger("slotSizeChanged",{shouldNotResize:!1}),delete r.lastPendingCommands.resizeAd),(e=r.lastPendingCommands.setAdVolume)&&(e(),r.logger.trace(r.VpaidJs+" @"+"AdLoaded execute last setAdVolume pending command: "+e),delete r.lastPendingCommands.setAdVolume),r.onAdLoaded()};this._addVPAIDEventListener(t,o,n),this._addVPAIDEventListener(t,"AdError",(function(t,e){r.stopCountdown(),ms.call(r),r.trigger("AdError",t,e)}));var a=this._addDOMEventListener(e,"playing",(function(){r._removeDOMEventListener(e,"playing",a),r._videoStartedResolve()})),s="AdVideoStart";i[s]=this._addVPAIDEventListener(t,s,(function(t){e&&e.src&&e.src.length&&!e.paused?r._videoStartedPromise.then((function(){return r.trigger(s,t)})):r.trigger(s,t)}));var l="AdStarted";i.AdStarted=this._addVPAIDEventListener(t,l,(function(){es.call(r)&&r._addTimeout("AD_DURATION_CHECK_TIMER_ID",es.bind(r),500),r.trigger(l)})),i.AdVolumeChangeSecond=this._addVPAIDEventListener(t,"AdVolumeChange",(function(){var t=r.videoSlot,e=r.options.module;if(t&&e.vpaidJsVideoSlotShouldBeMuted()){var i=r.vpaid.getAdVolume(),o=t.muted,n=t.volume;i||b.g||(i=o?0:n),(i>.999||i<.001?r.logger.log:r.logger.trace)(r.VpaidJs+" AdVolumeChange("+i+") videoSlot.muted="+o),o&&i>.999?t.muted=!1:!o&&i<.001&&(t.muted=!0)}}))}function vs(t,e){var r=this;bs.forEach((function(i){e&&e.includes(i)||r._addVPAIDEventListener(t,i,r.vpaidEventListeners[i]=r.trigger.bind(r,i))}))}function ms(t){var e=this,r=this.vpaidEventListeners,i=this.vpaid;this.logger.log(this.VpaidJs+".unsubscribePassThrough() vpaid="+i),i&&r&&Object.keys(r).forEach((function(o){t&&t.includes(o)||(e._removeVPAIDEventListener(i,o,r[o]),delete r[o])}))}var bs=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdVideoCompleteTrackOnly","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdLoadedVideoData","slotSizeChanged","AdAudioDisabled","AdAudioEnabled","AdSizeForceChange","AdAudioOnlyStart","AdReadyToShow","vn_VPAIDCreated","vn_hideOverlayFormatWrapper","vn_setOverlayZIndex","vn_VideoSlotRemoved","vn_SelectedCreative"],ys=[["vnCreateVPAIDAdSaved","createVPAIDAd"],["vnGetVPAIDAdSaved","getVPAIDAd"]];var As=r(22),Os=function(){function t(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0}var e=t.prototype;return e.nextBits=function(t){var e=this.index>>3,r=8-this.index%8;if(r>=t)return this.bytes[e]>>r-t&255>>8-t;var i=(this.index+t)%8,o=this.index+t-1>>3,n=this.bytes[e]&255>>8-r;for(e+=1;e<o;e+=1)n<<=8,n|=this.bytes[e];return i>0?(n<<=i,n|=this.bytes[e]>>8-i):(n<<=8,n|=this.bytes[e]),n},e.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},e.findNextMPEGStartCode=function(){for(var e=this.index+7>>3;e<this.writePos;e+=1)if(0===this.bytes[e]&&0===this.bytes[e+1]&&1===this.bytes[e+2])return this.index=e+4<<3,this.bytes[e+3];return this.index=this.writePos<<3,t.NOT_FOUND},e.advance=function(t){return this.index+=t},e.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0===this.bytes[t]&&0===this.bytes[t+1]&&1===this.bytes[t+2]},t}(),ws=179,_s=1,Ss=175,Ps=0,Cs=181,js=178,Es=2,Ds=3,Is=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),Ts={DEFAULT_NON_INTRA_QUANT:new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),DEFAULT_INTRA_QUANT:Is},ks=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),Vs=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),Rs=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),Ms={I:ks,P:Vs,B:Rs,TYPE_TABLE:[null,ks,Vs,Rs],ADDRESS_INCREMENT:new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22])},xs={PREMULTIPLIER_MATRIX:new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),ZIG_ZAG:new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),DCT_COEFF:new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),DCT_DC_SIZE_CHROMINANCE:new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),DCT_DC_SIZE_LUMINANCE:new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),MOTION:new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),CODE_BLOCK_PATTERN:new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31])},Ns=function(){function t(t,e,r,i){this.hasDecoded=!1,this.hasDecodeColor=!1,this.buffer=t,this.width=e,this.height=r,this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.intraQuantMatrix=Ts.DEFAULT_INTRA_QUANT,this.nonIntraQuantMatrix=Ts.DEFAULT_NON_INTRA_QUANT,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2;var o=window.Uint8ClampedArray||window.Uint8Array;window.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),i?(this.forwardY=i.currentY,this.forwardY32=i.currentY32,this.forwardCr=i.currentCr,this.forwardCr32=i.currentCr32,this.forwardCb=i.currentCb,this.forwardCb32=i.currentCb32,this.currentY=i.forwardY,this.currentY32=i.forwardY32,this.currentCr=i.forwardCr,this.currentCr32=i.forwardCr32,this.currentCb=i.forwardCb,this.currentCb32=i.forwardCb32):(this.currentY=new o(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new o(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new o(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new o(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new o(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new o(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer)),this.quantizerScale=0,this.sliceBegin=!1,this.macroblockAddress=0,this.mbRow=0,this.mbCol=0,this.macroblockType=0,this.macroblockIntra=!1,this.macroblockMotFw=!1,this.motionFwH=0,this.motionFwV=0,this.motionFwHPrev=0,this.motionFwVPrev=0}var e=t.prototype;return e.decodePicture=function(){for(var t=0;;){if(-1===(t=this.buffer.findNextMPEGStartCode()))return!1;if(t===Ps)break}if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),this.pictureCodingType<=0||this.pictureCodingType>=Ds)return!1;if(this.pictureCodingType===Es){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0===this.forwardFCode)return!1;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}do{t=this.buffer.findNextMPEGStartCode()}while(t===Cs||t===js);for(;t>=_s&&t<=Ss;)this.decodeSlice(255&t),t=this.buffer.findNextMPEGStartCode();return this.hasDecoded=!0,!0},e.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do{this.decodeMacroblock()}while(!this.buffer.nextBytesAreStartCode())},e.decodeMacroblock=function(){for(var t=0,e=this.readCode(Ms.ADDRESS_INCREMENT);34===e;)e=this.readCode(Ms.ADDRESS_INCREMENT);for(;35===e;)t+=33,e=this.readCode(Ms.ADDRESS_INCREMENT);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return!1;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType===Es&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress+=1,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t-=1;this.macroblockAddress+=1}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(Ms.TYPE_TABLE[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var r=0!=(2&this.macroblockType)?this.readCode(xs.CODE_BLOCK_PATTERN):this.macroblockIntra?63:0,i=0,o=32;i<6;i++)0!=(r&o)&&this.decodeBlock(i),o>>=1},e.readCode=function(t){var e=0;do{e=t[e+this.buffer.getBits(1)]}while(e>=0&&0!==t[e]);return t[e+2]},e.copyMacroblock=function(t,e,r,i,o){var n,a,s,l,d,c,u,h,p,g,f,v,m,b,y,A,O,w,_,S=this.currentY32,P=this.currentCb32,C=this.currentCr32;if(a=(n=this.codedWidth)-16,s=t>>1,l=e>>1,d=1==(1&t),c=1==(1&e),u=((this.mbRow<<4)+l)*n+(this.mbCol<<4)+s,p=(h=this.mbRow*n+this.mbCol<<2)+(n<<2),d)if(c)for(;h<p;){for(f=r[u]+r[u+n],u++,g=0;g<4;g++)m=f+(v=r[u]+r[u+n])+2>>2&255,m|=(f=r[++u]+r[u+n])+v+2<<6&65280,m|=f+(v=r[++u]+r[u+n])+2<<14&16711680,f=r[++u]+r[u+n],u++,m|=f+v+2<<22&4278190080,S[h++]=m;h+=a>>2,u+=a-1}else for(;h<p;){for(f=r[u++],g=0;g<4;g++)m=f+(v=r[u++])+1>>1&255,m|=(f=r[u++])+v+1<<7&65280,m|=f+(v=r[u++])+1<<15&16711680,m|=(f=r[u++])+v+1<<23&4278190080,S[h++]=m;h+=a>>2,u+=a-1}else if(c)for(;h<p;){for(g=0;g<4;g++)m=r[u]+r[u+n]+1>>1&255,m|=r[++u]+r[u+n]+1<<7&65280,m|=r[++u]+r[u+n]+1<<15&16711680,m|=r[++u]+r[u+n]+1<<23&4278190080,u++,S[h++]=m;h+=a>>2,u+=a}else for(;h<p;){for(g=0;g<4;g++)m=r[u],m|=r[++u]<<8,m|=r[++u]<<16,m|=r[++u]<<24,u++,S[h++]=m;h+=a>>2,u+=a}if(a=(n=this.halfWidth)-8,s=t/2>>1,l=e/2>>1,d=1==(t/2&1),c=1==(e/2&1),u=((this.mbRow<<3)+l)*n+(this.mbCol<<3)+s,p=(h=this.mbRow*n+this.mbCol<<1)+(n<<1),d)if(c)for(;h<p;){for(b=i[u]+i[u+n],O=o[u]+o[u+n],u++,g=0;g<2;g++)A=b+(y=i[u]+i[u+n])+2>>2&255,_=O+(w=o[u]+o[u+n])+2>>2&255,A|=(b=i[++u]+i[u+n])+y+2<<6&65280,_|=(O=o[u]+o[u+n])+w+2<<6&65280,A|=b+(y=i[++u]+i[u+n])+2<<14&16711680,_|=O+(w=o[u]+o[u+n])+2<<14&16711680,b=i[++u]+i[u+n],O=o[u]+o[u+n],u++,A|=b+y+2<<22&4278190080,_|=O+w+2<<22&4278190080,C[h]=A,P[h]=_,h++;h+=a>>2,u+=a-1}else for(;h<p;){for(b=i[u],O=o[u],u++,g=0;g<2;g++)A=b+(y=i[u])+1>>1&255,_=O+(w=o[u++])+1>>1&255,A|=(b=i[u])+y+1<<7&65280,_|=(O=o[u++])+w+1<<7&65280,A|=b+(y=i[u])+1<<15&16711680,_|=O+(w=o[u++])+1<<15&16711680,A|=(b=i[u])+y+1<<23&4278190080,_|=(O=o[u++])+w+1<<23&4278190080,C[h]=A,P[h]=_,h++;h+=a>>2,u+=a-1}else if(c)for(;h<p;){for(g=0;g<2;g++)A=i[u]+i[u+n]+1>>1&255,_=o[u]+o[u+n]+1>>1&255,A|=i[++u]+i[u+n]+1<<7&65280,_|=o[u]+o[u+n]+1<<7&65280,A|=i[++u]+i[u+n]+1<<15&16711680,_|=o[u]+o[u+n]+1<<15&16711680,A|=i[++u]+i[u+n]+1<<23&4278190080,_|=o[u]+o[u+n]+1<<23&4278190080,u++,C[h]=A,P[h]=_,h++;h+=a>>2,u+=a}else for(;h<p;){for(g=0;g<2;g++)A=i[u],_=o[u],A|=i[++u]<<8,_|=o[u]<<8,A|=i[++u]<<16,_|=o[u]<<16,A|=i[++u]<<24,_|=o[u]<<24,u++,C[h]=A,P[h]=_,h++;h+=a>>2,u+=a}},e.decodeMotionVectors=function(){var t,e,r=0;this.macroblockMotFw?(0!==(t=this.readCode(xs.MOTION))&&1!==this.forwardF?(r=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+r+1,t<0&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),0!==(t=this.readCode(xs.MOTION))&&1!==this.forwardF?(r=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+r+1,t<0&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType===Es&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},e.decodeBlock=function(t){var e,r=0;if(this.macroblockIntra){var i,o;if(t<4?(i=this.dcPredictorY,o=this.readCode(xs.DCT_DC_SIZE_LUMINANCE)):(i=4===t?this.dcPredictorCr:this.dcPredictorCb,o=this.readCode(xs.DCT_DC_SIZE_CHROMINANCE)),o>0){var n=this.buffer.getBits(o);this.blockData[0]=0!=(n&1<<o-1)?i+n:i+(-1<<o|n+1)}else this.blockData[0]=i;t<4?this.dcPredictorY=this.blockData[0]:4===t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,r=1}else e=this.nonIntraQuantMatrix;for(var a,s,l,d=0;;){var c=0,u=this.readCode(xs.DCT_COEFF);if(1===u&&r>0&&0===this.buffer.getBits(1))break;65535===u?(c=this.buffer.getBits(6),0===(d=this.buffer.getBits(8))?d=this.buffer.getBits(8):128===d?d=this.buffer.getBits(8)-256:d>128&&(d-=256)):(c=u>>8,d=255&u,this.buffer.getBits(1)&&(d=-d));var h=xs.ZIG_ZAG[r+=c];r++,d<<=1,this.macroblockIntra||(d+=d<0?-1:1),0==(1&(d=d*this.quantizerScale*e[h]>>4))&&(d-=d>0?1:-1),d>2047?d=2047:d<-2048&&(d=-2048),this.blockData[h]=d*xs.PREMULTIPLIER_MATRIX[h]}t<4?(a=this.currentY,l=this.codedWidth-8,s=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&t)&&(s+=8),0!=(2&t)&&(s+=this.codedWidth<<3)):(a=4===t?this.currentCb:this.currentCr,l=(this.codedWidth>>1)-8,s=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===r?(this.copyValueToDestination(this.blockData[0]+128>>8,a,s,l),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,a,s,l),this.blockData.set(this.zeroBlockData)):1===r?(this.addValueToDestination(this.blockData[0]+128>>8,a,s,l),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,a,s,l),this.blockData.set(this.zeroBlockData)),r=0},e.IDCT=function(){var t,e,r,i,o,n,a,s,l,d,c,u,h,p,g,f,v,m,b,y=this.blockData;for(b=0;b<8;++b)t=y[32+b],e=y[16+b]+y[48+b],r=y[40+b]-y[24+b],n=y[8+b]+y[56+b],a=y[24+b]+y[40+b],l=(h=(473*(i=y[8+b]-y[56+b])-196*r+128>>8)-(o=n+a))-(362*(n-a)+128>>8),p=(d=(s=y[0+b])-t)+(c=(362*(y[16+b]-y[48+b])+128>>8)-e),g=(u=s+t)+e,f=d-c,v=u-e,m=-l-(473*r+196*i+128>>8),y[0+b]=o+g,y[8+b]=h+p,y[16+b]=f-l,y[24+b]=v-m,y[32+b]=v+m,y[40+b]=l+f,y[48+b]=p-h,y[56+b]=g-o;for(b=0;b<64;b+=8)t=y[4+b],e=y[2+b]+y[6+b],r=y[5+b]-y[3+b],n=y[1+b]+y[7+b],a=y[3+b]+y[5+b],l=(h=(473*(i=y[1+b]-y[7+b])-196*r+128>>8)-(o=n+a))-(362*(n-a)+128>>8),p=(d=(s=y[0+b])-t)+(c=(362*(y[2+b]-y[6+b])+128>>8)-e),g=(u=s+t)+e,f=d-c,v=u-e,m=-l-(473*r+196*i+128>>8),y[0+b]=o+g+128>>8,y[1+b]=h+p+128>>8,y[2+b]=f-l+128>>8,y[3+b]=v-m+128>>8,y[4+b]=v+m+128>>8,y[5+b]=l+f+128>>8,y[6+b]=p-h+128>>8,y[7+b]=g-o+128>>8},e.copyBlockToDestination=function(t,e,r,i){for(var o=0;o<64;o+=8,r+=i+8)e[r+0]=t[o+0],e[r+1]=t[o+1],e[r+2]=t[o+2],e[r+3]=t[o+3],e[r+4]=t[o+4],e[r+5]=t[o+5],e[r+6]=t[o+6],e[r+7]=t[o+7]},e.addBlockToDestination=function(t,e,r,i){for(var o=0;o<64;o+=8,r+=i+8)e[r+0]+=t[o+0],e[r+1]+=t[o+1],e[r+2]+=t[o+2],e[r+3]+=t[o+3],e[r+4]+=t[o+4],e[r+5]+=t[o+5],e[r+6]+=t[o+6],e[r+7]+=t[o+7]},e.copyValueToDestination=function(t,e,r,i){for(var o=0;o<64;o+=8,r+=i+8)e[r+0]=t,e[r+1]=t,e[r+2]=t,e[r+3]=t,e[r+4]=t,e[r+5]=t,e[r+6]=t,e[r+7]=t},e.addValueToDestination=function(t,e,r,i){for(var o=0;o<64;o+=8,r+=i+8)e[r+0]+=t,e[r+1]+=t,e[r+2]+=t,e[r+3]+=t,e[r+4]+=t,e[r+5]+=t,e[r+6]+=t,e[r+7]+=t},e.copyBlockToDestinationClamp=function(t,e,r,i){for(var o=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[o++];e[r++]=s>255?255:s<0?0:s}r+=i}},e.addBlockToDestinationClamp=function(t,e,r,i){for(var o=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[o++]+e[r];e[r++]=s>255?255:s<0?0:s}r+=i}},e.YCbCrToRGBA=function(){for(var t,e,r,i,o,n=this.currentY,a=this.currentCb,s=this.currentCr,l=this.currentRGBA.data,d=0,c=this.codedWidth,u=this.codedWidth+(this.codedWidth-this.width),h=0,p=this.halfWidth-(this.width>>1),g=0,f=4*this.width,v=4*this.width,m=this.width>>1,b=this.height>>1,y=0;y<b;y++){for(var A=0;A<m;A++){t=a[h],e=s[h],h++,r=e+(103*e>>8)-179,i=(88*t>>8)-44+(183*e>>8)-91,o=t+(198*t>>8)-227;var O=n[d++],w=n[d++];l[g]=O+r,l[g+1]=O-i,l[g+2]=O+o,l[g+3]=255,l[g+4]=w+r,l[g+5]=w-i,l[g+6]=w+o,l[g+7]=255,g+=8;var _=n[c++],S=n[c++];l[f]=_+r,l[f+1]=_-i,l[f+2]=_+o,l[f+3]=255,l[f+4]=S+r,l[f+5]=S-i,l[f+6]=S+o,l[f+7]=255,f+=8}d+=u,c+=u,g+=v,f+=v,h+=p}this.hasDecodeColor=!0},e.fillArray=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},t}(),Ls=function(){};Ls.SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),Ls.SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),Ls.SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n");var Fs=function(){function t(t){this.canvas=t.canvas}var e=t.prototype;return e.init=function(t,e){this.initWebGL()?(this.render=this.renderFrameGL,this.gl.useProgram(this.program),this.gl.viewport(0,0,t,e)):(this.canvasCtx=this.canvas.getContext("2d"),this.render=this.renderFrame2D)},e.renderFrame2D=function(t){t.decodePicture(),t.hasDecodeColor||(t.currentRGBA=document.createElement("canvas").getContext("2d").getImageData(0,0,t.width,t.height),t.YCbCrToRGBA()),this.canvasCtx.putImageData(t.currentRGBA,0,0)},e.renderFrameGL=function(t){t.decodePicture();var e=this.gl,r=new Uint8Array(t.currentY.buffer),i=new Uint8Array(t.currentCr.buffer),o=new Uint8Array(t.currentCb.buffer);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.YTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.codedWidth,t.height,0,e.LUMINANCE,e.UNSIGNED_BYTE,r),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.CBTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,i),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.CRTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,o),e.drawArrays(e.TRIANGLE_STRIP,0,4)},e.initWebGL=function(){var t;try{if(t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.glbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.glbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.program=t.createProgram(),t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,Ls.SHADER_VERTEX_IDENTITY)),t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,Ls.SHADER_FRAGMENT_YCBCRTORGBA)),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this.program));t.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var e=t.getAttribLocation(this.program,"vertex");t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),this.loadingProgram=t.createProgram(),t.attachShader(this.loadingProgram,this.compileShader(t.VERTEX_SHADER,Ls.SHADER_VERTEX_IDENTITY)),t.attachShader(this.loadingProgram,this.compileShader(t.FRAGMENT_SHADER,Ls.SHADER_FRAGMENT_LOADING)),t.linkProgram(this.loadingProgram),t.useProgram(this.loadingProgram),e=t.getAttribLocation(this.loadingProgram,"vertex"),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0)}catch(t){return!1}return!!t},e.compileShader=function(t,e){var r=this.gl,i=r.createShader(t);if(r.shaderSource(i,e),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(i));return i},e.createTexture=function(t,e){var r=this.gl,i=r.createTexture();return r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.uniform1i(r.getUniformLocation(this.program,e),t),i},t}(),Ws=[null,23.976,24,25,29.97,30,50,59.94,60],Hs=function(){function t(){this.data=new Uint8Array(0),this.lastIndex=0}var e=t.prototype;return e.push=function(e){this.data=t.merge(this.data,e)},e.getData=function(){for(var t,e=[],r=this.lastIndex;r<this.data.length;r+=1)if(0===this.data[r]&&0===this.data[r+1]&&1===this.data[r+2]){var i=this.data[r+3];if(i===Ps)e.push(r);else if(i===ws&&this.data.length-(r+4)>32){var o=new Os(this.data.slice(r+4,32)),n=o.getBits(12),a=o.getBits(12),s=o.getBits(4),l=Ws[o.getBits(4)];n&&a&&(t={width:n,height:a,aspectRatio:s,fps:l})}}var d=[];if(e.length>1)for(var c=0;c<e.length-1;c+=1)d.push(new Os(this.data.slice(e[c],e[c+1]))),this.lastIndex=e[c+1];return{frames:d,metaData:t}},e.getTailData=function(){return this.data.slice(this.lastIndex,this.data.length)},t.merge=function(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r},t}();var zs,Bs=function(t){var e,r;function i(e){var r;return void 0===e&&(e={}),(r=t.call(this)||this).canvas=e.canvas,r.finished=!1,r.currentRenderFrame=0,r.hasStop=!0,r.timeoutId=null,r.buffer=new Hs,r.renderEngine=new Fs(e),r.currentTime=0,r.fps=30,r.frames=[],r.messagesData=[],r.duration=0,r.lastRenderTime=Date.now(),r.firstPacketTimeout=e.firstPacketTimeout||500,r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.createFrame=function(t){var e=this.frames[this.frames.length-1],r=new Ns(t,this.width,this.height,e);this.frames.push(r)},o.setMetaData=function(t){if(t){var e=t.width,r=t.height,i=t.fps;i&&(this.fps=i),e&&r&&this.width!==e&&this.height!==r&&(this.width=e,this.height=r,this.canvas.width=this.width,this.canvas.height=this.height,this.renderEngine.init(this.width,this.height))}},o.decodeMessage=function(){var t=this,e=this.fps/2;if(this.frames.length-this.currentRenderFrame>e)setTimeout(this.decodeMessage.bind(this),0);else{var r=this.messagesData.shift();if(r){this.buffer.push(new Uint8Array(r));var i=this.buffer.getData(),o=i.frames,n=i.metaData;this.setMetaData(n),o.forEach((function(e){return t.createFrame(e)})),Date.now()-this.lastRenderTime>=1e3/this.fps&&this.nextFrame()}}},o.createSocket=function(t){var e=this,r=new WebSocket(t);r.binaryType="arraybuffer";var i=function(t){var r=t.data;e.messagesData.push(r),setTimeout(e.decodeMessage.bind(e),0)};return r.addEventListener("message",(function t(o){clearTimeout(r.firstPacketWaitingTimeoutId);var n=new Os(o.data);e.decodeInitPackage(n),r.removeEventListener("message",t),r.addEventListener("message",i)})),r.firstPacketWaitingTimeoutId=setTimeout((function(){e.trigger("error","jsmpeg.createSocket() Websocket did not get a first packet during "+e.firstPacketTimeout+" ms")}),this.firstPacketTimeout),r},o.processSocket=function(t){var e=this;try{this.client=this.createSocket(t),this.client.addEventListener("error",(function(){e.trigger("error","jsmpeg.init() Websocket initialization error")})),this.client.addEventListener("close",(function(){e.finished=!0}))}catch(t){this.trigger("error","jsmpeg.init() Websocket create error")}},o.processFile=function(t){var e=this;Object(Ue.f)(t,{options:{withCredentials:!1,responseType:"arraybuffer"}}).then((function(t){e.buffer.push(new Uint8Array(t.target.response));var r=e.buffer.getData(),i=r.frames,o=r.metaData;e.setMetaData(o),i.forEach((function(t){return e.createFrame(t)})),e.duration=e.frames.length/e.fps,e.trigger("onDecodeInitPackage")})).catch((function(){e.trigger("error","jsmpeg.pricessFile("+t+") Failed to load resource")}))},o.init=function(t){/^wss?:\/\//.test(t)?this.processSocket(t):this.processFile(t)},o.decodeInitPackage=function(t){t.getBits(32),this.setMetaData({width:t.getBits(16),height:t.getBits(16),fps:t.getBits(8)||30}),this.trigger("onDecodeInitPackage")},o.play=function(){this.hasStop&&(this.hasStop=!1,this.startAnimation())},o.pause=function(){this.hasStop=!0,this.timeoutId&&window.clearTimeout(this.timeoutId)},o.stop=function(){this.currentRenderFrame=0,this.currentTime=0,this.pause()},o.timeUpdate=function(){this.trigger("timeupdate",{target:{currentTime:this.currentTime,duration:this.duration}})},o.nextFrame=function(){var t=this.frames[this.currentRenderFrame];t&&!this.hasStop&&(this.lastRenderTime=Date.now(),this.renderEngine.render(t),this.currentTime=this.currentRenderFrame/this.fps,this.currentRenderFrame+=1,this.timeUpdate())},o.startAnimation=function(){this.hasStop||((this.finished||this.duration>0)&&this.currentRenderFrame>=this.frames.length-1&&0===this.messagesData.length?this.trigger("ended"):(this.timeoutId=setTimeout(this.startAnimation.bind(this),1e3/this.fps),this.nextFrame()))},i}(As.a);function Us(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function qs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Gs="Module::VpaidCanvas",Xs=(null===a.a||void 0===a.a||null===(zs=a.a.getChildWriter)||void 0===zs?void 0:zs.call(a.a,Gs))||a.a,Js=function(t){var e,r;function i(e){var r;void 0===e&&(e={}),Xs.trace("Module::VpaidCanvas.constructor()"),r=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(r),!0).forEach((function(e){qs(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Us(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{ancestor:Gs}))||this;var i=e,o=i.duration,n=i.mpgmedia,a=i.mpgmedia,s=a.width,l=a.height;return r.adDuration=o,r.adWidth=s,r.adHeight=l,r.media=n,r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.initAd=function(e,r,i,n,a,s){var l=this;void 0===a&&(a={}),void 0===s&&(s={}),t.prototype.initAd.call(this,e,r,i,n,a,s);var d=this.options,c=d.mpgmedia,u=d.mp4media,h=d.mp3media,p=d.duration;this.setAdVolume(0),this.adDuration=p,this.videoSlot=this.videoSlot||s.videoSlot,this.audioSlot=this.audioSlot||s.audioSlot;var f=this.slot=s.slot,v=this.canvas;Object(m.p)(v,"canvas")||(v=this.canvas=document.createElement("canvas"),this._addDOMEventListener(f||v,"click",il.bind(this)),Object(m.c)(v,{width:Object(g.t)(e),height:Object(g.t)(r)}),this.canvasWrapper=Object(m.b)(s.slot,"div",{position:"absolute",top:"50%",marginTop:Object(g.t)(-r/2),left:"50%",marginLeft:Object(g.t)(-e/2)}),this.canvasWrapper.appendChild(v),this._initAudioVideo(h&&h.src,u&&u.src));var b=this.jsmpeg=new Bs({canvas:v,firstPacketTimeout:1200});return this._addVPAIDEventListener(b,"timeupdate",rl.bind(this)),this._addVPAIDEventListener(b,"onDecodeInitPackage",el.bind(this)),this._addVPAIDEventListener(b,"ended",(function(){var t=l.getAdExpanded();b.ended=!0,t||(l.collapseAd(),l.trigger("AdVideoComplete"))})),this._addVPAIDEventListener(b,"error",(function(t){l.trigger("AdError",String(t),o.a.GENERAL_VPAID_ERROR)}),"error"),b.init(c&&c.src),this._addVPAIDEventListener(this,"AdVolumeChange",Zs.bind(this)),this._addVPAIDEventListener(this,"AdVideoStart",Ks.bind(this)),this._addVPAIDEventListener(this,"AdVideoComplete",$s.bind(this)),Promise.resolve(this)},n.resizeAd=function(e,r,i){var o,n=this.jsmpeg,a=this.canvas,s=this.environmentVars,l=this.options.mpgmedia,d=l.scalable,c=s||{},u=c.forceAspectRatio,h=c.slot,p=this.getAdAspectRatio(),f=u||l.maintainAspectRatio;if(n&&n.width&&p&&d&&s&&s.slot){var v,b=n.width>n.height,y=e>r;if(null===f){var A=l.width/l.height,O=e/r;f=100-100*(O<A?O/A:A/O)>10}!0===f&&(v=e/r<n.width/n.height),!1===f&&(v=e/r>n.width/n.height),b!==y&&(v=!0),y&&!b&&(v=!1),o=v?{width:e,height:e*p}:{height:r,width:r/p}}else o={width:l.width,height:l.height};var w=this.canvasWrapper;return w&&Object(m.c)(w,{marginTop:Object(g.t)(-o.height/2),marginLeft:Object(g.t)(-o.width/2)}),Object(g.c)(a,o,h,{width:e,height:r}),t.prototype.resizeAd.call(this,e,r,i)},n.startAd=function(){var e=this.jsmpeg,r=this.videoSlot;return this.getAdExpanded()?r&&r.play():e.play(),t.prototype.startAd.call(this)},n.stopAd=function(){return Qs.call(this),t.prototype.stopAd.call(this)},n.pauseAd=function(){return Qs.call(this),t.prototype.pauseAd.call(this)},n.resumeAd=function(){var e=this.jsmpeg,r=this.videoSlot,i=this.getAdExpanded();return e.play(),i&&r&&r.play(),t.prototype.resumeAd.call(this)},n.expandAd=function(){var e=this.jsmpeg,r=this.videoSlot;return this.getAdExpanded()||r&&(r.currentTime=e.currentTime,Object(m.q)(this.videoSlot),this.setAdExpanded(!0)),t.prototype.expandAd.call(this)},n.collapseAd=function(){var e=this,r=this.jsmpeg,i=this.videoSlot;return this.getAdExpanded()&&i&&(i.pause(),setTimeout((function(){"function"==typeof i.webkitExitFullscreen&&i.webkitExitFullscreen(),r.ended&&e.trigger("AdVideoComplete")}),50)),t.prototype.collapseAd.call(this)},n.skipAd=function(){return Qs.call(this),t.prototype.skipAd.call(this)},n.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,r=this.jsmpeg||this.options.mpgmedia,i=r.width,o=r.height;return i&&o?o/i:t&&e?e/t:9/16},n._destroy=function(){Xs.trace("Module::VpaidCanvas.destroy()"),t.prototype._destroy.call(this),this.jsmpeg._eventListeners={},this.jsmpeg=null},n._initAudioVideo=function(t,e){var r,i;if(Xs.trace("Module::VpaidCanvas Initializing secondary audio/video slot"),t)r=this.videoSlot=this.audioSlot||document.createElement("audio"),i=t;else{if(!e)return void this._failedAudioVideo();(r=this.videoSlot=this.videoSlot||document.createElement("video")).playsInline=!0,i=e}this.environmentVars.slot.appendChild(r),r.src=i,Object(m.c)(r,{display:"none"}),this._addDOMEventListener(r,"volumechange",this.trigger.bind(this,"AdVolumeChange")),this._addDOMEventListener(r,"loadeddata",tl.bind(this)),this._addDOMEventListener(r,"webkitendfullscreen",this.collapseAd.bind(this)),this._addDOMEventListener(r,"ended",this.collapseAd.bind(this)),this._addDOMEventListener(r,"error",this._failedAudioVideo.bind(this)),Xs.trace("Module::VpaidCanvas.initAudioVideo() Starting secondary audio/video slot"),r.load()},n._failedAudioVideo=function(){Xs.warn("Module::VpaidCanvas Failed to initialize secondary audio/video slot"),this.videoSlot=null,this.trigger("AdAudioDisabled")},i.create=function(t,e,r){void 0===r&&(r=!1);var o=(e&&e.getAPI&&e.getAPI()||{}).getControlUnionData;return new Promise((function(n){var a=t.MediaFiles,s=t.duration,l=t.rawDuration,d=a["video/mp4"]&&a["video/mp4"][0],c=d&&d.src,u=c&&e.isMediaUrlBlocked(d.src),h=a["audio/mp3"]&&a["audio/mp3"][0],p=o&&o("vnCache")||{serverUrl:"",strict:!1};if(!r&&c&&!u&&(b.b||!p.strict&&b.a))throw new Error;var g,f=e.format&&e.format._getModuleDimensions&&e.format._getModuleDimensions().viewportWidth||0,v=a["video/mpeg"],m=v&&v.filter((function(t){return t.src&&!e.isMediaUrlBlocked(t.src)})).reduce((function(t,e){return Math.abs(t.width-f)<Math.abs(e.width-f)?t:e}));if(m){var y,A=m.width;A&&f&&!1===m.scalable&&(y=Math.abs(A-f)/f)>.1&&(Xs.log("Module::VpaidCanvas difference between viewportWidth && mediaWidth more than 10% ("+y+"). Set media.scalable = true"),m.scalable=!0),g=Promise.resolve(m)}else{if(!c||u||!p||!p.serverUrl)throw new Error;Xs.trace("Module::VpaidCanvas.create() Querying cache server");var O=Object(w.a)(p.serverUrl,{url:d.src});Xs.track("Module::VpaidCanvas request vnCache ("+O+")"),g=Object(Ue.f)(O).then((function(t){return JSON.parse(t.target.responseText)})).catch((function(){throw new Error("Cache server did not provide playable data")})).then((function(t){return t.video}))}g.then((function(t){Xs.log("Module::VpaidCanvas.create("+t.src+")"),e.setSelectedCreative(t.src,l);var r=new i({module:e,mpgmedia:t,mp3media:h,mp4media:d,duration:s,moduleAPI:e.getAPI()});n(r)}))}))},i}(i.a);function Qs(){var t=this.jsmpeg,e=this.videoSlot,r=this.getAdExpanded();t.pause(),r&&e&&e.pause()}function Ys(){var t=this.getAdVolume();t>0?(Xs.trace("Module::VpaidCanvas Expanding ad because of adVolume set to "+t),this.expandAd()):(Xs.trace("Module::VpaidCanvas Collapsing ad because of adVolume set to "+t),this.collapseAd())}function Zs(){Ys.call(this)}function Ks(){Ys.call(this)}function $s(){var t=this.jsmpeg,e=this.videoSlot;e&&e.pause(),t.stop()}function tl(t){var e=t.target;this.hasAudio=Object(g.p)(e),this.trigger("AdLoadedVideoData")}function el(){var t=this.jsmpeg,e=t.width,r=t.height;Xs.trace("Module::VpaidCanvas WS metadata size: width: "+e+", height: "+r+"}}"),this.resizeAd(this.adWidth,this.adHeight),this.trigger("AdLoaded")}function rl(t){var e=this.adExpanded&&this.videoSlot?this.videoSlot:t.target,r=this.adDuration=e&&e.duration?e.duration:this.adDuration;if(r){var i=this.adRemainingTime,o=r-e.currentTime;o!==i&&(this.adRemainingTime=o,o<r&&i===r&&(this.trigger("AdImpression"),this.trigger("AdVideoStart")),this.trigger("AdRemainingTimeChange"),o<.75*r&&i>=.75*r&&this.trigger("AdVideoFirstQuartile"),o<.5*r&&i>=.5*r&&this.trigger("AdVideoMidpoint"),o<.25*r&&i>=.25*r&&this.trigger("AdVideoThirdQuartile"),0===o&&i>0&&this.trigger("AdVideoComplete"))}}function il(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function ol(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function nl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function al(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var sl="Module::VpaidImg",ll=function(t){var e,r;function i(e){var r,i,o;void 0===e&&(e={});var n=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a;(n=(null===(r=n)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,sl))||n).trace("Module::VpaidImg.constructor()"),o=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ol(Object(r),!0).forEach((function(e){nl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ol(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{ancestor:sl,logger:n}))||this;var s=o.options.media;o.media=s,o.image=null,o.originalSize={};var l=o.options.duration;return o._countdown=new Xa.a({duration:l,VPAID_API:{trigger:o.trigger.bind(al(o))},logger:o.logger}),o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.initAd=function(e,r,i,n,a,s){var l=this;void 0===a&&(a={}),void 0===s&&(s={}),t.prototype.initAd.call(this,e,r,i,n,a,s);var d=this.options.media,c=this.image,u=this.slot=s.slot;if(!Object(m.p)(c,"img")){var h=this.image=document.createElement("img");this._addDOMEventListener(u,"click",cl.bind(this)),this._addDOMEventListener(h,"load",dl.bind(this)),this._addDOMEventListener(h,"error",(function(t){l.trigger("AdError",String(t),o.a.GENERAL_VPAID_ERROR)})),s.slot.appendChild(h),h.src=d.src,this._addVPAIDEventListener(this,"error",(function(t){l.trigger("AdError",String(t),o.a.GENERAL_VPAID_ERROR)}),"error")}return Promise.resolve(this)},n.getModuleOptions=function(){return Promise.resolve({destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(t){t&&Object(m.c)(t,{backgroundColor:"transparent"})}},{name:"vpaidSlot",action:function(t){t&&Object(m.c)(t,{textAlign:"center"})}}]})},n.resizeAd=function(e,r,i){var o=this.image,n=this.environmentVars,a=this.originalSize,s=(n||{}).slot;if(this.logger.trace("Module::VpaidImg.resizeAd("+e+", "+r+") image.width="+(o&&o.width)),o&&o.width&&n&&n.slot){var l=o.width,d=(a||{}).width;if(l>e||l<=e&&d>=l){var c=Math.min(e,a.width);c!==l&&(o.width=c,this.logger.trace("Module::VpaidImg.resizeAd("+e+", "+r+") change image size image.width="+o.width+" image.height="+o.height,2,"brown"))}var u=o.width,h=o.height;this.trigger("slotSizeChanged",{shouldNotResize:!0,height:h,width:u}),t.prototype.resizeAd.call(this,u,h,i),Object(g.c)(null,{width:u,height:h},s,{width:e,height:h}),this.trigger("slotSizeChanged",{shouldNotResize:!0,width:null})}},n.startAd=function(){this.logger.log("Module::VpaidImg startAd()",2,"blue"),this._countdown.start(),this.trigger("AdDurationChange"),t.prototype.startAd.call(this),this.trigger("AdImpression"),this.trigger("AdVideoStart")},n.stopAd=function(){return this._countdown.stop(),t.prototype.stopAd.call(this)},n.pauseAd=function(){return this._countdown.stop(),t.prototype.pauseAd.call(this)},n.resumeAd=function(){return this._countdown.start(),t.prototype.resumeAd.call(this)},n.skipAd=function(){return t.prototype.skipAd.call(this)},n.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,r=this.image||this.options.media,i=r.width,o=r.height;return i&&o?o/i:t&&e?e/t:9/16},n.getAdRemainingTime=function(){return this._countdown.getAdRemainingTime()},n._destroy=function(){this.logger.trace("Module::VpaidImg.destroy()"),this._countdown._destroy(),t.prototype._destroy.call(this)},i.create=function(t,e){var r=this;return new Promise((function(o){var n=t.MediaFiles,a=t.rawDuration,s=t.duration,l=e.format&&e.format._getModuleDimensions&&e.format._getModuleDimensions().viewportWidth||0,d=(n["image/png"]||[]).concat(n["image/jpg"]||[]).concat(n["image/gif"]||[]),c=d&&d.filter((function(t){return t.src})).reduce((function(t,e){return Math.abs(t.width-l)<Math.abs(e.width-l)?t:e}),{});if(Object(g.r)(c))throw new Error;r.logger.log("Module::VpaidImg.create("+c.src+")"),e.setSelectedCreative(c.src,a),o(new i({module:e,media:c,duration:s}))}))},i}(i.a);function dl(){var t=this.image,e=t.width,r=t.height;this.originalSize={width:parseFloat(e),height:parseFloat(r)},this.adHeight=r,this.logger.trace("Module::VpaidImg metadata size: width: "+e+", height: "+r+"}}"),this.trigger("AdLoaded"),this.trigger("AdLoadedVideoData")}function cl(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function hl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pl="::VpaidVideo",gl={startTime:0},fl=function(t){var e,r;function i(e){var r,i,o;void 0===e&&(e={});var n=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a;(n=(null===(r=n)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,pl))||n).trace("::VpaidVideo.constructor()"),o=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ul(Object(r),!0).forEach((function(e){hl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ul(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},gl,{},e,{ancestor:pl,logger:n}))||this;var s=e,l=s.mp4media,d=s.mp4media,c=d.width,u=d.height;o.adWidth=c,o.adHeight=u,o.media=l,o.startedVideotWithoutSound=null,o.startVideoWithSoundFailed=null,o.setAdVolumeCounter=0;var h=new g.a;return o.playerSuccessfullyStartedPromise=h.promise,o.playerSuccessfullyStartedResolve=h.resolve,o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.initAd=function(e,r,i,n,a,s){var l,d=this;void 0===a&&(a={}),void 0===s&&(s={}),t.prototype.initAd.call(this,e,r,i,n,a,s);var c=s.videoSlotCanAutoPlay||a.videoSlotCanAutoPlay;this.videoSlotCanAutoPlay=c,"true"===c||"1"===c?this.videoSlotCanAutoPlay=!0:"false"!==c&&"false"!==c||(this.videoSlotCanAutoPlay=!1),l=this.videoSlot=s.videoSlot,this.slot=s.slot,this.logger.trace("::VpaidVideo.initAd() environmentVars.videoSlot="+s.videoSlot+" videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay+" useExistsVideoSlot="+this.useExistsVideoSlot+" videoSlot="+this.videoSlot,2);return new Promise((function(i,n){Object(m.p)(s.videoSlot,"video")&&(l=s.videoSlot,d.logger.track("::VpaidVideo.initAd() Using environmentVars.videoSlot, videoSlotCanAutoPlay is "+d.videoSlotCanAutoPlay)),function(t,i){void 0===t&&(t=d.videoSlot),void 0===i&&(i=!1),d.logger.trace("::VpaidVideo.initAd.videoStart()",2);var o=(d.options.moduleAPI||{}).saveVideoSlotParams;o&&o(t),Object(m.c)(t,{width:e+"px",height:r+"px"}),t.src=d.options.mp4media.src,Object(m.c)(t,{display:i?"hidden":""}),t.load()}(l=d._createVideoSlot(l),!0);var a=Object(m.q)(l);if(a){var c=d._addDOMEventListener(l,"error",(function(t){var e=Sl(t),r=e.code,i=e.message,o=Error(i);o.code=r,n(o)})),u=function(){return a.then((function(){l.pause(),d.startedVideotWithoutSound=l.muted;var e=d.getAdVolume();t.prototype.setAdVolume.call(d,e,{forceTrigger:!0}),c&&d._removeDOMEventListener(l,"error",c),c=null,d._addDOMEventListener(l,"error",_l.bind(d)),d.logger.log("::VpaidVideo initAd() video.play() startPromise() video has been started successfully. Set it in pause. videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume+" super.setAdVolume("+e+")",2,"green"),d.playerSuccessfullyStartedResolve(l),i(d)}))};d.logger.trace("::VpaidVideo initAd() video.play() return promise"),u().catch((function(t){d.startedVideotWithoutSound=null,d.startVideoWithSoundFailed=!0;var e="::VpaidVideo initAd("+d+") failed video autoplay with videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume;d.logger.warn(e+" error:"+(t&&t.message||t)),!l.muted||l.volume?(d.adVolume=0,d.videoSlotCanAutoPlay=!1,l.muted=!0,l.volume=0,d.logger.log("::VpaidVideo initAd(). One more try start media with videoSlot.muted="+l.muted+" videoSlot.volume=0("+l.volume+") paused="+l.paused,1),a=Object(m.q)(l),u().then((function(){d.startedVideotWithoutSound=!0})).catch((function(t){var e="::VpaidVideo initAd("+d+") failed video autoplay err="+t;d.logger.error(e),n(Object(g.e)(t,e,o.a.FAIL_MEDIA_START))}))):n(Object(g.e)(t,e,o.a.FAIL_MEDIA_DISPLAY))}))}else if(void 0===a)if(d.logger.warn("::VpaidVideo initAd() video.play() do not return promise"),l.paused){var h="failed video autoplay";d.logger.error("::VpaidVideo initAd() "+h);var p=Error(""+h);p.code=o.a.FAIL_MEDIA_START,n(p)}else d.logger.log("::VpaidVideo initAd() video autoplay started",1),i(d);else d.logger.error("::VpaidVideo initAd() element is neither video nor audio tag"),n()}))},n._createVideoSlot=function(t){if(void 0===t&&(t=null),!this.options)return null;var e=this.slot,r=this.options,i=r.module,o=r.startTime;if(!t){var n=new ss(i);(t=n&&n.getControlNode()).muted=!1===this.videoSlotCanAutoPlay||!this.adVolume,t.currentTime=o,t.volume=t.muted?0:this.adVolume,t.playsInline=!0,Object(m.c)(t,{width:"100%",display:"none"}),this.logger.trace("::VpaidVideo._createVideoSlot, videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay)}return this._addDOMEventListener(t,"loadedmetadata",yl.bind(this)),this._addDOMEventListener(t,"loadeddata",bl.bind(this)),this._addDOMEventListener(t,"durationchange",Al.bind(this)),this._addDOMEventListener(t,"play",Ol.bind(this)),this._addDOMEventListener(t,"volumechange",wl.bind(this)),this._addDOMEventListener(e||t,"click",Pl.bind(this)),this.videoSlot=t,this.logger.log("::VpaidVideo._createVideoSlot, videoSlot.muted="+t.muted),t},n.resizeAd=function(e,r,i){var o=this.videoSlot,n=this.useExistsVideoSlot,a=this.options.moduleAPI;if(this.logger.trace("::VpaidVideo.resizeAd("+e+", "+r+" useExistsVideoSlot="+n),n){var s=(a||{}).saveVideoSlotParams;s&&s(o),Object(m.c)(o,{width:e+"px",height:r+"px"})}else{var l,d=this.videoSlot,c=this.environmentVars,u=this.options.mp4media,h=u.scalable,p=c||{},f=p.forceAspectRatio,v=p.slot,b=this.getAdAspectRatio(),y=f||u.maintainAspectRatio;if(b&&h&&v){var A,O=u.width>u.height,w=e>r;if(null===y){var _=u.width/u.height,S=e/r;y=100-100*(S<_?S/_:_/S)>10}!0===y&&(A=e/r<u.width/u.height),!1===y&&(A=e/r>u.width/u.height),O!==w&&(A=!0),w&&!O&&(A=!1),l=A?{width:e,height:e*b}:{height:r,width:r/b}}else l={width:u.width,height:u.height};this.logger.none("::VpaidVideo.resizeAd() adWidth="+e+" adHeight="+r+" newVideoSlotSize="+JSON.stringify(l)+" adAspectRatio="+b,2,"blue"),Object(g.c)(d,l)}return t.prototype.resizeAd.call(this,e,r,i)},n.activateMuteChangingEnable=function(){var t=this.videoSlot;t&&(t.wasClicked=!0)},n.startAd=function(){var e=this;this.logger.log("::VpaidVideo startAd()",2,"blue"),this.playerSuccessfullyStartedPromise.then((function(){var r=e.videoSlot,i=(e.options||{}).startTime;e.logger.log("::VpaidVideo startAd() playerSuccessfullyStartedPromise.then videoSlot.readyState="+(r&&r.readyState),2,"blue"),(4===r.readyState?Cl.call(e,r):new Promise((function(t){e.logger.trace("::VpaidVideo startAd() video has not been downloaded yet: readyState="+r.readyState+". Waiting when will be ready.",1,"blue");r.addEventListener("canplaythrough",(function i(){r.removeEventListener("canplaythrough",i),e.logger.trace("::VpaidVideo startAd() video has been downloaded: readyState="+r.readyState+".",2),t(Cl.call(e,r))}))}))).then((function(){r.currentTime=i,Object(m.c)(r,{display:""}),e.logger.trace("::VpaidVideo startAd() playPromise.then() calling super.startAd() .",1,"blue"),e._addDOMEventListener(r,"timeupdate",Ol.bind(e)),t.prototype.startAd.call(e)}))}))},n.stopAd=function(){return ml.call(this),t.prototype.stopAd.call(this)},n.pauseAd=function(){return ml.call(this),t.prototype.pauseAd.call(this)},n.resumeAd=function(){var e=this.videoSlot;return e&&Object(m.q)(e),t.prototype.resumeAd.call(this)},n.expandAd=function(){this.trigger("AdError","Not supported",o.a.GENERAL_VPAID_ERROR)},n.collapseAd=function(){this.trigger("AdError","Not supported",o.a.GENERAL_VPAID_ERROR)},n.skipAd=function(){return ml.call(this),t.prototype.skipAd.call(this)},n.setAdVolume=function(e,r){var i=this.videoSlot;return i&&(this.logger.trace("::VpaidVideo setAdVolume("+e+") videoSlot.muted="+i.muted+" startedVideoWithoutSound="+this.startedVideotWithoutSound+" startVideoWithSoundFailed="+this.startVideoWithSoundFailed+" safari="+b.i+" "),i.volume=e,i.muted&&e?i.paused||0!==i.currentTime?(!1===this.startedVideotWithoutSound||i.paused||i.currentTime>0)&&(i.muted=!1):i.muted=!1:i.muted||e||(i.muted=!0)),t.prototype.setAdVolume.call(this,e,r)},n.getAdVolume=function(){var e=this.videoSlot;return e&&(this.adVolume=b.g||b.i?e.muted?0:1:e.volume),t.prototype.getAdVolume.call(this)},n.getAdRemainingTime=function(){var t=this.videoSlot;return t?t.duration-t.currentTime:0},n.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,r=this.options,i=r&&r.mp4media||{},o=i.width,n=i.height;return o&&n?n/o:t&&e?e/t:9/16},n._destroy=function(){this.logger.trace("::VpaidVideo.destroy()");var e=this._createdVideoSlot;e&&Object(m.p)(e)&&Object(m.t)(e),t.prototype._destroy.call(this)},i.create=function(t,e){var r,o=e&&e.getAPI&&e.getAPI()||{},n=o.logger||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,pl))||n,l=o.getControlUnionData,d=l&&l("vnCache")||{strict:!1};return new Promise((function(r,o){if(b.b||b.a&&!d.strict){var n=e.format&&e.format._getModuleDimensions&&e.format._getModuleDimensions().viewportWidth||0,a=t.duration,l=[].concat(t.MediaFiles["video/mp4"]).filter((function(t){return t}));if(b.g||b.i||(l=l.concat(t.MediaFiles["video/webm"]).filter((function(t){return t}))),!l||!l.length)return void o();(function(t,e,r,i){if(!b.c||e===1/0||b.c&&b.d<85)return Promise.resolve(t);var o=t.map((function(t){return new Promise((function(o){var n=t.bitrate,a=t.src;if(a&&r&&r(a))o(null);else if(n&&e){var s=e*parseInt(n,10)/8;o(s<vl?t:null)}else a?(i&&i.trace("::VpaidVideo filterByWeights() request size of file "+a),Object(Ue.f)(a,{timeout:300,method:"HEAD",withCredentials:!1}).then((function(e){var r=(e||{}).currentTarget;(r||{}).status>=400&&o(t);var n=r&&r.getResponseHeader&&parseFloat(r.getResponseHeader("content-length")||0)/1e3;i&&i.log("::VpaidVideo filterByWeights() got size("+n+" KBytes) of file "+a),o(n<vl?t:null)})).catch((function(){o(t)}))):o(null)}))}));return Promise.all(o).then((function(t){return t.filter((function(t){return t}))}))})(l,a,e.isMediaUrlBlocked.bind(e),s).then((function(a){var l=a&&a.length&&a.reduce((function(t,e){return Math.abs(t.width-n)<=Math.abs(e.width-n)?t:e}));if(l){s.log("::VpaidVideo.create() Creative for playing: "+l.src,1,"color:green; font-weight:bold;");var d,c=l.width;c&&n&&!1===l.scalable&&(d=Math.abs(n-c)/n)>.1&&(s.trace("::VpaidVideo difference between viewportWidth && mediaWidth more than 10% ("+d+"). Set media.scalable = true"),l.scalable=!0);var u=t.rawDuration;e.setSelectedCreative(l.src,u);var h=new i({module:e,mp4media:l,moduleAPI:e.getAPI()});r(h)}else o()}))}else o()}))},i}(i.a),vl=4e3;function ml(){var t=this.videoSlot;t&&t.pause()}function bl(t){var e=t.target;this.hasAudio=Object(g.p)(e),this.trigger("AdLoadedVideoData")}function yl(t){var e=t.target,r=e.videoWidth,i=e.videoHeight,o=e.duration;this.logger.trace("::VpaidVideo @loadedmetadata"),this.adWidth&&this.adHeight||(this.logger.trace("::VpaidVideo @loadedmetadata Updating ad dimensions ("+r+":"+i+")"),this.adWidth=r,this.adHeight=i),this.adDuration=o,this.trigger("AdLoaded")}function Al(t){var e=t.target.duration;isNaN(e)?this.logger.trace("::VpaidVideo.onDurationChange() duration="+e+". video is not ready yet."):(this.adDuration=e,this.trigger("AdDurationChange"))}function Ol(t){var e=t.target,r=e.duration,i=e.currentTime;if(isNaN(r))this.logger.trace("::VpaidVideo.onDurationChange() duration="+r+". video is not ready yet.");else{this.adDuration=r;var o=this.adRemainingTime,n=this.options.startTime;o||i===n||(i=n);var a=(1e3*(r-Math.min(i,r))^0)/1e3;a!==o&&(this.adRemainingTime=a,r=(1e3*r^0)/1e3,this.trigger("AdRemainingTimeChange"),a<r&&o===r&&(this.logger.log("::VpaidVideo.onTimeUpdate() trigger AdImpression and AdVideoStart",1),this.trigger("AdImpression"),this.trigger("AdVideoStart")),a<.75*r&&o>=.75*r&&this.trigger("AdVideoFirstQuartile"),a<.5*r&&o>=.5*r&&this.trigger("AdVideoMidpoint"),a<.25*r&&o>=.25*r&&this.trigger("AdVideoThirdQuartile"),0===a&&o>0&&this.trigger("AdVideoComplete"))}}function wl(t){var e=t.target;this.adVolume=e.volume,this.trigger("AdVolumeChange")}function _l(t){var e=Sl(t),r=e.code,i=e.message;this.trigger("AdError",i,r)}function Sl(t){t.preventDefault();var e=t.currentTarget&&t.currentTarget.currentSrc,r=t.target&&t.target.error;return{code:r&&r.code>=1&&r.code<=3?o.a.GENERAL_LINEAR_ERROR:o.a.FAIL_MEDIA_DISPLAY,message:(r&&r.message||"Load error ")+(e?" source="+e:"")}}function Pl(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function Cl(t){var e=this;return t.play().then((function(t){return e.logger.log("::VpaidVideo.startAd() play() successfully."),t})).catch((function(r){return e.logger.warn("::VpaidVideo.startAd() play() catch error="+r+". Try start play one time."),t.play().catch((function(t){var r="::VpaidVideo playVideo("+e+") failed video autoplay";throw Object(g.e)(t,r,o.a.FAIL_MEDIA_START)}))}))}function jl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function El(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Il="::VpaidAudio",Tl={startTime:0},kl=["audio/mp3","audio/mpeg","audio/mp4","audio/aac","audio/aacp","video/mp4","video/webm","video/mpeg"],Vl=function(t){var e,r;function i(e){var r,i,o;void 0===e&&(e={});var n=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||a.a;(n=(null===(r=n)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Il))||n).trace("::VpaidAudio.constructor()"),o=t.call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jl(Object(r),!0).forEach((function(e){Dl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Tl,{},e,{ancestor:Il,logger:n}))||this,Dl(El(o),"_addParentSlotHideClassName",(function(){var t,e,r,i=o.environmentVars,n=i.parentSlot,a=i.parentFormat;o._parentSlotsHideClassName="vn_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),null==n||null===(t=n.classList)||void 0===t||t.add(o._parentSlotsHideClassName),null==a||null===(e=a.slot)||void 0===e||null===(r=e.classList)||void 0===r||r.add(o._parentSlotsHideClassName);var s="\n      ."+o._parentSlotsHideClassName+" {\n         width: 1px !important;\n         height: 1px !important;\n         position: absolute !important;\n         clip: rect(0 0 0 0) !important;\n         margin: -1px !important;\n      }";n&&Object(m.a)(n,s),(null==a?void 0:a.slot)&&Object(m.a)(a.slot,s)})),Dl(El(o),"_clearParentSlotHideClassName",(function(){if(o._parentSlotsHideClassName){var t,e,r,i=o.environmentVars,n=i.parentSlot,a=i.parentFormat;null==n||null===(t=n.classList)||void 0===t||t.remove(o._parentSlotsHideClassName),null==a||null===(e=a.slot)||void 0===e||null===(r=e.classList)||void 0===r||r.remove(o._parentSlotsHideClassName)}}));var s=e.media;o.adWidth=0,o.adHeight=0,o.media=s,o.startedVideotWithoutSound=null,o.startVideoWithSoundFailed=null,o.setAdVolumeCounter=0;var l=new g.a;return o.playerSuccessfullyStartedPromise=l.promise,o.playerSuccessfullyStartedResolve=l.resolve,o}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.initAd=function(e,r,i,n,a,s){var l,d=this;void 0===a&&(a={}),void 0===s&&(s={}),t.prototype.initAd.call(this,e,r,i,n,a,s);var c=s.videoSlotCanAutoPlay||a.videoSlotCanAutoPlay;this.videoSlotCanAutoPlay=c,"true"===c||"1"===c?this.videoSlotCanAutoPlay=!0:"false"!==c&&"false"!==c||(this.videoSlotCanAutoPlay=!1),l=this.videoSlot=s.videoSlot,this.slot=s.slot,this.logger.trace("::VpaidAudio.initAd() environmentVars.videoSlot="+s.videoSlot+" videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay+" useExistsVideoSlot="+this.useExistsVideoSlot+" videoSlot="+this.videoSlot,2);return new Promise((function(i,n){Object(m.p)(s.videoSlot,"video")&&(l=s.videoSlot,d.logger.track("::VpaidAudio.initAd() Using environmentVars.videoSlot, videoSlotCanAutoPlay is "+d.videoSlotCanAutoPlay)),function(t,i){void 0===t&&(t=d.videoSlot),void 0===i&&(i=!1),d.logger.trace("::VpaidAudio.initAd.videoStart()",2);var o=(d.options.moduleAPI||{}).saveVideoSlotParams;o&&o(t),Object(m.c)(t,{width:e+"px",height:r+"px"}),t.src=d.media.src,Object(m.c)(t,{display:i?"hidden":""}),t.load()}(l=d._createVideoSlot(l),!0);var a=Object(m.q)(l);if(a){var c=d._addDOMEventListener(l,"error",(function(t){var e=zl(t),r=e.code,i=e.message,o=Error(i);o.code=r,n(o)})),u=function(){return a.then((function(){l.pause(),d.startedVideotWithoutSound=l.muted;var e=d.getAdVolume();t.prototype.setAdVolume.call(d,e,{forceTrigger:!0}),c&&d._removeDOMEventListener(l,"error",c),c=null,d._addDOMEventListener(l,"error",Hl.bind(d)),d.logger.log("::VpaidAudio initAd() video.play() startPromise() video has been started successfully. Set it in pause. videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume+" super.setAdVolume("+e+")",2,"green"),d.playerSuccessfullyStartedResolve(l),i(d)}))};d.logger.trace("::VpaidAudio initAd() video.play() return promise"),u().catch((function(t){d.startedVideotWithoutSound=null,d.startVideoWithSoundFailed=!0;var e="::VpaidAudio initAd("+d+") failed video autoplay with videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume;d.logger.warn(e+" error:"+(t&&t.message||t)),!l.muted||l.volume?(d.adVolume=0,d.videoSlotCanAutoPlay=!1,l.muted=!0,l.volume=0,d.logger.log("::VpaidAudio initAd(). One more try start media with videoSlot.muted="+l.muted+" videoSlot.volume=0("+l.volume+") paused="+l.paused,1),a=Object(m.q)(l),u().then((function(){d.startedVideotWithoutSound=!0})).catch((function(t){var e="::VpaidAudio initAd("+d+") failed video autoplay err="+t;d.logger.error(e),n(Object(g.e)(t,e,o.a.FAIL_MEDIA_START))}))):n(Object(g.e)(t,e,o.a.FAIL_MEDIA_DISPLAY))}))}else if(void 0===a)if(d.logger.warn("::VpaidAudio initAd() video.play() do not return promise"),l.paused){var h="failed video autoplay";d.logger.error("::VpaidAudio initAd() "+h);var p=Error(""+h);p.code=o.a.FAIL_MEDIA_START,n(p)}else d.logger.log("::VpaidAudio initAd() video autoplay started",1),i(d);else d.logger.error("::VpaidAudio initAd() element is neither video nor audio tag"),n()}))},n._createVideoSlot=function(t){if(void 0===t&&(t=null),!this.options)return null;var e=this.slot,r=this.options,i=r.module,o=r.startTime;if(!t){var n=new ss(i);(t=n&&n.getControlNode()).muted=!1===this.videoSlotCanAutoPlay||!this.adVolume,t.currentTime=o,t.volume=t.muted?0:this.adVolume,t.playsInline=!0,Object(m.c)(t,{width:"100%",display:"none"}),this.logger.trace("::VpaidAudio._createVideoSlot, videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay)}return this._addDOMEventListener(t,"loadedmetadata",Nl.bind(this)),this._addDOMEventListener(t,"loadeddata",xl.bind(this)),this._addDOMEventListener(t,"durationchange",Ll.bind(this)),this._addDOMEventListener(t,"play",Fl.bind(this)),this._addDOMEventListener(t,"volumechange",Wl.bind(this)),this._addDOMEventListener(e||t,"click",Bl.bind(this)),this.videoSlot=t,this.logger.log("::VpaidAudio._createVideoSlot, videoSlot.muted="+t.muted),t},n.resizeAd=function(e,r,i){var o=this.videoSlot,n=this.useExistsVideoSlot,a=this.options.moduleAPI;if(this.logger.trace("::VpaidAudio.resizeAd("+e+", "+r+" useExistsVideoSlot="+n),n){var s=(a||{}).saveVideoSlotParams;s&&s(o),Object(m.c)(o,{width:e+"px",height:r+"px"})}else{var l,d=this.videoSlot,c=this.environmentVars,u=this.media,h=u.scalable,p=c||{},f=p.forceAspectRatio,v=p.slot,b=this.getAdAspectRatio(),y=f||u.maintainAspectRatio;if(b&&h&&v){var A,O=u.width>u.height,w=e>r;if(null===y){var _=u.width/u.height,S=e/r;y=100-100*(S<_?S/_:_/S)>10}!0===y&&(A=e/r<u.width/u.height),!1===y&&(A=e/r>u.width/u.height),O!==w&&(A=!0),w&&!O&&(A=!1),l=A?{width:e,height:e*b}:{height:r,width:r/b}}else l={width:u.width,height:u.height};this.logger.none("::VpaidAudio.resizeAd() adWidth="+e+" adHeight="+r+" newVideoSlotSize="+JSON.stringify(l)+" adAspectRatio="+b,2,"blue"),Object(g.c)(d,l)}return t.prototype.resizeAd.call(this,e,r,i)},n.activateMuteChangingEnable=function(){var t=this.videoSlot;t&&(t.wasClicked=!0)},n.startAd=function(){var e=this;this.logger.log("::VpaidAudio startAd()",2,"blue"),this.playerSuccessfullyStartedPromise.then((function(){var r=e.videoSlot,i=e.options;if(0===e.getAdVolume()||r.muted)return e._clearParentSlotHideClassName(),void e.trigger("AdError","Volume is muted for adType=audio|hybrid",o.a.GENERAL_VPAID_ERROR);e._addParentSlotHideClassName();var n=(i||{}).startTime;e.logger.log("::VpaidAudio startAd() playerSuccessfullyStartedPromise.then videoSlot.readyState="+(r&&r.readyState),2,"blue"),(4===r.readyState?Ul.call(e,r):new Promise((function(t){e.logger.trace("::VpaidAudio startAd() video has not been downloaded yet: readyState="+r.readyState+". Waiting when will be ready.",1,"blue");r.addEventListener("canplaythrough",(function i(){r.removeEventListener("canplaythrough",i),e.logger.trace("::VpaidAudio startAd() video has been downloaded: readyState="+r.readyState+".",2),t(Ul.call(e,r))}))}))).then((function(){r.currentTime=n,Object(m.c)(r,{display:""}),e.logger.trace("::VpaidAudio startAd() playPromise.then() calling super.startAd() .",1,"blue"),e._addDOMEventListener(r,"timeupdate",Fl.bind(e)),t.prototype.startAd.call(e)}))}))},n.stopAd=function(){return Ml.call(this),this._clearParentSlotHideClassName(),t.prototype.stopAd.call(this)},n.pauseAd=function(){return Ml.call(this),t.prototype.pauseAd.call(this)},n.resumeAd=function(){var e=this.videoSlot;return e&&Object(m.q)(e),t.prototype.resumeAd.call(this)},n.expandAd=function(){this._clearParentSlotHideClassName(),this.trigger("AdError","Not supported",o.a.GENERAL_VPAID_ERROR)},n.collapseAd=function(){this._clearParentSlotHideClassName(),this.trigger("AdError","Not supported",o.a.GENERAL_VPAID_ERROR)},n.skipAd=function(){return Ml.call(this),this._clearParentSlotHideClassName(),t.prototype.skipAd.call(this)},n.setAdVolume=function(e,r){var i=this.videoSlot;return i&&(this.logger.trace("::VpaidAudio setAdVolume("+e+") videoSlot.muted="+i.muted+" startedVideoWithoutSound="+this.startedVideotWithoutSound+" startVideoWithSoundFailed="+this.startVideoWithSoundFailed+" safari="+b.i+" "),i.volume=e,i.muted&&e?i.paused||0!==i.currentTime?(!1===this.startedVideotWithoutSound||i.paused||i.currentTime>0)&&(i.muted=!1):i.muted=!1:i.muted||e||(i.muted=!0)),t.prototype.setAdVolume.call(this,e,r)},n.getAdVolume=function(){var e=this.videoSlot;return e&&(this.adVolume=b.g||b.i?e.muted?0:1:e.volume),t.prototype.getAdVolume.call(this)},n.getAdRemainingTime=function(){var t=this.videoSlot;return t?t.duration-t.currentTime:0},n.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,r=this.options,i=r&&r.mp4media||{},o=i.width,n=i.height;return o&&n?n/o:t&&e?e/t:9/16},n._destroy=function(){this.logger.trace("::VpaidAudio.destroy()");var e=this._createdVideoSlot;e&&Object(m.p)(e)&&Object(m.t)(e),this._clearParentSlotHideClassName(),t.prototype._destroy.call(this)},i.create=function(t,e){var r,o=e&&e.getAPI&&e.getAPI()||{},n=o.logger||a.a,s=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Il))||n,l=o.getControlUnionData,d=l&&l("vnCache")||{strict:!1};return new Promise((function(r,o){if(b.b||b.a&&!d.strict){var n=t.duration,a=kl.reduce((function(e,r){return e.concat(t.MediaFiles[r]||[])}),[]).filter(Boolean);if(!a||!a.length)return void o();(function(t,e,r,i){if(!b.c||e===1/0||b.c&&b.d<85)return Promise.resolve(t);var o=t.map((function(t){return new Promise((function(o){var n=t.bitrate,a=t.src;if(a&&r&&r(a))o(null);else if(n&&e){var s=e*parseInt(n,10)/8;o(s<Rl?t:null)}else a?(i&&i.trace("::VpaidAudio filterByWeights() request size of file "+a),Object(Ue.f)(a,{timeout:300,method:"HEAD",withCredentials:!1}).then((function(e){var r=(e||{}).currentTarget;(r||{}).status>=400&&o(t);var n=r&&r.getResponseHeader&&parseFloat(r.getResponseHeader("content-length")||0)/1e3;i&&i.log("::VpaidAudio filterByWeights() got size("+n+" KBytes) of file "+a),o(n<Rl?t:null)})).catch((function(){o(t)}))):o(null)}))}));return Promise.all(o).then((function(t){return t.filter((function(t){return t}))}))})(a,n,e.isMediaUrlBlocked.bind(e),s).then((function(n){var a=n[0];if(a){s.log("::VpaidAudio.create() Creative for playing: "+a.src,1,"color:green; font-weight:bold;");var l=t.rawDuration;e.setSelectedCreative(a.src,l);var d=new i({module:e,media:a,moduleAPI:e.getAPI()});r(d)}else o()}))}else o()}))},i}(i.a),Rl=4e3;function Ml(){var t=this.videoSlot;t&&t.pause()}function xl(t){var e=t.target;this.hasAudio=Object(g.p)(e),this.trigger("AdLoadedVideoData")}function Nl(t){var e=t.target,r=e.videoWidth,i=e.videoHeight,o=e.duration;this.logger.trace("::VpaidAudio @loadedmetadata"),this.adWidth&&this.adHeight||(this.logger.trace("::VpaidAudio @loadedmetadata Updating ad dimensions ("+r+":"+i+")"),this.adWidth=r,this.adHeight=i),this.adDuration=o,this.trigger("AdLoaded")}function Ll(t){var e=t.target.duration;isNaN(e)?this.logger.trace("::VpaidAudio.onDurationChange() duration="+e+". video is not ready yet."):(this.adDuration=e,this.trigger("AdDurationChange"))}function Fl(t){var e=t.target,r=e.duration,i=e.currentTime;if(isNaN(r))this.logger.trace("::VpaidAudio.onDurationChange() duration="+r+". video is not ready yet.");else{this.adDuration=r;var o=this.adRemainingTime,n=this.options.startTime;o||i===n||(i=n);var a=(1e3*(r-Math.min(i,r))^0)/1e3;a!==o&&(this.adRemainingTime=a,r=(1e3*r^0)/1e3,this.trigger("AdRemainingTimeChange"),a<r&&o===r&&(this.logger.log("::VpaidAudio.onTimeUpdate() trigger AdImpression and AdVideoStart",1),this.trigger("AdAudioImpression"),this.trigger("AdVideoStart")),a<.75*r&&o>=.75*r&&this.trigger("AdVideoFirstQuartile"),a<.5*r&&o>=.5*r&&this.trigger("AdVideoMidpoint"),a<.25*r&&o>=.25*r&&this.trigger("AdVideoThirdQuartile"),0===a&&o>0&&(this._clearParentSlotHideClassName(),this.trigger("AdVideoComplete")))}}function Wl(t){var e=t.target;this.adVolume=e.volume,this.trigger("AdVolumeChange")}function Hl(t){var e=zl(t),r=e.code,i=e.message;this._clearParentSlotHideClassName(),this.trigger("AdError",i,r)}function zl(t){t.preventDefault();var e=t.currentTarget&&t.currentTarget.currentSrc,r=t.target&&t.target.error;return{code:r&&r.code>=1&&r.code<=3?o.a.GENERAL_LINEAR_ERROR:o.a.FAIL_MEDIA_DISPLAY,message:(r&&r.message||"Load error ")+(e?" source="+e:"")}}function Bl(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function Ul(t){var e=this;return t.play().then((function(t){return e.logger.log("::VpaidAudio.startAd() play() successfully."),t})).catch((function(r){return e.logger.warn("::VpaidAudio.startAd() play() catch error="+r+". Try start play one time."),t.play().catch((function(t){var r="::VpaidAudio playVideo("+e+") failed video autoplay";throw Object(g.e)(t,r,o.a.FAIL_MEDIA_START)}))}))}function ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Gl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xl="::VpaidCreator",Jl=[Js,fl,ps,ll],Ql=[Vl],Yl=Js,Zl=function(){function t(t,e,r,i,n){var s,l=this;void 0===i&&(i=!1),this._canGetBackToCanvasVpaid=!1,this.dataXml=t,this.module=r;var d=r&&r.getAPI&&r.getAPI().logger||a.a;this.logger=(null==d||null===(s=d.getChildWriter)||void 0===s?void 0:s.call(d,Xl))||d,this.logger.trace("::VpaidCreator.vpaidCreate("+t+") onlyReservedVpaid="+i);var c=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ql(Object(r),!0).forEach((function(e){Gl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t,{},{adParameters:e}),u=c.isEmpty;if(this.isEmpty=u,u){var h=Error("No Ads VAST response after one or more Wrappers.");h.isEmpty=!0,h.code=o.a.NO_ADS_RESPONSE,this.instance=Promise.reject(h)}else{if(i)return void(this.instance=Yl.create(c,r,!0));var p="video"===n?Jl:Ql;this.logger.trace("::VpaidCreator try to create implementation for adType="+n),this.instance=p.reduce((function(t,e){return t.catch((function(){l.logger.trace("::VpaidCreator try to get "+e.name+" instance");var t=e.create(c,r);return t&&e!==Js&&(l._canGetBackToCanvasVpaid=!0),t}))}),Promise.reject())}}var e=t.prototype;return e.getVpaidPromise=function(){var t=this;return this.isEmpty?this.instance:new Promise((function(e,r){var i=(t.module.getControlUnionData("vnBrowserCache")||{}).enabled;t.instance.then((function(t){i&&t&&t instanceof ps&&r()||e(t)})).catch((function(e){e&&e.message&&t.logger.warn("::VpaidCreator getVpaidPromise() error: "+e.message);var i=new Error("Could not find supported MediaFile.");i.code=o.a.MEDIA_FILE_NOT_FOUND,r(i)}))}))},e.canBackToReserveVpaid=function(){return this._canGetBackToCanvasVpaid},t}(),Kl=["video/mp4","video/webm","video/mpeg","audio/mp3","application/x-shockwave-flash","application/javascript","application/x-javascript","external/javascript","image/png","image/jpg","image/gif","text/html","audio/mpeg","audio/mp4","audio/aac","audio/aacp"];var $l="vnTrackingParams",td="::Extension[vnTrackingParams]";function ed(t){var e=t&&t.querySelector('Extension[type="vnTrackingParams"]');return e?{trackingParams:Object(w.k)(e,{optionName:"Parameter"}),global:Object(w.d)(e,"global"),important:Object(w.d)(e,"important")||e.getAttribute("important")}:null}var rd="vnShowViqeo",id="::Extension[vnShowViqeo]";var od="vnHeavyAdIntervention",nd="::Extension[vnHeavyAdIntervention]";function ad(t,e){return void 0===e&&(e="Extensions >"),(this.logger||a.a).trace(".parseVnHeavyAdIntervention()"),w.i.call(this,t,od,sd,{parentPrefix:e})}function sd(t){var e={},r=t&&t.querySelector("url");if(r){var i=Object(w.d)(r);this.logger.trace(nd+" reportUrl:"+i),e.url=i}return Object(g.r)(e)?null:e}function ld(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function dd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ld(Object(r),!0).forEach((function(e){cd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ld(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ud(){var t={},e=this.environmentVars,r=this._disableExtensions,i=this.adParameters,o=dd({},e,{},void 0===i?{}:i)||{},n=o.ext,a=o.extensions,s=n||{},l=s.vnShowViqeo,d=s.vnFormat;if(l&&r.indexOf("vnShowViqeo")<0){var c=l.important,u=oo(l);t.vnShowViqeo={options:u,important:c,global:!0}}if(d){var h=jo.call(this,d,null);h&&(h.global=!0,t.vnFormat=h)}if(!Object(g.r)(a)){var p={vnSets:Ha.bind(this),vnControls:Fo.bind(this),vnFormat:jo.bind(this),vnProhibitedWords:ln.bind(this),vnOTMTrackRecordable:Aa.bind(this),vnOTMTrackViewable:va.bind(this),vnDomainsBlockList:Pa.bind(this),vnMinPlayerSize:Ui.bind(this)};Object.entries(p).forEach((function(e){var r=e[0],i=(0,e[1])(a);i&&(void 0!==i.global&&(i.global=!0),t[r]=i)}))}return t}function hd(t){if(!t||!t.querySelector){var e=new Error("Malformed data xml.");return e.code=o.a.NO_ADS_RESPONSE,e}var r=this._disableExtensions,n={},a=Object(w.c)(t);a&&a.length>1&&(a=Array.from(a).filter((function(t){return null===t.getAttribute("sequence")})));var s=a&&a.length&&a[0],l=s.querySelectorAll("Impression");l&&(n.Impression=Array.from(l).map((function(t){return Object(w.e)(t)}))),n.id=s&&s.getAttribute("id"),n.uniqueId=n.id+"_"+Math.random().toString(36).substring(2,5),n.AdSystem=Object(w.e)(s,"AdSystem"),n.ClickThrough=Object(w.e)(s,"ClickThrough");var d=s.querySelector("Wrapper");if(d){var c=Object(w.e)(d,"VASTAdTagURI");if(!c)return this.logger.log("._parseDataXML() empty wrapperUrl",1),null;n.wrapperUrl=c}n.vnSets=La.call(this,s),n.vnSetsApply=qa.call(this,s),n.vnControls=No.call(this,s),n.vnFormat=Po.call(this,s),n.vnCreative=Wn.call(this,s),n.vnNoAd=Ri.call(this,s),n.vnCreativeBlock=Un.b.call(this,s),n.vnBrowserCache=Xn.call(this,s),n.vnCache=Yn.call(this,s),n.vnProhibitedWords=an.call(this,s),n.vnDebug=Da.call(this,s);var u=n.vnSkipTime=Zo.call(this,s),h=function(t){var e=Object(i.e)(t),r=Object(i.b)(t);return{isEmpty:e,rawDuration:r,duration:Object(w.g)(r),MediaFiles:Kl.reduce((function(e,r){return e[r]=Object(i.c)(t,r,!0),e}),{})}}(s);n.Media=dd({},h,{},u),n.vnAdType=ka.call(this,s),n.adType=Object(i.f)(s);var p=s.querySelectorAll("Tracking");n.Trackings=p&&Array.from(p).reduce((function(t,e){e&&pd(t,e.getAttribute("event"),Object(w.e)(e));return t}),{})||{},n.adParameters=Object(w.b)(s),n.Impression.forEach((function(t){return pd(n.Trackings,"Impression",t)})),n.vnVisibleInventory=function(t){var e=t&&t.querySelector('Extension[type="vnVisibleInventory"]'),r=e&&e.querySelectorAll("url"),i=r&&Array.from(r).map((function(t){return Object(w.e)(t)})),o=Object(g.u)(Object(w.d)(e,"global"));return(o||i&&i.length)&&{global:o,urls:i}}(s);var f=s.querySelectorAll("VideoClicks ClickTracking");f&&Array.from(f).forEach((function(t){pd(n.Trackings,"ClickTracking",Object(w.e)(t))}));var v=s.querySelectorAll('Extension[type="vnCreative"] > *');v&&Array.from(v).forEach((function(t){t.tagName&&pd(n.Trackings,"vnCreative:"+t.tagName.toLowerCase(),Object(w.e)(t))}));var m=s.querySelectorAll("ViewableImpression > *");m&&Array.from(m).forEach((function(t){t.tagName&&pd(n.Trackings,"ViewableImpression:"+t.tagName.toLowerCase(),Object(w.e)(t))}));var b=s.querySelectorAll('Tracking[event="progress"]');return b&&Array.from(b).forEach((function(t){var e=Object(w.e)(t),r=t.getAttribute("offset"),i=Object(w.g)(r),o=Object(w.f)(r);pd(n,"Progress",{url:e,offset:r,percentValue:o,timeValue:i})})),n.vnAfterplay=Cn.call(this,s),n.vnAdEvents=Rn.call(this,s)||{},n.vnPageChanged=ta.call(this,s)||{},n.vnEventsParams=Nn.call(this,s)||{},n.vnTrackingParams=ed.call(this,s)||{},n.vnUnderplay=na.call(this,s)||{},n.vnAdErrorsRules=Bo.call(this,s)||{},n.vnHeavyAdIntervention=ad.call(this,s)||{},r.indexOf("vnShowViqeo")<0&&(n.vnShowViqeo=function(t){var e=t&&t.querySelector('Extension[type="vnShowViqeo"]');return e?{options:Object(w.k)(e),global:Object(w.d)(e,"global"),important:Object(w.d)(e,"important")||e.getAttribute("important")}:null}(s)),n}function pd(t,e,r){t&&e&&r&&(t[e]=(t[e]||[]).concat(r))}function gd(t){var e=(this.options||{}).passUrlParams;if(!e||!e.length)return Promise.resolve(t);var r=Object(g.j)(window,document),i=Object(w.h)(r),o=Object.keys(i).reduce((function(t,r){return~e.indexOf(r)&&(t[r]=i[r]),t}),{});return Promise.resolve(Object(w.a)(t,o))}function fd(t){var e=this.advancedParams;if(Object(g.r)(e)||Object(g.r)(e.pass))return Promise.resolve(t);var r,i,o=e.pass,n=e.pass,a=n._decorateName,s=n._decorateValue;a&&"function"==typeof a?(r=a,delete o._decorateName):r=function(t){return"pass_"+t},s&&"function"==typeof s?(i=s,delete o._decorateValue):i=function(t){return t},this.logger.trace(" advanced params data");var l=Object(w.a)(t,Object.keys(o).reduce((function(t,e){return o[e]&&(t[r(e)]=i(o[e])),t}),{}));return Promise.resolve(l)}function vd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function md(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bd(){var t=this;this.logger.trace(".checkInventoryObserving");var e=this.format,r=this.reachInventories,i=!(this.visibleInventoryWasSent||!e)&&e.getReachInventoryFactory();if(i){var o=i.id,n=i.waiterCreator,a=yd.call(this);this.logger.log(".setInventoryObserving().",3);var s=r[o]=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vd(Object(r),!0).forEach((function(e){md(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},i,{},{waiter:null,reached:!1,tracked:!1,trackingUrls:a});s.waiter=n().then((function(){s.reached=!0,Ad.call(t)})),this.logger.trace(".checkInventoryObserving with id="+o+" ")}}function yd(){var t=(this.getControlData("vnVisibleInventory")||{}).urls;return t&&t.length&&t||[]}function Ad(){var t=this,e=this.reachInventories,r=Object.keys(e);return!this.visibleInventoryWasSent&&r&&r.length?new Promise((function(i){return r.reduce((function(r,o){return r.then((function(r){return!1===r?Od.call(t,e[o]):(!0===r&&(wd.call(t),i()),Promise.resolve(null))})).catch((function(r){return t.logger.error(".trackReachedInventories() error: "+(r&&r.message||r)),Od.call(t,e[o])}))}),Promise.resolve(!1))})):Promise.resolve()}function Od(t){var e=this;if(!this.visibleInventoryWasSent&&!t.tracked&&t.reached&&t.waiter){var r=yd.call(this)||t.trackingUrls&&t.trackingUrls.length?t.trackingUrls:[];return t.tracked=!0,this.logger.trace(".trackReachedInventory. trackingUrls="+r+" ",2),_d.call(this,t),r.length?(this.visibleInventoryWasSent=!0,this.logger.trace(".trackReachedInventory() trackStrongUrls: length="+r.length+" urls="+JSON.stringify(r),2),Wi.m.call(this,r).then((function(){var t=r.length>1?"and "+(r.length-1)+" visibleInventory's urls":"";return e.logger.trace(".trackReachedInventory() "+(r.length&&r[0])+" "+t+" were tracked successfully",2,"brown"),!0})).catch((function(){e.logger.warn(".trackReachedInventory() "+r.length+" urls of visibleInventory were not tracked ms")}))):Promise.resolve(!1)}return Promise.resolve(!1)}function wd(){var t=this;this.logger.log(".destroyVisibleInventories",1);var e=this.reachInventories,r=Object.keys(e);r&&r.length&&r.forEach((function(r){return _d.call(t,e[r])}))}function _d(t){var e=t.destroy;this.logger.trace(".trackReachedInventory() destroy visible inventory object("+t.id+")"),e&&e()}function Sd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Pd="spinner",Cd="Module::Control[spinner]",jd=function(t){var e,r;function i(e){var r;(r=t.call(this,Pd,e)||this).videoProgressId=null,r.oldCurrentTime=null,r.attemptsCounter=0,r.attemptLimit=e.getControlUnionData(Pd,"attemptLimit")||3;var i=e.getControlNode("wrapper"),o=r.node=Object(m.f)(i,50);return Object(m.c)(o,{zIndex:3,display:"none",width:"50px",height:"50px"}),e.setControlData(Pd,{node:o}),r._addVPAIDEventListener(e,"AdVideoStart",Td.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdPlaying",Td.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdPaused",kd.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdStopped",kd.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdVideoComplete",kd.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdSkipped",kd.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdDestroyed",kd.bind(Sd(r),e)),r._addVPAIDEventListener(e,"AdError",kd.bind(Sd(r),e)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Pd},i}($e.a);function Ed(t){var e=t.getControlNode(Pd);e&&Object(m.c)(e,{display:"block"}),++this.attemptsCounter>this.attemptLimit&&t.trigger("AdError","getAdRemainingTime returns the same time 3 times in a row",o.a.TIMEOUT_OF_MEDIA)}function Dd(t){var e=t.getControlNode(Pd);this.attemptsCounter=0,e&&Object(m.c)(e,{display:"none"})}function Id(t){var e=t.getAdRemainingTime();e<0?Dd.call(this,t):(be.c.call(t,"playing")&&e===this.oldCurrentTime?(this.logger.warn(Cd+".videoProgress() getAdRemainingTime returns the same time. Spinner is visible. currentTime="+e+" oldCurrentTime="+this.oldCurrentTime),Ed.call(this,t)):Dd.call(this,t),this.oldCurrentTime=e)}function Td(t){this.logger.trace(Cd+" onVideoStart() @AdVideoStart or @AdPlaying",2),clearInterval(this.videoProgressId),this.videoProgressId=setInterval(Id.bind(this,t),1e3)}function kd(t){clearInterval(this.videoProgressId),Dd.call(this,t)}function Vd(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["Advertisement"]);return Vd=function(){return t},t}function Rd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Md(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xd="title",Nd=function(t){var e,r;function i(e){var r;r=t.call(this,xd,e)||this;var i=e.getControlNode("wrapper"),o=Math.random().toString(36).substr(2,10),n=Wi.c.call(e,"vnCreative:debug")||{},a=n.urls,s=n.uniqueId,l=(a||[])[0],d=l&&l.split&&l.split("?")[0],c=e.getControlUnionData(xd,"css"),u=e.getControlUnionData(xd,"text"),h=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rd(Object(r),!0).forEach((function(e){Md(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:3,top:0,left:0,padding:"5px",cursor:"default",color:"white",lineHeight:1},c,{display:"inline-block"}),u||pe(Vd()),d&&Ue.b.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),d+"/"+o));return l&&r._addDOMEventListener(h,"click",(function(){r.logger.log("title @onclick"),Wi.f.call(e,o,l,s)})),e.setControlData(xd,{node:h}),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return xd},i}($e.a),Ld=Nd;function Fd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Wd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Hd="wrapper",zd=function(t){var e,r;function i(e){var r;r=t.call(this,Hd,e)||this;var i,o=e.getControlNode("iframe"),n=e.getControlUnionData(Hd,"css")||{},a=e.getControlNode(Hd);a||(a=r.node=Object(m.b)((null==o||null===(i=o.contentDocument)||void 0===i?void 0:i.body)||o,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fd(Object(r),!0).forEach((function(e){Wd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"relative",margin:"auto",width:"100%",height:"100%",boxSizing:"border-box",zIndex:0,color:"white",lineHeight:1.5,userSelect:"none",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"},n)),e.setControlData(Hd,{node:a}),setTimeout((function(){return e.trigger("slotSizeChanged")})));return a.classList&&a.classList.add("__vnm_"+e.mainModuleId+"_"),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.showMarginTop=function(){var t=this.node,e=this.module,r=(t&&getComputedStyle(t)||{}).paddingTop;parseFloat(r)<25&&(Object(m.c)(t,{paddingTop:Object(g.t)(25)}),setTimeout((function(){return e.trigger("slotSizeChanged")}),1))},o.hideTopSpace=function(){var t=this.node,e=this.module,r=(t&&getComputedStyle(t)||{}).paddingTop;25===parseFloat(r)&&(Object(m.c)(t,{paddingTop:0}),setTimeout((function(){return e.trigger("slotSizeChanged")}),1))},i.refreshControlData=function(t,e){t.setControlData(Hd,{node:e})},i}($e.a);function Bd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ud(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qd="container",Gd=function(t){var e,r;function i(e){var r;r=t.call(this,qd,e)||this;var i=e.getControlNode("wrapper"),o=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bd(Object(r),!0).forEach((function(e){Ud(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"relative",width:"100%",height:"100%",textAlign:"center",background:"black",overflow:"hidden",zIndex:1},e.getControlUnionData(qd,"css"),{},e.getControlUnionData("background","css"),{},e.getControlUnionData("containerBackground","css")));return e.setControlData(qd,{node:o}),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i}($e.a);function Xd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Jd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qd="containerShadow",Yd=function(t){var e,r;function i(e){var r;r=t.call(this,Qd,e)||this;var i=e.getControlNode("container"),o=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xd(Object(r),!0).forEach((function(e){Jd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#8d8b8b",opacity:0,zIndex:-1},e.getControlUnionData(Qd,"css")));return e.setControlData(Qd,{node:o}),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i}($e.a);var Zd="containerIframe",Kd=function(t){var e,r;function i(e){var r;r=t.call(this,Zd,e)||this;var i=new g.a;r.createdPromise=i.promise,r.createdResolve=i.resolve;var o=e.getControlNode("container");function n(t){var r,i;this.logger.trace(".initIframe() @load"),this.loaded=!0;var o=(null==t||null===(r=t.contentWindow)||void 0===r||null===(i=r.document)||void 0===i?void 0:i.body)||t;Object(m.c)(o,{minHeight:"100%",padding:0,margin:0,textAlign:"center",overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"}),Object(m.b)(o,"div",{display:"inline-block",height:"100%",verticalAlign:"middle"}),this.node=t;var n={node:t},a=(e&&e.options||{}).iframeRemoveDelay;t&&"IFRAME"===t.tagName&&a&&(n.removeDelay=a),e.setControlData(Zd,n),this.logger.log("containerIframe.onFrameLoaded() sandboxed iframe was created and inited"),this.createdResolve(t)}return r.loaded=!1,yn(o,{shouldCreateIframe:!1,logger:r.logger}).then((function(t){n.call(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),t)})),r.logger.log(".containerIframe.onFrameLoaded() sandboxed iframe was appended"),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype.isReady=function(){return this.createdPromise},i}($e.a);function $d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function tc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ec="vpaidSlot",rc=function(t){var e,r;function i(e){var r;r=t.call(this,ec,e)||this;var i=e.getControlNode("containerIframe"),o=i&&i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.body||i,n={outline:"1px #ff0 dotted"},a=Object(Ct.b)("show.containers"),s=Object(Ct.b)("show.containers.vpaid_slot"),l=s&&oc(s,n)||a&&oc(a,n)||{},d=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$d(Object(r),!0).forEach((function(e){tc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",top:0,left:0,width:"100%",height:"100%",textAlign:"justify",zIndex:2},e.getControlUnionData(ec,"css"),{},l),c=r.node=Object(m.b)(o,"div",d);return e.setControlData(ec,{node:c}),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.refreshControlData=function(t,e){t.setControlData(ec,{node:e})},i}($e.a),ic=rc;function oc(t,e){return void 0===e&&(e={}),t?t.includes(":")&&t||e:null}var nc=function(t){var e,r;function i(e){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).moduleAPI=e.moduleAPI,r.starting=!1,r.adRemainingTimeChecker=e.adRemainingTimeChecker,r.getTimeBeforeSkip=e.getTimeBeforeSkip,r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.start=function(t){var e=this;if(void 0===t&&(t=7),!this.starting){this.starting=!0;var r=this.moduleAPI,i=this.getTimeBeforeSkip,o=r||{},n=o.getAdDuration,a=o.addVPAIDEventListener,s=o.removeVPAIDEventListener,l=n&&n(),d=i&&i();if(this.logger.trace(" RemainTimeChecker: adDuration="+l+" timeBeforeSkip="+d),l)this.logger.trace(" RemainTimeChecker: adDuration="+l+", so check adRemainingTime and call invokeRemainingTimeChecker()"),this.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker(0);else{var c="manualCheck";this.logger.trace(" RemainTimeChecker @AdStarted: invokeRemainingTimeChecker() will be invoked in event AdDurationChange ");var u=a("AdDurationChange",(function(){s("AdDurationChange",u),e._removeTimeout(c),e.logger.trace("RemainTimeChecker @AdDurationChange: calls waitAdRemainingTimeAndCallInvokeRemainingTimeChecker()"),setTimeout(e.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker.bind(e,0),1)}),this);--t>0&&(this.logger.trace(" RemainTimeChecker start(): did not get @AdDurationChange from vpaid. Let's do one more check manually after 500 ms. Remain "+t+" attempts"),this._addTimeout(c,(function(){e.starting=!1,e.start.call(e,t)}),500))}}},o.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker=function(t){void 0===t&&(t=0);if(t>10)this.logger.warn(" RemainTimeChecker.waiteAdRemainingTimeAndCallInvokeRemainingTimeChecker()("+t+"): fail to call invokeRemainingTimeChecker() - to many attempts("+t+")");else{var e=this.moduleAPI||{},r=e.getAdRemainingTime,i=e.getAdDuration,o=i&&i();r&&r()&&o?this.invokeRemainingTimeChecker():(this.logger.trace(" RemainTimeChecker.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker(): next attempt("+t+") to call invokeRemainingTimeChecker after 150 ms"),setTimeout(this.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker.bind(this,t+1),150))}},o.invokeRemainingTimeChecker=function(){var t=this;this._addTimeout("RemainingTimeChange",(function(){t.adRemainingTimeChecker.call(t)&&t.invokeRemainingTimeChecker()}),500)},i}(n.a);function ac(){var t=dc(["The ad will end in "," sec"]);return ac=function(){return t},t}function sc(){var t=dc(["Skip ad in "," sec"]);return sc=function(){return t},t}function lc(){var t=dc([""," sec"]);return lc=function(){return t},t}function dc(t,e){return e||(e=t.slice(0)),t.raw=e,t}function cc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function uc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pc="skipAdCountdown",gc="Module::Control[skipAdCountdown]",fc=function(t){var e,r;function i(e){var r;(r=t.call(this,pc,e)||this).moduleAPI=e.getAPI(),void 0===r.invisible&&(r.invisible=!1);var i=hc(r),o=i.invisible,n=i.moduleAPI,a=n.setControlData,s=n.getControlUnionData,l=n.getControlNode,d=n.addVPAIDEventListener,c=r.timeBeforeSkip=s(pc,"timeBeforeSkip"),u=s(pc,"totalTimeCountdown");if(r.totalTimeCountdown="show"===u||Object(g.u)(u),!c&&!r.totalTimeCountdown)return hc(r);if(r.isSmallSizeModule=b.h,r.starting=!1,!o){var h=l("wrapper"),p=s(pc,"css"),f=r.node=Object(m.b)(h,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cc(Object(r),!0).forEach((function(e){uc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:1,top:"10px",right:Object(g.t)(10),padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},p,{display:"none"}));a(pc,{node:f})}var v=hc(r),y=v.logger,A=v.moduleAPI,O=A||{},w=O.getAdDuration,_=O.getAdRemainingTime;r.timeBeforeSkipChecker=new Ke({getTimeBeforeSkip:function(){return c},shouldSetAdSkippableState:!1,moduleAPI:A,logger:y}),r._addDestroyableObject(r.timeBeforeSkipChecker);var S=r.remainTimeChecker=new nc({getTimeBeforeSkip:function(){return c},moduleAPI:A,logger:y,adRemainingTimeChecker:vc.bind(hc(r))});return r._addDestroyableObject(S),d("AdStarted",(function(){return S.start()}),hc(r)),d("AdVideoStart",(function(){return S.start()}),hc(r)),d("AdVideoComplete",mc.bind(hc(r)),hc(r)),d("AdSkippableStateChange",(function(){w&&_&&w()&&_()&&(r.logger.trace(gc+" @AdSkippableStateChange: calls adRemainingTimeChecker()",2,"pink"),setTimeout(vc.bind(hc(r)),1))}),hc(r)),d("vnFormatStateChanged",(function(t){w&&_&&w()&&_()&&(r.isSmallSizeModule=b.h||t&&!0===t.isFloating,r.logger.trace(gc+" @vnFormatStateChanged: calls adRemainingTimeChecker() event.isFloating="+t.isFloating+" this.isSmallSizeModule="+r.isSmallSizeModule,2,"pink"),setTimeout(vc.bind(hc(r)),1))}),hc(r)),d("AdSkipAdPositionChanged",(function(t){var e=t.offsetWidth;if(!r.invisible){var i=l(pc);Object(m.c)(i,{right:Object(g.t)(e||10)})}})),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return pc},i}($e.a);function vc(){var t=this.totalTimeCountdown,e=this.invisible,r=this.reservedSkipAdTimerHandler,i=this.timeBeforeSkipChecker,o=this.moduleAPI,n=o.getAdElapsedTime,a=o.getControlNode,s=o.getAdRemainingTime,l=o.getAdSkippableState,d=o.getAdDuration,c=this.timeBeforeSkip||0,u=l(),h=i?i.getAdElapsedTime():n(),p=s(),g=d();if(g<0)return this.logger.warn(gc+" .adRemainingTimeChecker():adDuration="+g),!0;p>g&&!r&&(this.logger.warn(gc+" .adRemainingTimeChecker():remainingTime("+p+") is greater than adDuration("+g+") timeBeforeSkip="+c+" sec"),this.reservedSkipAdTimerHandler=this._addTimeout("Module::Control[skipAdCountdown]:ReservedSkipAd",bc.bind(this),1e3*c)),this.logger.none(gc+" adRemainingTimeChecker():\ninvisible="+e+"\nadSkippableState="+u+"\ntimeBeforeSkip="+c+"\nadDuration="+g+"\nremainingTime="+p+"\ntotalTimeCountdown="+t+" ",2,"pink");var f=a(pc);if((c===1/0||c>g)&&!t||u&&(!t||t&&!p))return Object(m.c)(f,{display:"none"}),!1;if(p<0)return!0;if(this.logger.none(gc+" adRemainingTimeChecker():skipAdCountdown="+f,2,"pink"),!f&&!e)return!1;var v=0!==g?Math.round(Math.min(g,c)-h):p,b=v>=0?v:Math.round(p);if(this.logger.none(" @AdRemainingTimeChange "+v+":"+c+":"+g+" adElapsedTime="+h,1,"cyan"),b===1/0)Object(m.c)(f,{display:"none"});else if(!e){this.logger.none(" @AdRemainingTimeChange remainingTime="+p+" "+v+":"+c+":"+g+" adElapsedTime="+h+" this.isSmallSizeModule="+this.isSmallSizeModule,1,"orange");var y=this.isSmallSizeModule?pe(lc(),b):v>0&&c!==1/0&&c<=g?v>0?pe(sc(),b):"":p!==1/0&&pe(ac(),Math.round(p));y?(f.innerHTML=y,Object(m.c)(f,{display:"block"})):Object(m.c)(f,{display:"none"})}return this.targetTimeWasReached||p&&!(v<=0&&(c<=g||0===g))||(this.logger.trace(" Target time reached"),bc.call(this),this.targetTimeWasReached=!0),!0}function mc(){this.logger.trace(gc+" @AdVideoComplete"),this.logger.log(gc+" Video complete, countdown target time is not reached",1),bc.call(this)}function bc(){var t=this.remainTimeChecker,e=this.totalTimeCountdown,r=this.invisible,i=this.moduleAPI,o=i.getControlNode,n=i.setAdSkippableState,a=i.getAdRemainingTime;if(this.starting=!1,n(!0),!r){var s=a(),l=o(pc);l&&(!e||e&&!s)&&(Object(m.c)(l,{display:"none"}),t&&t._destroy(),this.remainTimeChecker=null)}}var yc=r(32),Ac=r.n(yc);function Oc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function wc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Sc="skipAd",Pc="Module::Control[skipAd]",Cc=function(t){var e,r;function i(e){var r;(r=t.call(this,Sc,e)||this).moduleAPI=e.getAPI();var i=_c(r),o=i.invisible,n=i.logger,a=i.moduleAPI,s=a||{},l=s.setControlData,d=s.getControlUnionData,c=s.getControlNode,u=s.addVPAIDEventListener,h=r.timeBeforeSkip=d(Sc,"timeBeforeSkip");if(!o&&h<1/0){var p=c("wrapper"),g=d(Sc,"css")||{},f=r.node=Object(m.b)(p,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oc(Object(r),!0).forEach((function(e){wc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:5,top:0,right:0,padding:"10px",cursor:"pointer",opacity:1},g,{display:"none"}),Ac.a,(function(){r.logger.trace(Pc+" @click"),e.skipAd()}));if(!b.h)d(Sc,"hover")&&(Object(m.c)(f,{opacity:0}),r._addDOMEventListener(p,"mouseenter",(function(){return Object(m.c)(f,{opacity:1})})),r._addDOMEventListener(p,"mouseleave",(function(){return Object(m.c)(f,{opacity:0})})));l(Sc,{node:f})}return u("AdSkippableStateChange",jc.bind(_c(r))),r.timeBeforeSkipChecker=new Ke({getTimeBeforeSkip:function(){return h},moduleAPI:a,logger:n}),r._addDestroyableObject(r.timeBeforeSkipChecker),jc.call(_c(r)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Sc},i}($e.a);function jc(){var t=this.module,e=this.invisible,r=t.getControlNode(Sc);if(r&&!e&&!be.c.call(t,"afterplay")){var i=t.getAdSkippableState();this.logger.trace(Pc+" @AdSkippableStateChange()) adSkippableState="+i,1);var o=null;if(r)Object(m.c)(r,{display:i?"block":"none"}),o=Object(g.i)(r).offsetWidth;t.trigger("AdSkipAdPositionChanged",{offsetWidth:o})}}var Ec,Dc=r(33),Ic=r(36),Tc=r.n(Ic),kc=r(37),Vc=r.n(kc);function Rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Mc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rc(Object(r),!0).forEach((function(e){xc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Lc="volume",Fc=(null===a.a||void 0===a.a||null===(Ec=a.a.getChildWriter)||void 0===Ec?void 0:Ec.call(a.a,"Module::Control[volume]"))||a.a,Wc=function(t){return t?Tc.a:Vc.a},Hc=function(t){var e,r;function i(e){var r;r=t.call(this,Lc,e)||this;var i=e.options,o=i.disableHoverAudio,n=i.disableSmoothVolumeChange,a=e.getAdVolume();r.logger.trace(":constructor() disableHoverAudio="+o+" startingVolume="+a+" mobile="+b.h+" safari="+b.h);var s=e.getControlNode("wrapper"),l=function(t){if(!0!==t.handled){t.preventDefault(),t.stopPropagation(),t.handled=!0;var r=e.getAdVolume();e.setAdVolume(r?0:1,{smoothUpdate:!0})}},d=r.node=Object(m.b)(s,"div",Mc({position:"absolute",zIndex:1,bottom:0,right:0,width:"40px",height:"40px",padding:"10px",cursor:"pointer",stroke:"white",display:"none",boxSizing:"content-box"},e.getControlUnionData(Lc,"css")),Wc(a),l);r._addDOMEventListener(d,"touchend",l),r._updateVolumeTimeoutId=null;var c=Nc(r);function u(t,e,r){Fc.none(".updateVolume("+t.toFixed(2)+", "+e.toFixed(2)+", "+r+")"),c.cancelVolumeUpdate();var i=Object(g.d)(t+r,0,1);(r<0&&i<e||r>0&&i>e)&&(i=e),c.originalSetAdVolume(i,{invoker:this}),i!==e?this._updateVolumeTimeoutId=setTimeout(u.bind(this,i,e,r),16):Uc.call(this)}return e.setControlData(Lc,{node:d}),r._addVPAIDEventListener(e,"AdExpandedChange",qc.bind(e)),r._addVPAIDEventListener(e,"AdVolumeChange",Gc.bind(e)),r._addVPAIDEventListener(e,"AdVideoComplete",zc.bind(Nc(r))),r._addVPAIDEventListener(e,"AdDestroyed",Bc.bind(Nc(r))),r._addVPAIDEventListener(e,"AdAudioDisabled",Xc.bind(e)),r._addVPAIDEventListener(e,"AdAudioEnabled",Jc.bind(e)),r._addVPAIDEventListener(e,"AdLoadedVideoData",Qc.bind(e)),r._addVPAIDEventListener(e,"AdVideoStart",Qc.bind(e)),r.originalSetAdVolume=r._patchMethod(e,"setAdVolume",(function(t,e){void 0===e&&(e={});var r=Mc({},{step:.05,invoker:null,smoothUpdate:null},{},e),i=r.step,o=r.invoker,a=r.smoothUpdate;this.logger.trace(".setAdVolume("+t+", params:"+JSON.stringify(e,["step","invoker","smoothUpdate"])+") ");var s=this.getAdVolume(),l=!o||o===c;if(!this.useExistsVideoSlot&&!l&&!this.canChangeVolume()&&(t>0||s>0))return void this.logger.warn("setAdVolume() attempt to set volume="+t+" was ignored");if(Uc.call(this),s!==t){if(n||l&&!a)return c.cancelVolumeUpdate(),c.originalSetAdVolume(t,{invoker:this}),void this.logger.trace("setAdVolume("+t+") form module.setAdVolume()");var d=i*(s>t?-1:1);u.call(this,s,t,d)}})),b.h||o||b.i||Yc.call(Nc(r),e),r.logger.trace("constructor: at first setup volume to default value of Module = module.setAdVolume("+a+")"),e.setAdVolume(a,{step:1,invoker:Nc(r)}),r.canChangeVolume=e.canChangeVolume.bind(e),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.cancelVolumeUpdate=function(){clearTimeout(this._updateVolumeTimeoutId),this._updateVolumeTimeoutId=null},o.updateInProgress=function(){return null!=this._updateVolumeTimeoutId},i.getName=function(){return Lc},i}($e.a);function zc(){this.logger.trace("@AdVideoComplete Clearing updateVolume timeout ("+this._updateVolumeTimeoutId+")",2),this.cancelVolumeUpdate()}function Bc(){this.logger.trace("@AdDestroyed Clearing updateVolume timeout ("+this._updateVolumeTimeoutId+")",2),this.cancelVolumeUpdate()}function Uc(){var t=this.getControlNode(Lc),e=Math.ceil(this.getAdVolume());t&&(t.innerHTML=Wc(e))}function qc(){var t=this.getAdExpanded(),e=this.getAdVolume();this.setAdVolume(+t?e:0,{step:1}),this.logger.trace("onAdExpandedChange() adExpanded="+t+" adVolume="+e)}function Gc(){Uc.call(this)}function Xc(){this.logger.trace("@AdAudioDisabled",2);var t=this.getControlNode(Lc);Object(m.c)(t,m.n)}function Jc(){this.logger.trace("@AdAudioEnabled",2);var t=this.getControlNode(Lc);Object(m.c)(t,{display:"block",visibility:"visible"})}function Qc(){var t=this.vpaid.hasAudio;void 0===t&&(t=this.vpaid.getAdVolume()>-1);var e=this.getControlNode(Lc);e&&Object(m.c)(e,{display:t?"block":"none"})}function Yc(t){var e=this;if(!this.mouseEventsAlreadySet){this.logger.trace("initMouseEvents()");var r=t.getControlNode("container");this._addDOMEventListener(r,"mouseenter",(function(){e.logger.trace("@mouseleave adVolume(1)"),t.setAdVolume(1,{invoker:e})})),this._addDOMEventListener(r,"mouseleave",(function(){e.logger.trace("@mouseleave adVolume(0)"),t.setAdVolume(0,{invoker:e})})),this.mouseEventsAlreadySet=!0}}var Zc,Kc=r(38),$c=r.n(Kc);function tu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function eu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ru="play",iu=(null===a.a||void 0===a.a||null===(Zc=a.a.getChildWriter)||void 0===Zc?void 0:Zc.call(a.a,"Module::Control[play]"))||a.a;function ou(){iu.trace("@AdPaused");var t=this.getControlNode(ru);Object(m.c)(t,{display:""})}function nu(){iu.trace("@AdPlaying");var t=this.getControlNode(ru);Object(m.c)(t,{display:"none"})}var au=function(t){var e,r;function i(e){var r,i=function(t){!0!==t.handled&&(t.stopPropagation(),t.preventDefault(),t.handled=!0,e.resumeAd())},o=(r=t.call(this,ru,e)||this).node=Object(m.b)(e.getControlNode("wrapper"),"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(r),!0).forEach((function(e){eu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:3,top:0,right:0,bottom:0,left:0,width:"inherit",background:"rgba(0, 0, 0, .7)",cursor:"pointer"},e.getControlUnionData(ru,"css"),{display:"none"}),$c.a,i);return r._addDOMEventListener(o,"touchend",i),Object(m.c)(o.firstChild,{position:"absolute",top:"50%",left:"50%",margin:"-32px 0 0 -32px"}),e.setControlData(ru,{node:o}),r._addVPAIDEventListener(e,"AdPaused",ou.bind(e)),["AdVideoStart","AdStarted","AdResumed","AdPlaying"].forEach((function(t){r._addVPAIDEventListener(e,t,nu.bind(e))})),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return ru},i}($e.a);function su(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function lu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?su(Object(r),!0).forEach((function(e){du(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):su(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function du(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cu,uu="progress",hu="progressBar",pu=function(t){var e,r;function i(e){var r;r=t.call(this,uu,e)||this;var i=e.getControlNode("wrapper"),o=r.node=Object(m.b)(i,"div",lu({position:"absolute",zIndex:2,bottom:0,left:0,width:"100%",height:"2px",background:"rgba(0, 0, 0, .5)"},e.getControlUnionData(uu,"css"))),n=Object(m.b)(o,"div",lu({position:"absolute",width:"0%",height:"2px",background:"#aab445"},e.getControlUnionData(hu,"css")));return e.setControlData(uu,{node:o}),e.setControlData(hu,{node:n}),r._addVPAIDEventListener(e,"AdVideoStart",gu.bind(e)),r._addVPAIDEventListener(e,"AdVideoComplete",fu.bind(e)),r._addVPAIDEventListener(e,"AdRemainingTimeChange",vu.bind(e)),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.hide=function(){var t=this.node;t&&(this.isHidden=!0,Object(m.c)(t,{display:"none"}))},o.restore=function(){var t=this.node,e=this.isHidden;t&&e&&(this.isHidden=!1,Object(m.c)(t,{display:""}))},i.getName=function(){return uu},i}($e.a);function gu(){var t=this.getControlNode(hu);t&&Object(m.c)(t,{width:"0%"})}function fu(){var t=this.getControlNode(hu);t&&Object(m.c)(t,{width:"100%"})}function vu(){var t=this.getControlNode(hu);if(t){var e=this.getAdDuration(),r=1-this.getAdRemainingTime()/e;Object(m.c)(t,{width:100*r+"%"})}}function mu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function bu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yu,Au="advLogo",Ou=(null===a.a||void 0===a.a||null===(cu=a.a.getChildWriter)||void 0===cu?void 0:cu.call(a.a,"Module::Control[advLogo]"))||a.a,wu=function(t){var e,r;function i(e){var r;r=t.call(this,Au,e,!0)||this;var i=e.getControlNode("wrapper"),o=e.getControlUnionData(Au,"css")||{};o.width&&o.height||(o.width="160px",o.height="40px");var n=parseInt(o.width,10),a=parseInt(o.height,10),s=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mu(Object(r),!0).forEach((function(e){bu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:4,left:0,marginTop:"10px",backgroundRepeat:"no-repeat",cursor:"pointer",visibility:"hidden"},o));b.h||(r._addDOMEventListener(s,"mouseenter",(function(){return Object(m.c)(s,{opacity:.8})})),r._addDOMEventListener(s,"mouseleave",(function(){return Object(m.c)(s,{opacity:1})})));var l=e.getControlUnionData(Au,"url");r._addDOMEventListener(s,"click",(function(){e.vpaid?e.vpaid.trigger("AdClickThru",l||null,null,!0):Ue.b.call(e,l)})),e.setControlData(Au,{node:s});var d=getComputedStyle(i).marginBottom,c=Math.max(s.offsetHeight+10,parseInt(d,10));return Object(m.c)(i,{marginBottom:c+"px"}),r._addVPAIDEventListener(e,"AdSizeChange",_u.bind(e,n,a)),r._addVPAIDEventListener(e,"AdStarted",Su.bind(e)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Au},i}($e.a);function _u(t,e){Ou.trace("@AdSizeChange",2);var r=this.getControlNode(Au),i=this.getControlNode("callButton"),o=this.getAdWidth(),n=e/t,a=Math.min(.3*o,t),s=Math.min(a*n,e),l=0;this.format.isFloatingMode()&&(l=10,i||(a+=20,s+=20)),Object(m.c)(r,{left:l+"px",backgroundSize:a+"px "+s+"px",width:a+"px",height:s+"px"}),this._addTimeout("callButtonIsReady",Pu.bind(this),0)}function Su(){var t=this.getControlNode(Au);Object(m.c)(t,{visibility:"visible"})}function Pu(){var t=this.getControlNode(Au),e=this.getControlNode("callButton"),r=(e&&e.offsetHeight||0)-t.offsetHeight;if(r>0){var i=window.getComputedStyle(e).marginTop;Object(m.c)(t,{marginTop:r/2+parseInt(i,10)+"px"})}}function Cu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function ju(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Eu="callButton",Du=(null===a.a||void 0===a.a||null===(yu=a.a.getChildWriter)||void 0===yu?void 0:yu.call(a.a,"Module::Control[callButton]"))||a.a,Iu="#f8f8f8";function Tu(){Du.trace("@AdSizeChange",2);var t=this.getControlNode(Eu),e=this.getControlNode("advLogo"),r=this.getAdWidth(),i=e?10:0,o=e&&e.offsetWidth||0,n=getComputedStyle(t).borderWidth,a=2*parseInt(n,10),s=this.format.isFloatingMode(),l=Math.min(.1*r,33),d=.3*r;r<640&&(d=r-o-i-10-a);var c=0;s&&(d=r-o-i-10-a-20,l=33,c=9),Object(m.c)(t,{right:c+"px",width:d+"px",height:l+"px"}),this._addTimeout("advLogoIsReady",Vu.bind(this),0)}function ku(){var t=this.getControlNode(Eu);Object(m.c)(t,{visibility:"visible"})}function Vu(){var t=this.getControlNode(Eu),e=this.getControlNode("advLogo"),r=(e&&e.offsetHeight||0)-t.offsetHeight;if(r>0){var i=getComputedStyle(e).marginTop;Object(m.c)(t,{marginTop:r/2+parseInt(i,10)+"px"})}}var Ru,Mu=function(t){var e,r;function i(e){var r;r=t.call(this,Eu,e,!0)||this;var i=e.getControlNode("wrapper"),o=e.getControlUnionData(Eu,"css")||{},n=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cu(Object(r),!0).forEach((function(e){ju(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:4,right:0,top:"100%",height:"33px",padding:"5px",marginTop:"10px",backgroundColor:Iu,border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:"3px",cursor:"pointer",visibility:"hidden",alignItems:"center",justifyContent:"center"},o,{display:"flex"}),pn.a),a=n.querySelector("svg");if(a&&Object(m.c)(a,{height:"100%"}),Object(m.b)(n,"span",{padding:"10px 10px 10px 0",color:"#000",lineHeight:"15px",textAlign:"center"},e.getControlUnionData(Eu,"text")||"  "),e.setControlData(Eu,{node:n}),!b.h){var s=e.getControlUnionData(Eu,"hoverBackgroundColor");r._addDOMEventListener(n,"mouseenter",(function(){return Object(m.c)(n,{backgroundColor:s||"#dedede",border:"1px solid rgba(0, 0, 0, 0.75)"})})),r._addDOMEventListener(n,"mouseleave",(function(){return Object(m.c)(n,{backgroundColor:o.backgroundColor||Iu,border:"1px solid rgba(0, 0, 0, 0.5)"})}))}var l=e.getControlUnionData(Eu,"url");r._addDOMEventListener(n,"click",(function(){e.vpaid?e.vpaid.trigger("AdClickThru",l||null,null,!0):Ue.b.call(e,l)}));var d=getComputedStyle(i).marginBottom,c=Math.max(n.offsetHeight+20,parseInt(d,10));return Object(m.c)(i,{marginBottom:c+"px"}),r._addVPAIDEventListener(e,"AdSizeChange",Tu.bind(e)),r._addVPAIDEventListener(e,"AdStarted",ku.bind(e)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Eu},i}($e.a);function xu(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["Learn more"]);return xu=function(){return t},t}function Nu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Lu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Fu="moreInfo",Wu=(null===a.a||void 0===a.a||null===(Ru=a.a.getChildWriter)||void 0===Ru?void 0:Ru.call(a.a,"Module::Control[moreInfo]"))||a.a,Hu="#fff",zu="rgba(0, 0, 0, 0.2)",Bu="rgba(0, 0, 0, 0.5)",Uu=function(t){var e,r;function i(e){var r;r=t.call(this,Fu,e,!0)||this;var i=e.getControlNode("wrapper"),o=e.getControlUnionData(Fu,"css")||{},n=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nu(Object(r),!0).forEach((function(e){Lu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:4,padding:"10px",borderRadius:"2px",transition:"0.3s",color:o.color||Hu,border:"1px solid "+(o.color||Hu),textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)",backgroundColor:o.backgroundColor||zu,cursor:"pointer",visibility:"hidden",alignItems:"center",justifyContent:"center"},o,{display:"flex"}));Object(m.b)(n,"span",{lineHeight:"15px",textAlign:"center"},e.getControlUnionData(Fu,"text")||pe(xu())),e.setControlData(Fu,{node:n});var a=e.getControlUnionData(Fu,"hoverBackgroundColor"),s=e.getControlUnionData(Fu,"hoverColor");b.h?Object(m.c)(n,{backgroundColor:a||Bu,color:s||Hu,borderColor:s||Hu,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)"}):(r._addDOMEventListener(n,"mouseenter",(function(){return Object(m.c)(n,{backgroundColor:a||Bu,color:s||Hu,borderColor:o.color||Hu,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.85)"})})),r._addDOMEventListener(n,"mouseleave",(function(){return Object(m.c)(n,{backgroundColor:o.backgroundColor||zu,color:o.color||Hu,borderColor:o.color||Hu,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)"})})));var l=e._getLastDataXml(),d=Object(w.e)(l,"ClickThrough");return d&&r._addDOMEventListener(n,"click",(function(){e.vpaid?e.vpaid.trigger("AdClickThru",d||null,null,!0):Ue.b.call(e,d)})),Xu.call(e),r._addVPAIDEventListener(e,"AdSizeChange",qu.bind(e)),r._addVPAIDEventListener(e,"AdStarted",Gu.bind(e)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Fu},i}($e.a);function qu(){Wu.trace("@AdSizeChange",2);var t=this.getControlNode(Fu),e=this.format.isFloatingMode()?"hidden":"visible",r=this.getAdWidth()*(b.h?.3:.22);Object(m.c)(t,{width:r+"px",visibility:e}),Xu.call(this)}function Gu(){var t=this.getControlNode(Fu);Object(m.c)(t,{visibility:"visible"})}function Xu(){var t=this.getControlNode(Fu),e=this.getControlNode("title"),r=this.getControlNode("wrapper"),i=e&&parseInt(getComputedStyle(e).height,10)||r&&parseInt(getComputedStyle(r).paddingTop,10)||0,o=parseInt(getComputedStyle(t).width,10),n=(this.getControlUnionData(Fu,"position")||"bottom").toLowerCase(),a=this.getAdWidth(),s=this.getAdHeight(),l=this.getControlUnionData(Fu,"marginV")||"10%",d=this.getControlUnionData(Fu,"marginH")||"5%",c={};~n.indexOf("top")?c.top=Object(g.t)(Ju(l,s)+i):~n.indexOf("bottom")&&(c.bottom=Object(g.t)(Ju(l,s))),~n.indexOf("left")?c.left=Object(g.t)(Ju(d,a)):~n.indexOf("right")?c.right=Object(g.t)(Ju(d,a)):c.left=Object(g.t)(.5*a-o/2),Object(m.c)(t,c)}function Ju(t,e){var r=Object(w.f)(t);return null!=r?r*e:parseFloat(t)}function Qu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Yu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Zu="bottomBorder",Ku=function(t){var e,r;function i(e){var r;(r=t.call(this,Zu,e,!0)||this)._prevIsFloatingMode=null;var i=e.getControlNode("wrapper"),o=e.getControlUnionData(Zu,"css")||{};r._displayNoneForEmbeddedMode=o&&"none"===o.display;var n=getComputedStyle(i).marginBottom;n=parseInt(n,10);var a=r.node=Object(m.b)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qu(Object(r),!0).forEach((function(e){Yu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:4,left:0,top:"calc(100% + "+n+"px)",height:"15px",width:"100%",marginBottom:"15px",borderTop:"1px solid rgb(248, 248, 248)",background:"radial-gradient(ellipse farthest-side at 50% -30%, rgba(0, 0, 0, 0.15), rgba(97, 97, 97, 0.0) 95%)"},o));return e.setControlData(Zu,{node:a}),r._addVPAIDEventListener(e,"AdSizeChange",$u.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),e,n)),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.getName=function(){return Zu},i}($e.a);function $u(t,e){var r=t.getControlNode(Zu),i=t.getControlNode("iframe"),o=t.getControlNode("wrapper"),n=t.format.isFloatingMode();if(this._prevIsFloatingMode!==n){var a=Xe.a.call(t).outsideHeight;n?(Object(m.c)(r,{display:"none"}),Object(m.c)(o,{marginBottom:Object(g.t)(e)}),Object(m.c)(i,{height:Object(g.t)(a)})):this._displayNoneForEmbeddedMode||(Object(m.c)(r,{display:"block"}),Object(m.c)(o,{marginBottom:Object(g.t)(e+30)}),Object(m.c)(i,{height:Object(g.t)(a)})),a!==Xe.a.call(t).outsideHeight&&setTimeout((function(){return t.trigger("slotSizeChanged")}))}this._prevIsFloatingMode=n}function th(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["Click to get Videonow debug"]);return th=function(){return t},t}function eh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function rh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ih(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oh="debugOverlay",nh=function(t){var e,r;function i(e){var r;ih(rh(r=t.call(this,oh,e)||this),"detectContainer",(function(){var t,e=r.module.getControlNode("vpaidSlot")||r.module.getControlNode("wrapper"),i=e.querySelector("iframe");try{t=i&&i.contentWindow&&i.contentWindow.document}catch(t){}var o=t||e;r.container!==o&&(r.container=o,r.stopTapholdTimer(),r.removeListeners(),r.addListeners()),r.detectContainerTimer=setTimeout((function(){clearTimeout(r.detectContainerTimer),r.detectContainer()}),500)})),ih(rh(r),"addListeners",(function(){r._addDOMEventListener(r.container,"pointerdown",r.startTapholdTimer),r._addDOMEventListener(r.container,"pointerup",r.stopTapholdTimer),r._addDOMEventListener(r.container,"pointerleave",r.stopTapholdTimer)})),ih(rh(r),"removeListeners",(function(){r._removeDOMEventListener(r.container,"pointerdown",r.startTapholdTimer),r._removeDOMEventListener(r.container,"pointerup",r.stopTapholdTimer),r._removeDOMEventListener(r.container,"pointerleave",r.stopTapholdTimer)})),ih(rh(r),"startTapholdTimer",(function(){clearTimeout(r.tapholdTimer),r.tapholdTimer=setTimeout((function(){r.openOverlay()}),3e3)})),ih(rh(r),"stopTapholdTimer",(function(){clearTimeout(r.tapholdTimer)})),ih(rh(r),"openOverlay",(function(){r.node.style.display="block",r.module.pauseAd&&r.module.pauseAd(),r._addDOMEventListener(r.container,"click",r.skipEventPropagation,{capture:!0,once:!0})})),ih(rh(r),"skipEventPropagation",(function(t){t.stopPropagation()})),ih(rh(r),"openDebugLink",(function(){r.debugUrl&&Object(Ue.b)(r.debugUrl+"/"+r.debugId),r.closeOverlay()})),ih(rh(r),"closeOverlay",(function(t){t&&(t.preventDefault(),t.stopPropagation()),r.node.style.display="none",r._removeDOMEventListener(r.container,"click",r.skipEventPropagation)})),r.debugId=Math.random().toString(36).substring(2,11),r.detectContainer();var i=Wi.c.call(e,"vnCreative:debug")||{},o=i.urls,n=i.uniqueId,a=(o||[])[0];r.debugUrl=a&&a.split&&a.split("?")[0];var s=e.getControlUnionData(oh,"css"),l=r.node=Object(m.b)(r.module.getControlNode("wrapper"),"a",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eh(Object(r),!0).forEach((function(e){ih(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:"absolute",zIndex:6,top:0,left:0,cursor:"pointer",backgroundColor:"rgba(0,0,0,0.5)",width:"100%",height:"100%"},s,{display:"none"}),"",r.openDebugLink),d=Object(m.b)(l,"div",{position:"absolute",zIndex:7,top:"50%",left:"50%",padding:"20px",paddingRight:"30px",color:"gray",cursor:"pointer",lineHeight:1,fontSize:"20px",backgroundColor:"white",maxWidth:r.container.getBoundingClientRect().width/2+"px",transform:"translateX(-50%) translateY(-50%)",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},pe(th()));return Object(m.b)(d,"button",{position:"absolute",border:"none",margin:"0",padding:"0",width:"auto",overflow:"visible",background:"transparent",color:"black",font:"inherit",lineHeight:"18px",fontSize:"18px",top:"4px",right:"4px",cursor:"pointer",display:"block"},"",r.closeOverlay),a&&r._addDOMEventListener(l,"click",(function(){r.logger.log("debugOverlay @onclick"),Wi.f.call(e,r.debugId,a,n)})),e.setControlData(oh,{node:l}),r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype._destroy=function(){clearTimeout(this.detectContainerTimer),this.stopTapholdTimer(),this._removeDOMEventListener(this.container,"click",this.skipEventPropagation),t.prototype._destroy.call(this)},i.getName=function(){return oh},i}($e.a),ah=nh;function sh(){var t=Symbol("collectionFieldName");this[t]=[],this.pushControlIntoCollection=function(e){return this[t].push(e),e},this.getControlInstance=function(e){var r=this[t].filter((function(t){return t.name===e}))[0];return void 0===r&&this.logger.none(".getControlInstance("+e+") Unable to find control ("+r+")"),r},this.destroyControls=function(){this.logger.trace(".destroyControls()");var e=[];return this[t].forEach((function(t){var r=t&&t.getName&&t.getName();r&&e.push(r),t._destroy()})),this[t]=[],e},this.destroyUIControls=function(){var t=this;this.logger.trace(".destroyUIControls()");var e=[];return dh.forEach((function(r){var i=r&&r.getName&&r.getName();i&&e.push(i),t.destroyControl(i)})),this.destroyControl("spinner"),this.destroyControl("title"),e.push("spinner","title"),e},this.clearControlsCollection=function(){this[t]=[]},this.destroyControl=function(e){var r=this;this[t]=this[t].filter((function(t){return!t.getName||t.getName()!==e||(t._destroy(),r.logger.trace(' destroyControl(). Control "'+e+'" has been destroyed'),!1)}))},this.hideControl=function(e){var r=this;hh(this[t],e,(function(t){t.hide&&(t.hide(),r.logger.trace(' hideControl(). Control "'+e+'" has been hidden'))}))},this.restoreControl=function(e){var r=this;hh(this[t],e,(function(t){t.restore&&(t.restore(),r.logger.trace(' restoreControl(). Control "'+e+'" has been restored'))}))}}var lh=[zd,Gd,Kd,Yd,ic],dh=[fc,Cc,Dc.a,Hc,au,pu,wu,Mu,Uu,Ku];function ch(t,e){var r=this;void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.getControlUnionData("adSpectorControls"),o="1"===i;this.logger.log("._createControls() vpaidIsExternal="+t+" onlyInterfaceControls="+e+" adSpectorControlsValue="+i);var n=this.fixedFormat;if(n){var a=this.destroyUIControls();a&&a.length&&a.forEach((function(t){r.getControlNode(t)&&r.setControlData(t,{node:null})})),Object.entries(this.fixedControlsSlots||{}).forEach((function(t){var e=t[0],i=t[1];i&&r.setControlData(e,{node:i}),"vpaidslot"===e.toLowerCase()&&(i.innerHTML="")}));var s=this.format;s&&s.updateControlsLayout&&s.updateControlsLayout()}else{var l=this.destroyControls();l&&l.length&&l.forEach((function(t){r.getControlNode(t)&&r.setControlData(t,{node:null})}))}var d=t&&!o?dh.filter((function(t){var e=r.getControlUnionData(t.getName(),"enableWithVPAID");return Object(g.u)(e)})):dh;this._useExistsVideoSlot&&(this.logger.trace('._createControls() We have ready videoSlot, set css: {background: "none" } for container'),this.setControlData("container",{css:{background:"none"}}));var c=n?[]:[].concat(lh);return this.options.hideSpinnerControl||c.push(jd),this.options.hideTitleControl||c.push(Ld),c.push(ah),[].concat(e?[]:c,d).reduce((function(t,e){return t.then((function(){var t;try{t=new e(r),r.pushControlIntoCollection(t)}catch(t){r.logger.none(""+(t&&t.message||t))}return t&&t.isReady?t.isReady():Promise.resolve()}))}),Promise.resolve()).then((function(){return uh.call(r),!0}))}function uh(){var t=this,e=this.getControlNode("wrapper"),r=Xe.a.call(this).paddingTop,i=this.getControlNode("title"),o=this.getControlNode("logo");e&&r&&i&&0===i.getBoundingClientRect().height&&o&&0===o.getBoundingClientRect().height&&(Object(m.c)(e,{paddingTop:0}),setTimeout((function(){return t.trigger("slotSizeChanged")})))}function hh(t,e,r){t.some((function(t){return!(!t.getName||t.getName()!==e)&&(r(t),!0)}))}var ph,gh="::Extension[controls]",fh={adlabel:"title",countdown:"skipAdCountdown",soundbtn:"volume",logo:"logo"},vh={"-1":{display:"none"},0:{display:"none"},1:{display:""},TL:{position:"absolute",top:"10px",right:"auto",bottom:"auto",left:"10px"},TR:{position:"absolute",top:"10px",right:"10px",bottom:"auto",left:"auto"},BL:{position:"absolute",top:"auto",right:"auto",bottom:"10px",left:"10px"},BR:{position:"absolute",top:"auto",right:"10px",bottom:"10px",left:"auto"}},mh="::Extension[vnTargetedWords]";function bh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function yh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ah="subtitle",Oh="::Extension[vnSubtitles]",wh=(null===a.a||void 0===a.a||null===(ph=a.a.getChildWriter)||void 0===ph?void 0:ph.call(a.a,Oh))||a.a,_h={srt:function(t){var e=/(\d+)\n([\d:.,]+)\s*-->\s*([\d:.,]+)\n((?:.|\n)+)/m,r=t.replace(/^[^\S\n]*(.+)[^\S\n]*$/gm,"$1").replace(/\r/g,"\n").split("\n\n");wh.trace(Oh+" Total raw chunks: "+r.length);var i=r.map((function(t){var r=e.exec(t);return r?{id:r[1],startTime:Object(w.g)(r[2]),endTime:Object(w.g)(r[3]),text:r[4]}:(wh.warn(Oh+" Invalid data chunk ("+t+")"),null)}));wh.trace(Oh+" Total parsed objects: "+i.length);var o=i.filter(Boolean);return wh.trace(Oh+" Total filtered objects: "+o.length),o}},Sh=function(t){var e=t.type,r=t.data;wh.trace(Oh+".parseSubtitles("+e+")");var i=_h[e.toLowerCase()];if("function"!=typeof i)return wh.warn(Oh+" Data type ("+e+") is not supported"),null;var o=i(r);return Array.isArray(o)?o:(wh.warn(Oh+" Unable to parse data"),null)},Ph=function(t){return wh.trace(Oh+".processSubtitles()"),function(t){return wh.trace(Oh+".readSubtitles()"),new Promise((function(e){var r=t.querySelector("data");if(r){var i=Object(w.e)(r);wh.trace(Oh+" Using subtitles data from VAST");var o=r.getAttribute("type");if(!o)throw new Error("Data type is not defined");e({type:o,data:i})}else{var n=t.querySelector("url");if(!n)throw new Error('Neither "data" nor "url" provided');var a=Object(w.e)(n);wh.trace(Oh+" Fetching subtitles data from "+a);var s=n.getAttribute("type");if(!s)throw new Error("Url type is not defined");Object(Ue.f)(a).then((function(t){wh.trace(Oh+" Data loaded"),e({type:s,data:t.target.responseText})})).catch((function(t){throw new Error("Data request error ("+t+")")}))}}))}(t).then(Sh)};function Ch(){var t=this.getAdAspectRatio(),e=this.getControlNode("wrapper"),r=Object(m.b)(e,"div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bh(Object(r),!0).forEach((function(e){yh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({display:"none",position:"absolute",zIndex:5,bottom:t<=1?"10%":"25%",left:"50%",transform:"translateX(-50%)",padding:"5px",borderRadius:"3px",color:"white",background:"rgba(0, 0, 0, 0.3)",fontSize:"10pt",lineHeight:1.3,textAlign:"center",whiteSpace:"pre",pointerEvents:"none"},this.getControlUnionData(Ah,"css")));this.setControlData(Ah,{node:r})}function jh(){var t=this.getControlNode("subtitle");Object(m.c)(t,{display:"none"}),t.innerHTML=""}function Eh(t){var e=this.getControlNode("subtitle"),r=this.getAdElapsedTime(),i=t.find((function(t){var e=t.startTime,i=t.endTime;return e<=r&&r<i}));i?(Object(m.c)(e,{display:""}),e.innerHTML=i.text):(Object(m.c)(e,{display:"none"}),e.innerHTML="")}var Dh=[function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,xa))||o).trace(""+xa);var n=i.getLastParameters(),s=n&&n.vnSets;if(s){var l=s.global;i.setControlData(Ma,s,l)}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.getControlUnionData,n=i.getControlRawUnionData,s=i.getControlUnionDataGlobal,l=i.setControlData,d=i.getLastParameters,c=i.updateLastParameters,u=i.logger||a.a,h=(null==u||null===(r=u.getChildWriter)||void 0===r?void 0:r.call(u,Ba))||u;h.trace(""+Ba);var p,g=d(),f=g&&g.vnSetsApply;if(f){var v=f.important,m=f.global;l(za,{sets:f,important:v},m),p=f}var b=((p?o:s)(za)||{}).sets,y=b&&Object.keys(b).filter((function(t){return!Ua.includes(t)}));if(!y||!y.length)return e(t);var A=n("vnSets")||{},O=A&&Object.keys(A);return O&&(O=O.filter((function(t){return!Ua.includes(t)}))),O&&O.length?(y.forEach((function(t){if(O.includes(t)){var e=A[t],r=e&&Object.keys(e).filter((function(t){return!Ua.includes(t)}));r&&r.forEach((function(r){var i=e[r],o=b[t].orderIndex;i&&(void 0!==o&&(i.orderIndex=p?o:-1),c(r,i))}))}else h.warn(Ba+' key "'+t+'" is not belongs to the available sets')})),e(t)):e(t)}))},Bi,function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a,n=(null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,nn))||o,s=i.getLastParameters,l=i.setControlData,d=i.getControlUnionData,c=i.trackStrongUrls;n.trace(""+nn);var u=(s()||{}).vnProhibitedWords||{};[].concat(u).forEach((function(t){var e,r=t.pattern,i=t.global,o=t.selector,n=t[_.b],a=d(on)||{},s=a.pattern,c=a.selector;l(on,en({},t,((e={})[_.b]=n||(r||r!==s)&&(o||o!==c)?"solid":"",e)),i)}));var h=d(on)||{},p=h.pattern,g=h.selector,f=h.trackings,v=h.fatal;if(p){var m=new RegExp(p,"i"),b=function(t){var e;try{(e=window.top.document.querySelectorAll(t))&&e.length||(e=window.top.document.querySelectorAll("body"))}catch(t){}if(!e||!e.length)try{e=document.querySelectorAll(t)}catch(t){}e&&e.length||(e=document.querySelectorAll("body"));return Array.from(e).map((function(t){return t.innerText||t.textContent})).join("\n")}(g)||"";n.trace(nn+" Matching: "+p);var y=b.match(m);if(y){c(f);var A=Error(nn.substring(2)+" Pattern matched: "+y);throw A.fatal=!!v,A}n.log(nn+" Pattern not matched: "+p)}e(t)}))},Sa,function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,mh))||i;o.trace(""+mh);var n=t._getLastDataXml(),s=n&&n.querySelector('Extensions > Extension[type="vnTargetedWords"]');if(s){o.trace(mh+" Init");var l=Object(w.d)(s,"fatal"),d=s&&s.querySelector("words");if(!d)return void e(t);var c=Object(w.e)(d).replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),u=new RegExp(c,"i"),h=(function(t){var e;try{e=document.querySelectorAll(t)}catch(t){}return e&&e.length||(e=document.querySelectorAll("body")),Array.from(e).map((function(t){return t.textContent||t.innerText})).join("\n")}(Object(w.e)(s,"selector"))||"").match(u);if(o.trace(mh+" Matching: "+c),!h){var p=new Error(mh+" Pattern not matched: "+c);throw p.fatal=!!l,p}o.log(mh+" Pattern matched: "+h),Wi.h.call(t,'Extension[type="vnTargetedWords"] targetedMetrics')}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,gh))||i;o.trace("init "+gh);var n=t._getLastDataXml(),s=n&&n.querySelector('Extensions > Extension[type="controls"]');if(s){o.log(gh+" Init");var l=s.querySelectorAll("control");if(l&&l.length)Array.from(l).forEach((function(e){var r=e.getAttribute("id"),i=e.getAttribute("layout");o.trace(gh+" "+r+": "+i),fh[r]?t.setControlData(fh[r],{css:vh[i]||{}}):o.warn(gh+" "+r+" is not valid name for control")})),o.log(gh+" Layout applied");else{var d=Object(w.e)(s);"1"!==d&&"0"!==d||(o.warn(gh+" Adspector controls detected with value="+d),t.setControlData("adSpectorControls",d))}}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Gn))||i).trace(""+Gn);var o,n=(t._getLastParameters()||{}).vnBrowserCache||{},s=n.enabled,l=n.global,d=n.important;(s||l||d)&&t.setControlData(qn,((o={enabled:s})[_.a]=d,o),l);e(t)}))},Fi,function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Vo))||i;return o.trace(""+Vo),[].concat((t._getLastParameters()||{}).vnControls).forEach((function(r){var i=r||{},n=i.controls,a=i.global;if(!n)return e(t);o.trace(Vo+" Init"),Object.keys(n).forEach((function(e){var r=n[e],i=r.global||a,s=!0,l=e.toLowerCase(),d=Ro[l];d||(d=Mo[l],s=!1);var c=function(t,e,r){var i=t.css,o=Object(g.u)(t.important);delete t.important;var n=e?Io({},m.r,{display:"initial"}):{},a=Object.keys(t).reduce((function(e,i){var o=xo[i.toLowerCase()],n=t[i],a=void 0!==n&&o&&o(n,r);return a&&a&&Object.keys(a).forEach((function(t){var r=a[t];e[t]="object"!=typeof r||null===r?r:Io({},e[t],{},r)})),e}),{css:i||n});return Object.entries(a).reduce((function(t,e){var r=e[0],i=e[1];return Object(_.f)(t,r,i,o)}),{})}(r,s,t);s&&(c.parsePoint=r.parsePoint),o.trace(Vo+" Setting custom properties for control "+e+" -> "+d),!Object(g.r)(c)&&t.setControlData(d,c,i);["hover","afterplay"].forEach((function(n){var a,s=r[n];s&&(o.trace(Vo+" Setting "+s+" for control "+e),t.setControlData(d,((a={})[n]=!0,a),i))}))})),o.trace(Vo+" Layout applied")})),e(t)}))},function(t){return new Promise((function(e,r){var i,n=t&&t.getAPI&&t.getAPI().logger||a.a,s=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Yo))||n;t.maxSkipTime=null;var l=t._getLastParameters(),d=l&&l.vnSkipTime||{};if(!Object(g.r)(d)&&d.length){var c=new Ei;d.filter((function(t){return t})).sort((function(t,e){return t.orderIndex-e.orderIndex})).forEach((function(t){t&&c.setControlData("skip",t)})),d=c.getControlUnionData("skip")}var u,h=d,p=h.strict,f=h[_.a],v=h.global,m=d.skipTime;v&&t.setControlData(Qo,((u={skipTime:m,strict:p})[_.a]=f,u.global=v,u),v);s.trace(""+Yo);var b,y=t.getControlUnionData(Qo,null,(function(t){return t.strict}))||{},A=y.skipTime,O=y.strict;!v&&m<1/0&&t.setControlData(Qo,((b={skipTime:m,strict:p})[_.a]=f,b.global=v,b),v);m=((d=t.getControlUnionData(Qo))||{}).skipTime;var w=O&&A;w&&(t.maxSkipTime=w);var S=w||0===w,P=m;if(m||S){if(S&&m&&O&&w<m){var C=Error('skipTime has attribute "strict" == true and value of skipTime('+m+") is more than parent skipTime("+w+")");return C.code=o.a.GENERAL_VPAID_ERROR,r(C)}P=O?Math.min(w||1/0,0===m?0:m||1/0):m||0}return void 0!==P&&(s.trace(Yo+" Skip ad button disabled for "+P+" sec"),t.setControlData("skipAdCountdown",{timeBeforeSkip:P}),t.setControlData("skipAd",{timeBeforeSkip:P})),e(t)}))},function(t){return new Promise((function(e){var r=t&&t.getAPI&&t.getAPI().logger||wh;r.trace(""+Oh);var i=t._getLastDataXml(),o=i&&i.querySelector('Extensions > Extension[type="vnSubtitles"]');o?(r.trace(Oh+" Init"),Ph(o).then((function(e){Object(g.v)(t),t._subscribe(Ch.bind(t),"AdLoaded"),t._subscribe(Eh.bind(t,e),"AdRemainingTimeChange"),t._subscribe(jh.bind(t),"AdVideoComplete")})).catch((function(t){r.warn(Oh+" "+t)})).then((function(){return e(t)}))):e(t)}))},function(t){var e=t.vnAfterplay;return e&&e._destroy(),t.vnAfterplay=null,new Pn({module:t}).init(t)},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,So))||i;o.trace(""+So);var n=function(t){var e=t.getEnvironmentVars,r=t.getParameters,i=e&&e()||{},o=r&&r()||{},n=i&&i.forceFormat;if(Object(g.r)(n)){var a=o.vnFormat,s=(i&&i.format||{}).options;Object(g.r)(s)||Object(g.r)(a)||[].concat(a).forEach((function(t){return t.options=Oo({},s,{},t.options)})),n=a}var l=null,d=null;if(!Object(g.r)(n)){var c=new Ei;[].concat(n).forEach((function(t){c.setControlData(_o,t,t.global)})),l=c.getControlUnionData(_o),d=c.getControlUnionDataGlobal(_o)}return{vnFormatData:l,vnFormatDataGlobal:d}}({getEnvironmentVars:function(){return t.environmentVars},getParameters:function(){return t._getLastParameters()}}),s=n.vnFormatData,l=n.vnFormatDataGlobal;if(s&&(t.setControlData(_o,s),l&&t.setControlData(_o,l,!0)),!t.fixedFormat){var d=t.getControlUnionData(_o);if(d){var c=d.name,u=d.options;try{var h=JSON.stringify(d,(function(t,e){return"lookupElement"===t?(null==e?void 0:e.nodeName)+"."+(null==e?void 0:e.classList):e}),2);o.trace(So+" Init\nvnFormat:"+h)}catch(t){}var p=t.options&&t.options.amp;if(p&&"contentroll"!==c.toLowerCase())throw new Error(So+" Failed to create format ("+c+") because only the ContentRoll format is available for amp");p&&(u.amp=!0);var f=u||{},v=f.playerElement,m=f.playerAfter,b=f.playerBefore;if(yo.call(t,{playerElement:v,playerAfter:m,playerBefore:b}))throw new Error(So+' There was already an embedding error with such format parameters: playerElement:"'+v+'" playerAfter:"'+m+'" playerBefore:"'+b+'"');var y=Pi(t,c||"InStream",u);y&&t._setFormat(y)}}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,oa))||i;o.trace(""+oa);var n=(t._getLastParameters()||{}).vnUnderplay||{},s=n,l=s.global,d=s[_.a];if(delete n.global,(!Object(g.r)(n)||d||l)&&t.setControlData(ia,n,l),n=t.getControlUnionData(ia),Object(g.r)(n))return e(t);var c=n||{},u=c.html,h=c.clickTracking,p=c.openWindowUrl,f=c.color,v=c.backgroundColor,b=c.backgroundImage,y=c.backgroundSize,A=c.opacity,O=c.closeData,S=t.getControlNode("underplay")||Object(m.b)(document.body,"div",{},"");if(S.addEventListener("click",(function(e){e.preventDefault(),h&&Wi.m.call(t,[h]),p&&Object(Ue.b)(p),t.skipAd()})),Object(m.c)(S,{position:"fixed",zIndex:-1,top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",transition:"opacity 500ms ease-out",color:f,backgroundColor:v,backgroundImage:b,backgroundSize:y,opacity:A}),S.innerHTML=u,!Object(g.r)(O)){var P=O.img,C=O.top,j=O.right,E=O.bottom,D=O.left,I=O.width,T=O.height,k=O.time,V=P?"":ra.a,R=Object(m.b)(S,"div",{position:"absolute",zIndex:1,top:C,right:j,bottom:E,left:D,width:I,height:T,backgroundSize:"cover",backgroundImage:"url("+(P||"")+")",cursor:"pointer"},V,(function(){return t.skipAd()}));R.addEventListener("touchstart",(function(e){e.preventDefault(),t.skipAd()}));var M=Object(w.g)(k)||t.getControlUnionData("skipAdCountdown","timeBeforeSkip");if(M){o.trace(oa+" Skip ad button disabled for "+M+" sec"),Object(m.c)(R,{display:"none"});Object(g.v)(t),t._subscribe((function e(){t.getAdElapsedTime()>=M&&(Object(m.c)(R,{display:""}),t.unsubscribe(e,"AdRemainingTimeChange"))}),"AdRemainingTimeChange")}Object(g.v)(t),t._subscribe((function(){o.log(oa+" Removing underplay"),Object(m.c)(S,{opacity:0}),setTimeout((function(){Object(m.t)(S)}),500)}),"AdDestroyed")}return e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Qn))||i).trace(""+Qn);var o,n=(t._getLastParameters()||{}).vnCache||{},s=n.serverUrl,l=n.strict,d=n.global,c=n.important;(s||l||d||c)&&t.setControlData(Jn,((o={serverUrl:s,strict:l})[_.a]=c,o),d);e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Fn))||i;o.trace("::Extension[vnCreative]");var n=(t._getLastParameters()||{})[Ln]||{},s=function(e){var r,i,a=n[e]||{},s=a.url,l=a.important,d=a.global;void 0!==s&&(t.setControlData(Ln,((i={})[e]=((r={url:s})[_.a]=l,r),i),d),o.trace("::Extension[vnCreative] set control data "+e+":"+s+" global="+d))};s("impression"),s("debug"),s("passed"),s("passed2"),s("select"),e(t)}))},Un.a,function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Vi))||i).trace(""+Vi);var o,n=(t._getLastParameters()||{}).vnNoAd||{},s=n.functionUrl,l=n.functionText,d=n.global;(s||l||d)&&t.setControlData(ki,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ii(Object(r),!0).forEach((function(e){Ti(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ii(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},n,((o={})[_.b]="solid",o)),d);e(t)}))},function(t){var e=t.vnAdEvents;return e&&e._destroy(),t.vnAdEvents=null,new Vn({module:t}).init(t)},function(t){var e=t.vnPageChanged;return e&&e._destroy(),t.vnPageChanged=null,new $n({module:t}).init()},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,id))||o).trace(""+id);var n=(i.getLastParameters()||{}).vnShowViqeo;if(n){var s=n.options,l=n.global;i.setControlData(rd,{options:s},l)}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,xn))||o).trace(""+xn);var n=i.getLastParameters(),s=n&&n.vnEventsParams;if(s){var l=s.eventsParams,d=s.global;l&&i.setControlData(Mn,{eventsParams:l},d)}e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,td))||o).trace(""+td);var n=i.getLastParameters(),s=n&&n.vnTrackingParams;if(s){var l=s.trackingParams,d=s.global;l&&i.setControlData($l,{trackingParams:l},d)}e(t)}))},function(t){var e,r=(t&&t.getAPI&&t.getAPI()||{}).logger||a.a;return((null==r||null===(e=r.getChildWriter)||void 0===e?void 0:e.call(r,Ho))||r).trace("init "+Ho),new Promise((function(e){[].concat((t._getLastParameters()||{}).vnAdErrorsRules).forEach((function(e){var r=e||{},i=r.global,o=r.include,n=r.exclude,a=r.availableUrlsPattern;(o||n)&&t.setControlData(Wo,{include:o,exclude:n,availableUrlsPattern:a||zo.replace(/\./g,"\\.")},i)})),e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,nd))||i).trace(""+nd);var o=(t._getLastParameters()||{}).vnHeavyAdIntervention||{},n=o.url,s=o.global;(n||s)&&t.setControlData(od,o,s),e(t)}))},fa,function(t){var e=t._vnOTMTrackRecordable;return null==e||e._destroy(),(t._vnOTMTrackRecordable=new ya({module:t})).init()},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a;((null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Ea))||i).trace(""+Ea);var o=((t._getLastParameters()||{}).vnDebug||{}).logLevel;o&&(t.setControlData(ja,{logLevel:o}),i.rootLogger.setLevel(o)),e(t)}))},function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI()||{},o=i.logger||a.a;((null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,Ta))||o).trace(""+Ta);var n=i.getLastParameters(),s=n&&n.vnAdType;if(s){var l=s.adType,d=s.global;l&&i.setControlData(Ia,{adType:l},d)}e(t)}))}];function Ih(){return Object(g.g)(Dh,this)}var Th,kh="::Plugin[customTracking]",Vh="::Plugin[externalTracking]",Rh="::Plugin[q1Tracking]",Mh="q1tracking",xh=function(t){var e,r=t&&t.getAPI&&t.getAPI().logger||a.a,i=(null==r||null===(e=r.getChildWriter)||void 0===e?void 0:e.call(r,Rh))||r;i.trace("::Plugin[q1Tracking]");var s,l,d,c=t.options.videoStartTimeout,u=new n.a({ancestor:Rh,logger:i}),h=!1,p=0;function g(){d=t.getAdDuration()||0}function f(){h||(u._removeVPAIDEventListener(t,"AdDurationChange",g),!d&&(d=c||t.getAdDuration()||0),p=l=d&&1e3*(d/4+1)||2e3),h=!0,l&&(s=Date.now(),u._addTimeout(Mh,m,l))}function v(){i.trace("::Plugin[q1Tracking].stop()"),u._destroy()}function m(){v(),Wi.i.call(t,{code:o.a.TIMEOUT_OF_MEDIA,message:"Neither AdVideoFirstQuartile nor AdVideoMidpoint event happened during "+p+"ms after AdVideoStart event"})}u._addVPAIDEventListener(t,"AdDurationChange",g),u._addVPAIDEventListener(t,"AdVideoStart",f),u._addVPAIDEventListener(t,"AdPaused",(function(){u._removeTimeout(Mh),l-=Math.max(0,Date.now()-s)})),u._addVPAIDEventListener(t,"AdPlaying",f),u._addVPAIDEventListener(t,"AdVideoFirstQuartile",v),u._addVPAIDEventListener(t,"AdVideoMidpoint",v),u._addVPAIDEventListener(t,"AdStopped",v),u._addVPAIDEventListener(t,"AdDestroyed",v)},Nh="::Plugin[noAdCallback]",Lh=function(t){return new ha(t,{moduleId:"::Plugin[ViewableImpression]",startEventName:"AdImpression",trackUrlsAction:Wi.o.bind(t,"ViewableImpression:viewable")})};var Fh="::Plugin[ContainerDarker]",Wh="DELAY_TIMER",Hh=(null===a.a||void 0===a.a||null===(Th=a.a.getChildWriter)||void 0===Th?void 0:Th.call(a.a,Fh))||a.a,zh=function(t){var e,r;function i(e){var r,i=e&&e.getAPI&&e.getAPI().logger||Hh;return(r=t.call(this,{ancestor:Fh,logger:i})||this).logger.trace("::Plugin[ContainerDarker] constructor()"),r.module=e,r._addVPAIDEventListener(e,"AdStarted",(function(){return r.hide()})),r._addVPAIDEventListener(e,"AdVideoStart",(function(){return r.hide()})),r._addVPAIDEventListener(e,"AdVideoComplete",(function(){return r.show()})),r._addVPAIDEventListener(e,"vnVpaidAdError",(function(){return r.show()})),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=i.prototype;return o.hide=function(){this._removeTimeout(Wh);var t=this.module.getControlNode("containerShadow");t&&(Object(m.c)(t,{transitionProperty:"opacity",transitionDuration:0,transitionTimingFunction:"none"}),Object(m.c)(t,{zIndex:-1,opacity:0}))},o.show=function(){var t=this.module,e=t.vnAfterplay;e&&e.shouldShowStub()||this._addTimeout(Wh,(function(){var e=t.getControlNode("containerShadow");e&&(Object(m.c)(e,{transitionProperty:"opacity",transitionDuration:"700ms",transitionTimingFunction:"ease-out"}),Object(m.c)(e,{zIndex:5,opacity:.97}))}),600)},i}(n.a);function Bh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Uh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qh="::Plugin[HeavyAdIntervention]",Gh=function(t){var e,r;function i(e){var r,i,o=e&&e.getAPI&&e.getAPI().logger||a.a,n=(null==o||null===(r=o.getChildWriter)||void 0===r?void 0:r.call(o,qh))||o;return(i=t.call(this,{ancestor:qh,logger:n})||this).logger.trace("::Plugin[HeavyAdIntervention] constructor()"),i.observers=[],i._addVPAIDEventListener(e,"AdLoaded",(function(){return Xh.call(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i),e)})),i}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.prototype._destroy=function(){t.prototype._destroy.call(this),this.observers.forEach((function(t){return t&&t.disconnect()})),this.observers=[]},i}(n.a);function Xh(t){var e=this,r=(t.getControlUnionData("vnHeavyAdIntervention")||{}).url,i=Jh.call(this,t);t&&t.vpaid&&t.vpaid.getMediaInfo().then((function(t){return e.mediaInfo=t})),t.getAdIframes().then((function(t){t&&t.forEach((function(t,o){var n=t&&Qh.call(e,t,r,{srcFrame:"iframe-"+o},i);n&&e.observers.push(n)}))}));var o=Qh.call(this,window,r,{srcFrame:"window"},i);o&&this.observers.push(o);try{var n=window.document.querySelector("iframe[name=viqeo-player-frame]"),a=n&&Qh.call(this,n,r,{srcFrame:"viqeo-player-frame"},i);this.observers.push(a)}catch(t){}}function Jh(t){return[function(){return t.trigger("AdError","HeavyAdIntervention",o.a.GENERAL_VPAID_ERROR)},function(){return Object(Yi.e)("AdError")}]}function Qh(t,e,r,i){var o,n=this;try{if(!(o=t.contentWindow||t)||!o.ReportingObserver)return null;var a=new o.ReportingObserver((function(){}),{buffered:!0});a.observe(),this._addDOMEventListener(o,"unload",(function(){var t=a.takeRecords(),s=r||{};s=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bh(Object(r),!0).forEach((function(e){Uh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},s,{mediaInfo:n.mediaInfo||{}});var l=function(t,e,r,i){if(!e||!r||!r.length)return 0;var o=0;return Array.from(r).forEach((function(r){if(r&&"intervention"===r.type){o++,i&&(r.advancedInfo=i);try{var n=JSON.stringify(r);t.navigator.sendBeacon(e,n)}catch(t){}}})),o}(o,e,t,s);l>0&&i&&i.forEach((function(t){return setTimeout(t)}))}))}catch(t){}}var Yh=[function(t){return new Promise((function(e){var r,i=t&&t.getAPI&&t.getAPI().logger||a.a,o=(null==i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,kh))||i;o.trace("::Plugin[customTracking]");var n=[],s=function(e){var r='Extension[type="CustomTracking"] Tracking[event="'+e+'"]',i=t._getLastDataXml();if(i){var a=Wi.a.call(t)&&Wi.i.bind(t),s=Object(Ue.e)(i,r,t.replaceMacros.bind(t),a);o.track("::Plugin[customTracking].track("+r+")"),n.push.apply(n,s)}},l=t.waitAsyncTrackings;t.waitAsyncTrackings=function(){return Promise.all([l.apply(t),Promise.all(n)])};var d=t.skipAd;t.skipAd=function(){return s("onSkipAd"),d.apply(t,arguments)};var c=t.processDataXml;t.processDataXml=function(e){if(c.apply(t,arguments),e&&e.querySelector){s("onVastLoad");var r=!e.querySelector("Wrapper,MediaFile");r&&s("onVastEmpty")}},e(t)}))},function(t){var e,r=t&&t.getAPI&&t.getAPI().logger||a.a,i=(null==r||null===(e=r.getChildWriter)||void 0===e?void 0:e.call(r,Vh))||r;i.trace("::Plugin[externalTracking]");var o=t.options.externalTracking;"object"==typeof o&&(i.log("::Plugin[externalTracking] Init"),Object.keys(o).forEach((function(e){var r=o[e];i.trace("::Plugin[externalTracking] Subscribed for "+e),Object(g.v)(t),t._subscribe((function(){[].concat(r).forEach(Ue.c)}),e)})))},xh,function(t){var e,r=t&&t.getAPI&&t.getAPI().logger||a.a,i=(null==r||null===(e=r.getChildWriter)||void 0===e?void 0:e.call(r,Nh))||r;i.trace("::Plugin[noAdCallback]");var o=t.options.noAdCallback,n=window[o]||o;"function"==typeof n?(i.log("::Plugin[noAdCallback] Init"),Object(g.v)(t),t._subscribe((function(){var e=t.vnAfterplay;if(!(e&&e._getTotalSuccessfulPlays()>0)){i.log("::Plugin[noAdCallback] Executing");var r=t.getAnchorElement();setTimeout((function(){return n({anchorElement:r})}))}}),"AdError")):n&&i.warn("::Plugin[noAdCallback] noAdCallback provided, but not a function ("+n+")")},Lh,function(t){return new zh(t)},function(t){return new Gh(t)}];function Zh(){var t=this;Yh.forEach((function(e){return e(t)}))}function Kh(){Lh(this),xh(this)}function $h(t){var e=this;void 0===t&&(t=!0),this.logger.trace(".initMainContainer() shouldCreateIframe="+t);var r=this.vpaid,i=this.parentFormat;return this.vpaidIsExternal=r&&r instanceof Ka,this.shouldCreateIframe=t,new Promise((function(o){var n=e.getControlNode("slot");if(!Object(m.p)(n))throw new Error("Invalid environmentVars.slot ("+n+")");var a=e,s=e.getControlNode("iframe");s?i?(e.logger.trace(".initIframe() Reusing existing iframe. Iframe was created by VN Module and sent in initAd"),s.setAttribute("allow","autoplay"),Object(m.w)(s,{onload:function(){if(e.getControlNode("wrapper")&&i){var t=(Xe.a.call(a)||{}).paddingTop;t&&i.updateControlsLayout&&i.updateControlsLayout(t,!1,e.getAPI())}ch.call(e,e.vpaidIsExternal,!0).then((function(){return o(r)}))}})):(e.logger.trace(".initIframe() Reusing existing iframe. Iframe was created in this module and has not been destroyed because format has not been changed yet"),Object(m.w)(s,{onload:function(){ch.call(e,e.vpaidIsExternal,!1).then((function(){return o(r)}))}})):(e.logger.trace(".initIframe() Creating sandboxed iframe. shouldCreateIframe="+t),yn(n,{shouldCreateIframe:t,logger:e.logger,sandbox:"allow-forms allow-same-origin allow-pointer-lock allow-scripts allow-popups allow-top-navigation"}).then((function(t){var r,i=(e.options||{}).iframeRemoveDelay,o=t&&"IFRAME"===t.tagName&&i||0;e._addDOMNode(t,o),e.setControlData("iframe",{node:t}),e._useExistsVideoSlot&&(Object(m.c)(t,{position:"absolute",left:0,top:0,zIndex:null}),e.logger.trace("._initIframe() We are using already exists videoSlot, set css: {position: absolute } for iframe")),t.contentDocument&&Object(m.c)(t.contentDocument.documentElement,{minHeight:"100%"});var n=(null==t||null===(r=t.contentDocument)||void 0===r?void 0:r.body)||t;Object(m.c)(n,{minHeight:"100%",padding:0,margin:0,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"}),e.logger.trace(".initIframe() New iframe was created. Should creates all controls")})).then((function(){return o(r)})))}))}function tp(t,e){var r=this;void 0===e&&(e=!1),this.logger.log(".vpaidInit()");var i=this._getLastParameters()||{},n=i.adParameters;return n&&(this.creativeData.AdParameters=n),this.logger.log(".vpaidInit() Creating VPAID instance"),(t&&Promise.resolve(t)||ep.call(this,{shouldCreateReserveVpaid:e,parameters:i})).then((function(t){r.vpaid=t;var e=t||{},i=e.adWidth,o=e.adHeight;return t&&t instanceof ps&&!i&&!o&&t.getLinkedVpaid&&t.getLinkedVpaid().then((function(t){if(~t.toString().indexOf("VpaidExternalJs")){var e=r.format;e&&e.fullscreenSwitchOn&&e.fullscreenSwitchOn()}})),r.logger.log(".vpaidInit() Setting VPAID initial values"),t.setAdExpanded(r.getAdExpanded()),t.setAdSkippableState(r.getAdSkippableState()),t.setAdVolume(r.getAdVolume()),r.progressTrackingEvents=[],r.data.forEach((function(t){var e=t.parameters.Progress;e&&e.forEach((function(t){r.progressTrackingEvents.push(t)}))})),Object(g.v)(t),t._subscribe(Wi.l.bind(r),"AdRemainingTimeChange"),Object(Yi.f)(r,t),Yi.a.forEach((function(e){return t._subscribe(r.trigger.bind(r,e),e)})),t})).then((function(t){var e;if(r.fixedFormat)return t;var i=null==r||null===(e=r.options)||void 0===e?void 0:e.mainContainerIsIframe,o=(r.getControlUnionData("mainContainer")||{}).isIframe;return void 0!==o&&(i=o),r.logger.log("call initMainContainer("+i+")"),$h.call(r,i)})).then((function(){return ch.call(r,r.vpaidIsExternal)})).then((function(){return r.format._vpaidInitAd()})).then(ip.bind(this)).then((function(t){return t.getModuleOptions&&t.getModuleOptions().then((function(t){t&&ls.c.call(r,t)})),r.lastPendingVolumeCommand&&r.lastPendingVolumeCommand(),r.lastPendingVolumeCommand=null,t})).then((function(t){return r.trigger("vn_VPAIDCreated",{vpaid:t}),t})).catch((function(t){if(t&&t.code===o.a.FAIL_MEDIA_START&&!be.c.call(r,"destroyed")&&!be.c.call(r,"destroying")){r.logger.track(".vpaidInit failed vpaid ("+r.vpaid+") init. Trying init reserved vpaid");var e=r.vpaid;return e&&e._destroy(),tp.call(r,null,!0)}var i;throw t&&t instanceof String||!t?i=new Error(""+(t||"")):t&&t instanceof Error&&!(i=t).message&&(i.message="Could not find supported MediaFile."),!i.code&&(i.code=o.a.MEDIA_FILE_NOT_FOUND),i}))}function ep(t){var e,r=this,i=t.parameters,o=t.shouldCreateReserveVpaid;this.logger.log(".getVpaid()");var n=i||{},a=n.Media,s=n.adParameters,l=n.adType,d=(a||{}).duration;return"string"==typeof d&&(a.rawDuration=d,a.duration=Object(w.g)(d)),rp.call(this,{media:a,adParameters:s,shouldCreateReserveVpaid:o,adType:(null===(e=this.getControlUnionData("vnAdType"))||void 0===e?void 0:e.adType)||l}).then((function(t){return r.logger.log(".getVpaid() Successfully created VPAID instance"),t}))}function rp(t){var e,r=t.media,i=t.adParameters,o=t.shouldCreateReserveVpaid,n=void 0!==o&&o,a=t.adType;try{e=JSON.stringify(r,null,"\t")}catch(t){e="error:"+t}return this.logger.trace(".vpaidCreate("+e+") shouldCreateReserveVpaid="+n),new Zl(r,i,this,n,a).getVpaidPromise()}function ip(){var t=this;if(be.c.call(this,["destroying","destroyed"]))return Promise.reject();this.logger.log(".vpaidInitAd()");var e=this.viewMode,r=this.desiredBitrate,i=this.vpaid,n=this.format,a=this.vnAfterplay,s=this.options.vpaidInitAdSecTimeout,l=this.creativeData.AdParameters,d=this.environmentVars.videoSlotCanAutoPlay,c=this.options.vpaidInitAdTimeout;a&&a.shouldContinue()&&a._getTotalSuccessfulPlays()>0&&(c=s);var u=this.getControlNode("iframe"),h=this.getControlNode("vpaidSlot")||this.getControlNode("slot"),p=this.getControlNode("wrapper"),f=p||this.getControlNode("slot"),v=Xe.c.call(this),b=this.getControlUnionData("vnShowViqeo");b?(this.setAdVolume(0),(v=v&&Object(m.b)(h,"video",{width:"1px",height:"1px"}))&&(this._addDOMNode(v),v.volume=0,v.mute=!0)):!v&&this.fixedFormat&&this.fixedVideoSlot&&(v=this.fixedVideoSlot);var y=getComputedStyle(p||h||u&&("DIV"===u.tagName?u:u.contentWindow.document.body)),A=y.paddingTop,O=y.paddingRight,w=y.paddingBottom,_=y.paddingLeft,S=this.environmentVars.forceAspectRatio,P=this.getAdWidth()||i.getAdWidth()||f.offsetWidth,C=this.getAdHeight()||i.getAdHeight()||P*(i.getAdAspectRatio()||9/16)^0,j=n.correctAdSize(P,C),E=j.adWidth,D=j.adHeight;return isNaN(c)&&this.logger.warn(".vpaidInitAd() Invalid options.vpaidInitAdTimeout ("+c+")"),this.logger.log(".vpaidInitAd() with timeout "+c+"ms"),this._removeTimeout(Qi.e),this._addTimeout(Qi.e,(function(){t.logger.warn(".vpaidInitAd() Call to vpaid.initAd() timed out ("+c+" ms)");var e=t.vpaid;e&&e._destroy(),t.vpaid=null,Wi.e.call(t,{code:o.a.VPAID_INIT_AD_TIMEOUT_HAPPENED,message:"VpaidInitAd timeout is timed out timeout="+c+"ms"}),t._failedData({shouldDestroyVpaid:!0})}),c),Object(g.v)(i),i._subscribe((function(){t.logger.trace(".vpaid @AdLoaded Clearing vpaidInitAd timeout",2),t._removeTimeout(Qi.e)}),"AdLoaded"),i._subscribe((function(){t.logger.trace(".vpaid @AdError Clearing vpaidInitAd timeout",2),t._removeTimeout(Qi.e)}),"AdError"),this.logger.log(".vpaidInitAd() vpaid.initAd("+(b?1:E)+", "+(b?1:D)+")"),i.initAd(b?1:E,b?1:D,e,r,{AdParameters:l},{top:A,right:O,bottom:w,left:_,iframe:u,slot:h,parentSlot:f,videoSlot:v,videoSlotCanAutoPlay:d,forceAspectRatio:S,shouldCreateIframe:this.shouldCreateIframe,useExistsVideoSlot:this._useExistsVideoSlot,parentFormat:n,moduleAPI:{setControlData:this.setControlData.bind(this),getControlNode:this.getControlNode.bind(this),addVPAIDEventListener:function(e,r,i){return void 0===i&&(i=t),i._addVPAIDEventListener(t,e,r)},removeVPAIDEventListener:function(e,r,i){return void 0===i&&(i=t),i._removeVPAIDEventListener(t,e,r)},getFormat:function(){return t.format}}})}function op(t){var e=this,r=(t||{}).shouldResetPlugins;return np.call(this,t).then((function(t){r&&Kh.call(e);var i=t||{},o=i.wrapperUrl,n=i.filters,a=i.vpaid;if(a){var s=e.vnAfterplay;if(s&&s.shouldContinue()){var l=e.vpaid;l&&(l._destroy(),e.vpiad=null)}for(var d=[],c=0,u=e._getLastParameters(c);u;u=e._getLastParameters(++c)){var h=(u||{}).id;void 0!==h&&d.push("Ad="+h)}var p=function(t){var e=t||{},r=e.id,i=e.Media,o=e.adParameters,n=(i||{}).MediaFiles,a=function(t){return"["+[].concat(t).map((function(t){return JSON.stringify(t,null,"\t")})).join(", ")+"]"},s="";try{s=Object.entries(n).filter((function(t){var e=t[1];return!Object(g.r)(e)})).map((function(t){var e=t[0],r=t[1];return e+":"+a(r)})).join("\n")}catch(t){}var l=Object(g.r)(o)?"":"adParameters: "+JSON.stringify(o);return{id:r,medias:s,adParameters:l}}(e._getLastParameters()),f=p.id,v=p.medias,m=p.adParameters;return e.logger.log(".eventLoop() playing Ad="+f+": ("+d.reverse().join(" > ")+")",2,"color:green; font-size:1.25em"),v&&e.logger.trace(".eventLoop() found media: "+v+"\n"+m,1,"green"),tp.call(e,a)}return o&&(e.logger.log(".eventLoop() following VASTAdTagURI ("+o+")"),setTimeout((function(){return op.call(e,{wrapperUrl:o,filters:n})}))),null})).then((function(t){return Object(g.v)(t),t&&e._subscribeOnce((function(){var t=e.vnAfterplay;if(t&&t.shouldContinue()){e.logger.trace(".eventLoop() @AdVideoFirstQuartile should start searching next creative");var r=e.format;e.fixedFormat=r,e.fixedVideoSlot=Xe.c.call(e),e.fixedControlsSlots=["videoSlot","wrapper","container","containerShadow","containerIframe","slot","vpaidSlot","iframe"].reduce((function(t,r){return t[r]=e.getControlNode(r),t}),{}),r&&r.updateOptions&&r.updateOptions({switchToEmbeddedModeAtTheEnd:!1});var i=function(t){return t&&(t.getBaseName&&t.getBaseName()||t.toString().slice(7,-1).toLowerCase())}(r);i&&(e.filterFormatName=i);var o=e._getLastData();o&&(o.next={searching:!0})}}),"AdVideoFirstQuartile"),t})).catch(dp.bind(this))}function np(t){var e=this,r=t||{},i=r.url,n=r.wrapperUrl,a=r.xml,s=r.format,l=r.filters,d=(t||{}).parameters,c=(l||{}).formatName;if(this._videoSlotRemoved=!1,!(i||n||d||a)){var u=Error("No one form url, xml and parameters is defined");return u.code=o.a.GENERAL_VPAID_ERROR,u.hint=".eventLoop()",Promise.reject(u)}var h=i||n,p=function(){return a?Promise.resolve(a):h?ap.call(e,h,n===h?{actionBeforeRequest:Wi.j.bind(e)}:null):Promise.resolve(null)};return(d?Promise.resolve(d):p().then(e.processDataXml.bind(e))).then((function(t){return d=t,lp.call(e,d)})).then((function(t){if(!c)return t;var r=e.getControlUnionData("vnFormat"),i=r&&r.name&&r.name.toLowerCase();if(!i||i!==c)throw Error('.findCreative() formatName "'+i+'" does not match "'+c+'"');return t})).then((function(t){e._requestStartedData||(e._requestStartedData=[]),t.uniqueId||(t.uniqueId=t.id+"_"+Math.random().toString(36).substring(2,5)),e._requestStartedData.push({uniqueId:t.uniqueId,time:Date.now()}),!e.format&&s&&e._setFormat(s);var r=t.wrapperUrl;if(r)return{wrapperUrl:r,filters:l};e.logger.log(".eventLoop()  VAST detected"),Wi.j.call(e),Wi.k.call(e);var i=e.format||s;return(i&&i._initDataXml()||Promise.resolve()).then((function(){return ep.call(e,{parameters:t})})).then((function(t){return{vpaid:t}}))}))}function ap(t,e){var r=this;if(be.c.call(this,["destroying","destroyed"]))return null;var i=t;this.logger.log(".requestDataXml("+t+")");var n=(this.options||{}).dataRequestTimeout;return this.replaceMacros(t).then((function(t){var e,i;return(null===(e=r.format)||void 0===e||null===(i=e.waitBeforeLoadUrl)||void 0===i?void 0:i.call(e,t))||t})).then((function(t){var e=r.globalTimeoutProvider;return e&&e.start(),t})).then(mo.bind(this)).then((function(t){return i=t,r.logger.trace(".requestDataXml(preprocessDataUrl="+t+") "),Object(Ue.f)(t,{overrideMimeType:"text/xml",timeout:n})})).then((function(t){var o;null==e||null===(o=e.actionBeforeRequest)||void 0===o||o.call(e);var n=t&&t.target||{},a=n.status,s=n.statusText;if(204===a||a>=400)throw Error("("+a+") "+(s||""));return r.logger.log(".requestDataXml("+i+") Data loaded"),t.target.responseXML||t.target.response&&(new DOMParser).parseFromString(t.target.response,"text/xml")})).catch((function(t){var e,r=t||{},n=r.message,a=r.status,s=r.statusText;throw"timeout"===t.type?(e=Error(" requestDataXml() Data request timeout "+(n||"")+" URL:"+i+" original event status:"+a+" statusText:"+s)).code=o.a.TIMEOUT_OF_VAST_URI:(e=Error("requestDataXml() Data request error "+(n||"")+" URL: "+i)).code=o.a.GENERAL_WRAPPER_ERROR,e.hint=".requestDataXml()",e}))}function sp(t){if(this.logger.log(".processDataXml("+t+")"),be.c.call(this,["destroying","destroyed"]))return null;if(!t||!t.querySelector){this.logger.warn(".processDataXml() Malformed data xml");var e=Error("Malformed data xml");throw e.code=o.a.NO_ADS_RESPONSE,e.hint=".processDataXml()",e}var r=Object(w.c)(t),i=r&&r.length||0;if(!i){var n=t.querySelectorAll("Error"),a=Array.from(n||[]).map((function(t){return Object(w.e)(t)})),s=Error("Malformed data xml");throw s.code=o.a.NO_ADS_RESPONSE,s.hint=".processDataXml()",a&&(s.errorUrls=a),s}if(i>1&&Array.from(r).every((function(t){return null!==t.getAttribute("sequence")}))){var l=Array.from(r).map((function(t){return t&&t.getAttribute&&t.getAttribute("id")||""})).filter((function(t){return t})).join(","),d="Can not play Ad Pods("+i+"): ["+l+"]";this.data.push({dataXml:t,defaultAdXml:null,parameters:null}),Wi.i.call(this,{code:o.a.FORMAT_ERROR,message:d}),this.data.pop();var c=Error(d);throw c.code=o.a.NO_ADS_RESPONSE,c.hint=".processDataXml()",c}var u=1===i?r:i&&Array.from(r).filter((function(t){return null!==t.getAttribute("sequence")}));if(!u||!u.length){var h=Error("Malformed data xml. Ad nodes not found.");throw h.code=o.a.NO_ADS_RESPONSE,h.hint=".processDataXml()",h}var p=u[0];this.ad=p;var g=p&&p.getAttribute&&p.getAttribute("id")||"";this.logger.log(".processDataXml() Ad="+g+" has been found",2,"color:green; font-size:1.15em");var f=p.querySelector('Extensions > Extension[type="vnDefaultAd"]');f&&f.parentNode.removeChild(f);var v=hd.call(this,t);if(v&&v instanceof Error){this.data.push({dataXml:t,defaultAdXml:f,parameters:null});var m=Error("Malformed data xml");throw m.code=o.a.NO_ADS_RESPONSE,m.hint=".processDataXml()",m}return this.data.push({dataXml:t,defaultAdXml:f,parameters:v}),v}function lp(t){var e=this;return this.logger.log("._processExtensions() Processing custom extensions"),this.pushControlsDataStack(),Ih.call(this,t).then((function(){return e._getLastParameters()||{}})).catch((function(t){var r=t.code,i=t.format,n=t.options,a=t.fatal,s="One of custom extensions prevented start. "+(t&&t.message||t),l=Error(s);if(l.hint=".processExtensions()",a&&(l.fatal=a),r&&(l.code=r),n&&(l.options=n),r===o.a.FORMAT_ERROR&&i){var d=n||{},c=d.playerElement,u=d.playerAfter,h=d.playerBefore;bo.call(e,{playerElement:c,playerAfter:u,playerBefore:h})}throw l}))}function dp(t,e,r){void 0===e&&(e="");var i=t.code,o=t.fatal,n=t.message,a=t.hint;i&&Wi.i.call(this,t);var s=e+" "+(a||""),l=i?" code="+i+" ":" ";(o?this.logger.error:this.logger.warn)(""+s+l+"("+n+", Fatal: "+!!o+")"),o?this._abort({errorEventParams:{code:i,message:e}}):r?r():this._failedData({errorEventParams:t,shouldDestroyVpaid:!0})}function cp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function up(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cp(Object(r),!0).forEach((function(e){hp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var gp,fp=0,vp="Module",mp=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError","AdAudioDisabled","AdAudioEnabled","AdSizeForceChange","AdLoadedVideoData","AdVideoCompleteTrackOnly","NoAd","AdResumed","AdAudioOnlyStart","AdReadyToShow"],bp=["AdError","AdLoaded","AdLog","AdStopped","AdSkipped","AdReadyToShow"],yp={vpaidInitAdTimeout:7e3,vpaidInitAdSecTimeout:7e3,startAdTimeout:3e3,startAdSecTimeout:1e3,stopAdTimeout:1e3,dataRequestTimeout:7e3,skipAdTimeout:500,iframeRemoveDelay:1e3,disableHoverAudio:!0,startingVolume:b.h||b.i?0:void 0,forceStartingVolume:void 0,maxAds:1,beforeStopAdTimeout:700,minSlotWidthPercent:.4,adIgnoreSizeErrorState:!1,hideSpinnerControl:!1,hideTitleControl:!1,viqeoParentSlotClassName:"viqeo-parent-slot",listenWindowMessages:!1,passUrlParams:["vn_dsp","vn_campaign"],triggerAdStoppedAfterAdSkipped:!1,canExecuteNoAd:!1,checkTrackingResponse:!0,viqeoStarterUrl:"https://cdn.viqeo.tv/js/vq_starter.js"},Ap=function(t){var e,r;function i(e){var r,i,o="#"+fp+++"-"+Math.random().toString(36).substring(2,4),n=e||{},s=n.logLevel,l=n.ancestor,d=n.module,c=void 0!==s?s:a.b,u=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger);try{var h=window.parent;i=h&&h!==window&&(h.vn_module_id||h.parent&&h.parent.vn_module_id||h.parent.parent&&h.parent.parent.vn_module_id)}catch(t){}!i&&(i=l||d&&d.mainModuleId);var p,g,f,v=""+(i?i+" >> ":"")+vp+o;u?u=(null===(p=u)||void 0===p||null===(g=p.getChildWriter)||void 0===g?void 0:g.call(p,v))||u:u=(null===a.a||void 0===a.a||null===(f=a.a.getChildWriter)||void 0===f?void 0:f.call(a.a,v))||a.a;u.log(".constructor()",2),(r=t.call(this,up({},yp,{},e,{ancestor:vp,logger:u}))||this).mainModuleId=o,r.logLevel=c,r._initializeDate=new Date,r.startAdShouldBeInvoked=!1,r.adIgnoreSizeErrorState=r.options.adIgnoreSizeErrorState,r._subscribe((function(){r._adsLeft-=1}),"AdStarted"),r._subscribe((function(t,e){r.logger.warn(" triggers @AdError("+e+", "+t+")",2)}),"AdError"),r.pauseWasStartedByVPAID=!1,r.pausedWasStartedByVisibilityChange=!1,r.vpaid=null,r._adHasBeenLoaded=!1,r.lastPendingCommands={},r.data=[],sh.call(pp(r)),Ci.call(pp(r),{destroyIframeAction:r._destroyIframe.bind(pp(r)),logger:r.logger}),r.lastPendingVolumeCommand=null,r.reachInventories={},r._trackedErrorsFormats={},r._useExistsVideoSlot=!1,r.visibleInventoryWasSent=!1,r._adImpressionHappened=!1,r._completeWasTracked=!1,r._adStarted=!1,r.isVpaidStartAdWasInvokedOnce=!1,r._manualAdditionalSEQ=0,r.logger.trace(".constructor() Processing plugins"),Zh.call(pp(r));var m=Sp.bind(pp(r)),b=Cp.bind(pp(r));return r._moduleCharacteristicsRelations={"[LOCATION]":Pp.bind(pp(r)),"[SIZE]":m,"[SQUARE]":m,"[VISIBILITY]":m,"[WIDTH]":b,"[HEIGHT]":b,"[ACTUAL-WIDTH]":b,"[ACTUAL-HEIGHT]":b,"[SEQ]":Dp.bind(pp(r)),"[SEQ_FORMAT]":Ip.bind(pp(r))},r.logger.trace(".constructor() Done"),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=i.prototype;return n.toString=function(){return vp},n.initAd=function(e,r,i,n,a,s){var l=this;void 0===a&&(a={}),void 0===s&&(s={}),this.logger.log(".initAd("+e+", "+r+", "+i+", "+a+", "+s+")",2),t.prototype.initAd.call(this,e,r,i,n,a,s),this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this._disableExtensions=[];var d=s||{},c=d.disableExtensions,u=d.advancedParams;if(this.advancedParams=u,c)if(Array.isArray(c))this._disableExtensions=c;else try{this._disableExtensions=[].concat(JSON.parse(c))}catch(t){}a||(a={});var h=a.mainContainerIsIframe;void 0!==h&&(this.options.mainContainerIsIframe=Object(g.u)(h)),ls.a.call(this),ls.b.call(this);var p,f=a.isABTesting,v=a.AdParameters||a,b="string"==typeof v;if(b)try{p=JSON.parse(v)}catch(t){if(!p)try{p=Object(w.h)("?"+v.trim())||v||{}}catch(t){}}else p="object"==typeof v?up({},v):{};this.adParameters=p;var y=Object(Ct.a)("dataUrl");y?this.logger.log(".initAd() dataUrl ["+y+"] was restored from session storage[] ",2,"color:#ff5722; font-size:1.5em"):y=a.dataUrl||p.dataUrl,this.logger.log(".initAd() adParametersRaw="+v+" \nadParameters="+JSON.stringify(p||{},null,"\t")),f&&(y=y+(~y.indexOf("?")?"&":"?")+"ver=v2.39.27");var A=null,O=null,_=null,S=p||{},P=S.vnDebugDelay,C=S.vnDebugAdLoadedDelay,j=S.vnDebugErrorReason,E=S.vnDebugErrorReasonCode;if(P)return this.logger.log(".initAd() vnDebugDelay="+P+" vnDebugAdLoadedDelay="+C,2,"color:#ff5722; font-size:1.5em"),C>0&&setTimeout((function(){return l.trigger("AdLoaded")}),C),void setTimeout((function(){l.trigger("AdError",j||"",E||o.a.GENERAL_VPAID_ERROR)}),P);if(v.vnData){var D={};try{D=JSON.parse(v.vnData)}catch(t){}if(D.parameters)this.logger.log(".Getting parsed parameters from creativeData.AdParameters"),_="string"==typeof D.parameters?JSON.parse(D.parameters):D.parameters;else if(D.key)try{this.logger.log(".Getting parsed parameters from sessionStorage by key "+D.key),_=JSON.parse(sessionStorage.getItem(D.key))}catch(t){}D.disableExtensions&&(this._disableExtensions=this._disableExtensions.concat(D.disableExtensions),this.logger.log("Got disableExtensions")),_&&Array.isArray(_)||(be.b.call(this)&&this.trigger("AdError","Parsed parameters is not valid",o.a.GENERAL_VPAID_ERROR),this._destroy())}else if(!b||y||p.dataXml)p.dataXml&&(A=Object(w.j)(p.dataXml));else try{O=JSON.parse(v)}catch(t){this.logger.log(".initAd() failed parse adParameters")}var I,T=this.options.timeout||a.timeout||p.timeout;T&&(I=this.globalTimeoutProvider=new Ji(T,wp.bind(this,T),this.logger),this._addDestroyableObject(I),I.start());var k=this.environmentVars||{},V=k.videoSlot,R=k.iframe,M=k.parentFormat;this.parentFormat=M;var x=!!R;R&&this.logger.track(".initAd() iframe="+R);var N=this._useExistsVideoSlot=V&&Object(m.p)(V,"video");N&&this.setControlData("videoSlot",{node:V}),this.setControlData("slot",{node:s.slot}),this.logger.trace(".initAd() useExistsIframe="+x+" useExistsVideoSlot="+N);var L,F=s.format||{},W=F.name,H=void 0===W?"InStream":W,z=F.options;this.logger.trace(".initAd() Initializing format ("+H+")");try{if(!(L=Pi(this,H,z))){var B=".initAd() Unable to initialize format ("+H+")";return this.logger.error(B),void this._abort({errorEventParams:{code:o.a.FORMAT_ERROR,message:B}})}this._setFormat(L)}catch(t){var U=".initAd() Unable to initialize format ("+H+") "+t;return this.logger.warn(U),void this._abort({errorEventParams:{code:t.code||o.a.GENERAL_VPAID_ERROR,message:U}})}if(this.logger.trace(".initAd() Processing data starting..."),!_){var q=ud.call(this);Object(g.r)(q)||(this.data.push({dataXml:null,defaultAdXml:null,parameters:q}),Ih.call(this).then((function(){var t;L?t=qi(l):s.slot&&0!==e&&(t=function(t,e){var r=t.getControlData(Hi)||{},i=r.size,o=r.fatal,n=(i||{}).width;if(!n)return null;if(e>0&&e<n){var a=Xi(t),s=a.topWindow,l=a.contentParent;return Gi("\n    Width: "+e+";\n    Viewport: "+(s?s.innerWidth:"Unknown")+";\n    Container width: "+l.offsetWidth+";\n    Ratio: "+e/l.offsetWidth,!!o)}return null}(l,e)),t&&Wi.i.call(l,t,!0)})),this.pushControlsDataStack())}if(_){this.logger.trace(".initAd() execute _processParsedTreeNode() with vnParsedParameters"),this.data.push({parameters:_.shift()});var G=this._getLastParameters();this._disableExtensions&&this._disableExtensions.forEach((function(t){G&&delete G[t]})),_.forEach((function(t){return l.data.push({parameters:t})}));var X=(this.data[0]||{}).parameters;this.mainProc=function(t,e,r){void 0===r&&(r={}),op.call(this,up({parameters:t,format:e},r))}.bind(this,X,L),this.mainProc()}else O?(this.logger.trace(".initAd() we have adParametersData"),this.data.push({dataXml:null,defaultAdXml:null,parameters:O}),Object(g.r)(O)?dp.call(this,{code:o.a.NO_ADS_RESPONSE,message:"Empty data"},".initAd()"):(this.mainProc=function(t,e,r){void 0===r&&(r={}),op.call(this,up({parameters:O,format:e},r))}.bind(this,O,L),this.mainProc())):A?(this.logger.trace(".initAd() execute processDataXml() with dataXml"),this.mainProc=function(t,e,r){void 0===r&&(r={}),op.call(this,up({xml:t,format:e},r))}.bind(this,A,L),this.mainProc()):y?(this.logger.trace(".initAd() we have dataUrl="+y),I&&I.pause(),fd.call(this,y).then((function(t){return gd.call(l,t)})).then((function(t){l.mainProc=function(t,e,r){void 0===r&&(r={}),op.call(this,up({url:t,format:e},r))}.bind(l,t,L),l.mainProc()}))):this.logger.error(".initAd() Error: neither dataXml nor dataUrl nor adParametersData provided")},n.resizeAd=function(t,e,r,i){void 0===r&&(r=this.viewMode),void 0===i&&(i=!1);var o=this._adHasBeenLoaded,n=this.vpaid,a=this.format,s=Xe.b.call(this,vp)||{};if(o){s=this.savedAdParams=[],this.lastPendingCommands.resizeAd&&delete this.lastPendingCommands.resizeAd,this.logger.trace(".resizeAd("+t+", "+e+", "+r+")");var l=!i&&Object(g.q)(this.adWidth,t)||Object(g.q)(this.adHeight,e);this.adWidth=t,this.adHeight=e,this.viewMode=r;var d=this.getControlNode("container"),c=this.getControlNode("vpaidSlot"),u=Xe.c.call(this),h="absolute"!==(c&&getComputedStyle(c)||{}).position;if(h&&this.logger.log(' was detected that vpaid changed vpaidSlot position from "absolute"',2,"pink"),u&&"hidden"!==getComputedStyle(u).display&&u.clientHeight){var p=this.getControlNode("videoSlotParent");p&&u.parentElement!==p&&(this.logger.warn(".videoSlot was removed from start place. So we can not provide videoSlot anymore."),this.setControlData("videoSlot",{node:null}),Object(m.c)(u,{top:"0",left:"0",margin:"0"}),u=null)}if(l&&n&&(s.push((function(){return n.resizeAd(t,e,r)})),n.resizeAd(t,e,r)),d){var f=(a&&a.getOptions()||{}).setSizeByMedia,v=d.getBoundingClientRect()||{},b=v.width,y=v.height;if(u&&(y>0||h))this._saveVideoSlotParams(u),Object(m.c)(u,{position:"absolute",left:"50%",top:"50%",marginLeft:Object(g.t)(-t/2),marginTop:Object(g.t)(-e/2),width:Object(g.t)(t),height:Object(g.t)(e)});else if(Object(g.u)(f)){var A=this.getControlNode("wrapper"),O=A&&Xe.a.call(this),w=O.outsideHeight,_=O.insideHeight,S=e+(w||0)-(_||0);if(A){var P={height:Object(g.t)(S)};Object(m.c)(A,P),s.push({node:A,styles:P})}var C=this.getControlNode("iframe");if(C){var j={height:Object(g.t)(S)};Object(m.c)(C,j),s.push({node:C,styles:j})}}else if(!u&&c&&y>0){var E=Math.min(t,b),D=Math.min(e,y),I={position:"absolute",left:"50%",top:"50%",marginLeft:Object(g.t)(-E/2),marginTop:Object(g.t)(-D/2),width:Object(g.t)(E),height:Object(g.t)(D)};Object(m.c)(c,I),s.push({node:c,styles:I})}if(d){var T={textAlign:u&&"absolute"===u.style.position?"initial":"center"};Object(m.c)(d,T),s.push({node:d,styles:T})}Xe.d.call(this,vp,s)}}else{!!this._AdVideoStartWasHappenedAtLeastOnce&&!be.c.call(this,"playing","pausing","paused")&&s&&!s.length?Object(g.w)(s,this.logger,"Module .resizeAd(). State="+this.state):(this.lastPendingCommands.resizeAd=this.resizeAd.bind(this,t,e,r),this.logger.log(".resizeAd("+t+", "+e+", "+r+") as pending command ("+this.lastPendingCommands.resizeAd+")"))}},n.startAd=function(t){var e=this;if(be.a.call(this)){var r=(t||{}).checkVisibility,i=this.format&&this.format.getStartMethod&&"manual"===this.format.getStartMethod();if(this.logger.log(".startAd() state="+this.state+" checkVisibility="+r+" isManualStart="+i,1),r&&!i)this.logger.log(".startAd() Command was ingnored. state="+this.state+" checkVisibility="+r+" isManualStart="+i,1);else if(r&&i){this.logger.trace(".startAd() starting with check visibility"),this.startingWithCheckVisibility=!0;var n=this.format;be.d.call(this,"waitStarting"),n&&n._updateModuleState&&n._updateModuleState()}else if(be.c.call(this,["loaded","complete"])||this.startingWithCheckVisibility&&be.c.call(this,"waitStarting")){this.startingWithCheckVisibility=!1,this.logger.trace(".startAd() starting"),be.d.call(this,"starting");var a=this.vpaid,s=this.options,l=this.vnAfterplay,d=(s||{}).startAdTimeout,c=(s||{}).startAdSecTimeout;l&&l.shouldContinue()&&l._getTotalSuccessfulPlays()>0&&(d=c),d?(this.logger.log(".startAd() start "+Qi.c+" for waiting @AdStarted "+d+" ms"),this._addTimeout(Qi.c,(function(){e.logger.warn(".startAd() the waiting time ("+d+" ms) for @AdStarted event has expired"),a&&a.stopAd(),Wi.e.call(e,{code:o.a.START_AD_TIMEOUT_HAPPENED,message:"StartAd timeout is timed out timeout="+d+"ms"}),e._failedData({shouldDestroyVpaid:!0})}),d),Object(g.v)(a),a._subscribeOnce((function(){e.logger.trace(".startAd() Clearing "+Qi.c+" timeout",2),e._removeTimeout(Qi.c)}),"AdStarted"),a._subscribeOnce((function(){e.logger.warn(".startAd() vpaid.@AdError -> Clearing vpaid @AdStarted timeout"),e._removeTimeout(Qi.c)}),"AdError")):this.logger.log(".startAd() without timeout for waiting @AdStarted",1),this.globalTimeoutProvider&&this.globalTimeoutProvider.start(),this._vpaidStartAdWasInvoked=!0,this.isVpaidStartAdWasInvokedOnce=!0,this._vpaidStartAdInvokesTime=Date.now(),a.startAd()}else be.c.call(this,["playing","started"])||(this.logger.trace(".startAd() postpone"),this.startAdShouldBeInvoked=!0)}},n.pauseAd=function(t){this.pausedWasStartedByVisibilityChange=!(!t||!t.method||"onvisibilitychange"!==t.method.toLowerCase()),this.logger.log(".pauseAd() pausedWasStartedByVisibilityChange="+this.pausedWasStartedByVisibilityChange+" state="+this.state,1),be.c.call(this,["playing","started"])&&(be.d.call(this,"pausing"),this.vpaid.pauseAd())},n.resumeAd=function(){this.logger.log(".resumeAd()",1),be.c.call(this,["paused","pausing"])&&(be.d.call(this,"resuming"),this.vpaid.resumeAd())},n.stopAd=function(t){var e=this,r=(t||{}).force;this.logger.log(".stopAd() state="+this.state,1);var i=be.c.call(this,["destroying","destroyed"]);if(i||be.c.call(this,["stopped","stopping"])){var n=i&&".stopAd() state="+this.state+". module was already destroyed,"||".stopAd() state="+this.state+". stopAd() was already been invoked or event @AdStopped has already been received,";return this.logger.log(n,2,"pink"),void(this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped"),Yi.e.call(this,"AdStopped")))}be.c.call(this,"stopped")||be.d.call(this,"stopping");var a=this.vpaid,s=this.options,l=this.format,d=this.vnAfterplay,c=(s||{}).stopAdTimeout,u="ModuleStopAdTimerId";if(r&&d&&(d._destroy(),d=this.vnAfterplay=null),d&&d.shouldShowStub()&&d.manualRun&&!be.c.call(this,"afterplay")&&d.manualRun(),(!d||!d.shouldShowStub())&&l&&l.hide&&l.hide(),a&&!this._adStoppedWasCalled)try{Object(g.v)(a),a._subscribe((function(){e.logger.warn(".stopAd() vpaid.@AdError -> Clearing vpaid @AdStopped timeout"),e._removeTimeout(u)}),"AdError"),a._subscribe((function(){e.logger.trace(".stopAd() Clearing vpaid @AdStopped timeout",2),e._removeTimeout(u)}),"AdStopped"),a.stopAd()}catch(t){var h=t;(!h.code||h.code<o.a.GENERAL_LINEAR_ERROR)&&((h=new Error(t)).code=o.a.VPAID_JS_ERROR),Wi.i.call(this,h),this.logger.error(".stopAd(): "+h)}this._adStoppedWasCalled?Yi.d.call(this):c&&this._addTimeout(u,(function(){e.logger.warn(".stopAd() the waiting time "+c+" for @AdStopped event has expired, Force trigger @AdStopped"),Yi.d.call(e)}),c)},n.skipAd=function(){var t=this;this.logger.trace(".skipAd()");var e=this.getAdSkippableState();if(!be.c.call(this,"skipping")&&e){var r="ModuleSkipAdTimerId",i=this.vpaid,o=this.options.skipAdTimeout;be.d.call(this,"skipping"),this._restoreVideoSlotParams(),i&&(Object(g.v)(i),i._subscribeOnce((function(){t.logger.trace(" @AdSkipped Clearing skipAd timeout"),t._removeTimeout(r)}),"AdSkipped"),setTimeout((function(){return i.skipAd()}),1)),o&&this._addTimeout(r,(function(){t.logger.warn(".skipAd() Timed out ("+o+") force trigger @AdSkipped"),Yi.c.call(t)}),o)}},n.getAdRemainingTime=function(){return this.vpaid&&this.vpaid.getAdRemainingTime()||0},n.getAdElapsedTime=function(){return this.vpaid&&this.vpaid.getAdElapsedTime()||t.prototype.getAdElapsedTime.call(this)},n.getAdDuration=function(){return this.adDuration>=0&&this.adDuration||(this.vpaid?this.adDuration=this.vpaid.getAdDuration():0)},n.getAdAspectRatio=function(){var e=this.vpaid;return e&&e.getAdAspectRatio()||t.prototype.getAdAspectRatio.call(this)},n.processDataXml=function(t){return sp.call(this,t)},n.setAdVolume=function(e,r){if(!be.a.call(this))return null;var i=(r=up({},{invoker:null},{},r)).invoker,o=this.getControlInstance("volume"),n=!i;this.logger.trace(" setAdVolume("+e+", params="+JSON.stringify(r,["step","invoker","smoothUpdate"])+") this.vpaid="+this.vpaid+" isOutsideRequest="+n+" this._useExistsVideoSlot="+this._useExistsVideoSlot+" volumeControl="+o),this._useExistsVideoSlot&&n&&o&&(o.cancelVolumeUpdate(),this.logger.log(" make volumeControl.cancelVolumeUpdate() and vpaid.setAdVolume("+e+")"));var a=this.canChangeVolume();if(this.vpaid&&(!e||a))return this.vpaid.setAdVolume(e,r),t.prototype.setAdVolume.call(this,e,r);e&&!a&&this.logger.warn(" setAdVolume() attempt to set adVolume="+e+" was ignored (state="+this.state+")"),this.logger.trace(" setAdVolume("+e+") as pending command"),this.canChangeVolume()&&(this.lastPendingVolumeCommand=this.setAdVolume.bind(this,e,r))},n._destroy=function(){var e=this,r=(this.options||{}).iframeRemoveDelay;if(!be.c.call(this,["destroying","destroyed"])){r&&(this._delayRemovingControls={containerIframe:{delay:r}}),this.lastPendingCommands={},be.d.call(this,"destroying"),Yi.g.call(this,this.vnShowViqeo?["AdStarted"]:[]);var i=this.vpaid,o=this.globalTimeoutProvider;this._restoreVideoSlotParams(),this._removeTimeout(Qi.b),o&&o.stop(),this.logger.trace(".destroy() Destroying"),this._subscribeOnce((function(){e.logger.trace(".destroy() Removing controls"),e.clearControlsCollection(),i&&(Object(g.v)(i),e.logger.trace(".destroy() Removing VPAID"),i._subscribeOnce((function(){e.logger.trace(".destroy() VPAID removed"),e.vpaid=null}),"AdDestroyed"),i._destroy()),e.vnAdEvents&&e.vnAdEvents._destroy(),e.vnPageChanged&&e.vnPageChanged._destroy(),e.format=null,e.data=[],be.d.call(e,"destroyed"),e.logger.log(".destroy() Destroyed",2)}),"AdDestroyed"),t.prototype._destroy.call(this)}},n._restoreVideoSlotParams=function(){var t=this.getControlUnionData("videoSlot")||{},e=t.node,r=t.savedCss;if(e&&r&&r.length){var i=r[0].style;this.logger.trace("._restoreVideoSlotParams() styles="+JSON.stringify(i)),i&&Object(m.c)(e,i)}},n._saveVideoSlotParams=function(t){if(this._useExistsVideoSlot){var e=this.getControlUnionData("videoSlot"),r=(t||e.node||{}).style,i=r?{style:{width:r.width,height:r.height}}:null,o=e.savedCss;(o||(o=[])).push(i),this.setControlData("videoSlot",{node:e.node||t,savedCss:o})}},n._setFormat=function(t){this.logger.log(".setFormat("+t+")"),this.format=t,this._destroyIframe(),t.hasReachInventoryFactory&&t.hasReachInventoryFactory()&&!Object(g.r)(this._getLastParameters())&&Fi(this),bd.call(this);var e=t.getModuleOptions();e&&(this.logger.trace("._setFormat() updateOptionsFromFormat options="+JSON.stringify(e,null,"\t")),ls.b.call(this,e)),Object(g.v)(t),t._subscribe(_p.bind(this),"vnFormatStateChanged",t),this.anckorElement=t.getAnchorElement&&t.getAnchorElement();var r=t.getSlotSize&&t.getSlotSize()||{},i=r.width,o=r.height;this.setControlData("vnMacros",{"[WIDTH]":i||0,"[HEIGHT]":o||0});var n=qi(this);n&&Wi.i.call(this,n,!0)},n._getLastDataXml=function(t){void 0===t&&(t=0);var e=this.data;if(!e||e.length<t)return null;var r=e[e.length-(t+1)];return r&&r.dataXml},n._getLastData=function(t){void 0===t&&(t=0);var e=this.data;return!e||e.length<t?null:e[e.length-(t+1)]},n._getLastDefaultAdXml=function(t){void 0===t&&(t=0);var e=this._getLastData(t);return e&&e.defaultAdXml},n._getLastParameters=function(t){void 0===t&&(t=0);var e=this._getLastData(t);return e&&e.parameters},n._updateLastParameters=function(t,e,r){void 0===r&&(r=0);var i=this.data;if(i&&!(i.length<r)){var o=i.length-(r+1),n=i[o];if(!n)throw Error("_updateLastParameters. Out of index ["+o+"]. data.length="+i.length+" step="+r);this.logger.trace("._updateLastParameters() key="+t+" value="+JSON.stringify(e,null,"\t"));var a=n.parameters;a||(a=n.parameters={});var s=a[t];a[t]=s?[].concat(s,e).sort((function(t,e){return(t.orderIndex||0)-(e.orderIndex||0)})):e}},n._failedData=function(t){var e=this,r=t||{},i=r.shouldAbort,n=void 0!==i&&i,a=r.shouldResetPlugins,s=r.shouldDestroyVpaid,l=(t||{}).errorEventParams,d=(this.options||{}).canExecuteNoAd;this.logger.warn(".failedData"),this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this.lastPendingCommands={},this._adHasBeenLoaded=!1,this._completeWasTracked=!1;var c=this._trackPassed;(this._track2Passed||!c?Promise.resolve():Wi.k.call(this)).then((function(){e._trackPassed=!1,e._track2Passed=!1;var r,i,c=e.vnAfterplay,u=e.vpaid;if(u&&s&&(u._destroy&&u._destroy(),e.vpaid=null),e._adsLeft<0&&(!c||!c.shouldContinue())){var h=(e.options||{}).maxAds;return e.logger.warn(".failedData() maxAds("+h+") option exceeded"),l||(l={code:o.a.GENERAL_VPAID_ERROR,message:"maxAds("+h+") option exceeded"}),void e._abort({errorEventParams:{code:l.code,message:l.message,cancel:l.cancel}})}Wi.e.call(e,{code:(null===(r=l)||void 0===r?void 0:r.code)||o.a.DEFAULT_AD_NEXT_WITHOUT_ERROR_CODE,message:"Proceed to next vnDefaultAd. "+((null===(i=l)||void 0===i?void 0:i.message)||"No specific error message was passed.")});var p=null;do{var g=e.getControlUnionData("vnNoAd")||{};if(e.popControlsDataStack(),p=(e.data.pop()||{}).defaultAdXml,(!e.data.length&&!p||n)&&!e._runningVnNoAd){if(c&&c.shouldContinue()){var f=e.mainProc,v=c._getTotalSuccessfulPlays(),m=c._getSuccessfulPlays();if(f&&m>0){var b=c._incCycleCounter();return e.logger.log(".No more Ads. "+v+" Ads has been played from "+c._getContinueNumber()+". cycleCounter="+b+".\n Start again!",2,"color:blue;font-size:1.2em;font-weight:bold"),void f()}e.logger.log(". No additional advertisements out of the required "+c._getContinueNumber()+" were played. Exit.")}else e.logger.track(".failedData() No more defaultAd canExecuteNoAd="+d);var y=l||{},A=y.code,O=y.message;return A||(l={code:o.a.GENERAL_VPAID_ERROR,message:O||"No playable sources found"}),void(g&&!0===d?(e._runningVnNoAd=!0,xi(e,g).then((function(){return e.logger.log(".executing vnNoAd")})).catch((function(){return e._abort({errorEventParams:{code:l.code,message:l.message,cancel:l.cancel}})}))):e._abort({errorEventParams:{code:l.code,message:l.message,cancel:l.cancel}}))}}while(e.data.length&&!p||n);var w=(t||{}).logMessage;e.logger.log(w||".failedData() Processing next defaultAd",2);var _=e.filterFormatName;!c&&u&&u._destroy&&u._destroy(),Yi.g.call(e),op.call(e,{xml:p,filters:_?{formatName:_}:{},shouldResetPlugins:a}).then((function(t){return e.trigger("vnProceedToNextDefaultAd",t)}))}))},n._abort=function(t){this.logger.track("._abort() params="+JSON.stringify(t));var e=(t||{}).errorEventParams||{},r=e.code,i=e.message,o=e.cancel;this.format&&this.format.abort(),this.vnShowViqeo||o||!be.b.call(this)||(this.trigger("AdError",i||"",r),Yi.e.call(this,"AdError")),this._destroy()},n._replay=function(){var t=this.vpaid;t&&t._destroy&&t._destroy(),this._useExistsVideoSlot||this.setControlData("videoSlot",{node:null}),this.vpaid=null,this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this.lastPendingCommands={},this._adHasBeenLoaded=!1,this._completeWasTracked=!1,this._initializeDate=new Date,tp.call(this)},n._destroyIframe=function(){var t=this,e=this.vnAfterplay;if(this.environmentVars&&this.environmentVars.iframe||e&&e.shouldContinue())return!1;var r=this.getControlUnionData("iframe")||{},i=r.node,o=r.removeDelay;return i?(i.onload=null,o?setTimeout((function(){return t._removeDOMNode(i)}),o):this._removeDOMNode(i),this.logger.trace(" _destroyIframe(). iframe has been destroyed.")):this.logger.trace(" _destroyIframe() iframe does not exists. nothing to destroy."),this.setControlData("iframe",{node:null}),!0},n._applyLayout=function(t){var e=this;Object.keys(t).forEach((function(r){var i=e.getControlUnionData(r,"css"),o=t[r]||{};i=i?up({},i,{},o):up({},o),e.setControlData(r,{css:i})}))},n.isMediaUrlBlocked=function(t){var e=this.getControlUnionData("vnCreativeBlock","urls");if(!e)return!1;var r=Object.keys(e).some((function(r){return t.split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()===e[r]}));return r&&this.logger.track(" isMediaBlocked() "+t+" has been blocked"),r},n.setSelectedCreative=function(t,e,r){void 0===r&&(r=null);var i=encodeURIComponent(t);if(i&&(this._media=i),r=r&&r.replace&&r.replace(/[\t\n\r ]/gi,""),this.setControlData("vnMacros",{"[ASSETURI]":i,"[ASSETDURATION]":e,"[ASSETADPARAMS]":r}),Wi.d.call(this)){var o=Wi.c.call(this,"vnCreative:select")||{},n=o.urls,a=o.uniqueId,s=(n||[])[0];this.logger.track(" vnCreative:select post("+s+")"),s&&this.replaceMacros(s,a).then(Ue.c)}},n.replaceMacros=function(t,e){var r=this;t=t.replace(/%%SITE%%/g,location&&location.hostname||"").replace(/%%SCHEME%%/g,location&&location.protocol||"").replace(/%%.*?%%/g,"");var i=Date.now(),o=/(\[TIME])|(\[TIME_L])|(\[TIME_G])|(\[TIME_W])|(\[REQUEST_STARTED])/g.test(t),n=Object(w.h)(t);return jp.call(this,n).then((function(){var n=(r.getControlUnionData("vnTrackingParams")||{}).trackingParams,a=up({},r.getControlUnionData("vnMacros"),{},n);if(o){var s=Op.call(r,e)||null;a["[REQUEST_STARTED]"]=s||-1,a["[TIME]"]=s?i-s:-1,a["[TIME_L]"]=s?i-s:-1,a["[TIME_G]"]=i-r._initializeDate,a["[TIME_W]"]=i.valueOf()}var l=0===r.getAdVolume(),d=!Object(g.q)(r.getAdWidth(),window.innerWidth)&&!Object(g.q)(r.getAdHeight(),window.innerHeight);return a["[PLAYERSTATE]"]=[l?"muted":null,d?"fullscreen":null].filter(Boolean).join(","),r.substituteMacroValue(t,a)}))},n.substituteMacroValue=function(t,e){var r=e||this.getControlUnionData("vnMacros");return r?Object.keys(r).reduce((function(t,e){return t&&t.replace(e,r[e])}),t):t},n.canChangeVolume=function(){return this.logger.none(" canChangeVolume(): this.state="+this.state),be.c.call(this,["started","playing","paused","loaded"])},n.vpaidJsVideoSlotShouldBeMuted=function(){return this.options&&this.options.vpaidJsVideoSlotShouldBeMuted},n.isVpaidJs=function(){return this.vpaid&&~this.vpaid.toString().indexOf("VpaidJs")},n.getAnchorElement=function(){return this.anckorElement},n.trigger=function(e){for(var r=this,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];var a=!0;this._adHasBeenLoaded&&!this._adStoppedTriggered||bp.includes(e)||(a=!1),mp.includes(e)||(a=!1);var s=a?t.prototype.trigger:t.prototype.triggerInternal,l=this.getControlUnionData("vnEventsParams")||{},d=l.eventsParams,c=d&&d[e];jp.call(this,c).then((function(t){o.length&&"object"==typeof o[0]?(o[0]=up({},o[0],{},t),s.apply(r,[].concat(e,o))):s.apply(r,[].concat(e,o,t))}))},n.getAPI=function(){var t=this;return{getMainModuleId:function(){return t.mainModuleId},getFormat:function(){return t.format},getVpaid:function(){return t.vpaid},setControlData:this.setControlData.bind(this),getControlUnionData:this.getControlUnionData.bind(this),getControlUnionDataGlobal:this.getControlUnionDataGlobal.bind(this),getControlRawUnionData:this.getControlRawUnionData.bind(this),getControlRawUnionDataGlobal:this.getControlRawUnionDataGlobal.bind(this),getControlNode:this.getControlNode.bind(this),getVideoSlot:Xe.c.bind(this),getControlInstance:this.getControlInstance.bind(this),getLastParameters:this._getLastParameters.bind(this),updateLastParameters:this._updateLastParameters.bind(this),getOptions:function(){return up({},t.options)},getEnvironmentVars:function(){return up({},t.environmentVars)},extendEnvironmentVars:function(e){return Object(_.g)(t.environmentVars,e)},getAdWidth:function(){return t.getAdWidth()},getAdHeight:function(){return t.getAdHeight()},getIndents:Xe.a.bind(this),saveVideoSlotParams:this._saveVideoSlotParams.bind(this),getAdAspectRatio:this.getAdAspectRatio.bind(this),getAdSkippableState:this.getAdSkippableState.bind(this),setAdSkippableState:this.setAdSkippableState.bind(this),getAdRemainingTime:this.getAdRemainingTime.bind(this),getAdElapsedTime:this.getAdElapsedTime.bind(this),getAdDuration:this.getAdDuration.bind(this),resizeAd:this.resizeAd.bind(this),setWrapperSize:Ep.bind(this),inState:be.c.bind(this),startAd:this.startAd.bind(this),pauseAd:this.pauseAd.bind(this),resumeAd:this.resumeAd.bind(this),trackStrongUrls:Wi.m.bind(this),addVPAIDEventListener:function(e,r,i){return void 0===i&&(i=t),i._addVPAIDEventListener(t,e,r)},removeVPAIDEventListener:function(e,r,i){return void 0===i&&(i=t),i._removeVPAIDEventListener(t,e,r)},isVpaidJs:this.isVpaidJs.bind(this),trigger:this.trigger.bind(this),logger:this.logger,getState:function(){return t.state},getTotalSuccessfulPlays:function(){return t.vnAfterplay&&t.vnAfterplay._getTotalSuccessfulPlays()||0},AdVideoStartWasHappenedAtLeastOnce:function(){return t._AdVideoStartWasHappenedAtLeastOnce},getSavedAdParams:Xe.b.bind(this),saveAdParams:Xe.d.bind(this),abort:function(e){return void 0===e&&(e={code:o.a.GENERAL_VPAID_ERROR,message:"module aborted"}),t._failedData({shouldAbort:!0,shouldDestroyVpaid:!0,errorEventParams:e})},fail:function(e){return void 0===e&&(e={code:o.a.GENERAL_VPAID_ERROR,message:"module failed"}),t._failedData({shouldAbort:!1,shouldDestroyVpaid:!0,errorEventParams:e})}}},n.getAdIframes=function(){var t,e=this.vpaid,r=this.getControlNode("iframe");try{t=null!=r.contentWindow}catch(e){t=!1}var i=[];return e&&e.getAdIframes&&(i=i.concat(e.getAdIframes())),i=i.concat(Promise.resolve(t?r:window)),Promise.all(i).then((function(t){return t.filter((function(t){return t}))}))},i}(i.a);function Op(t){var e=this._requestStartedData;if(!e||!e.length)return null;for(var r=e.length-1;r>=0;r--){var i=e[r]||{},o=i.uniqueId,n=i.time;if(t===o)return n}return null}function wp(t){var e="Global timeout is timed out timeout="+t+"ms";this.logger.warn(e),this._removeTimeout(Qi.e),this._removeTimeout(Qi.c),Wi.i.call(this,{code:o.a.GLOBAL_TIMEOUT_HAPPENED,message:e}),this._failedData({shouldDestroyVpaid:!0,shouldAbort:!0,errorEventParams:{code:o.a.GENERAL_VPAID_ERROR,message:e}})}function _p(t){this.trigger("vnFormatStateChanged",t),t&&"isFloating"in t&&(this.adIgnoreSizeErrorState=!0===t.isFloating)}function Sp(){var t=this,e=function(e){var r=up({},{intersectionRatio:0,visibility:0,moduleSquare:0,screenSquare:0,relationSize:null},{},e);return t.setControlData("vnMacros",{"[SQUARE]":r.moduleSquare},!0),t.setControlData("vnMacros",{"[VISIBILITY]":r.visibility},!0),t.setControlData("vnMacros",{"[SIZE]":r.relationSize},!0),r};try{var r,i,o=Xe.c.call(this),n=o&&o.clientHeight?o:(r=this.getControlNode("slot"))&&r.clientHeight?r:(i=this.getControlNode("iframe"))&&i.clientHeight?i:null;return n?g.o.call(this,n).then((function(t){return e(t)})):Promise.resolve(e())}catch(t){var a=t&&(t.message||t);return this.logger.error(a),Promise.resolve(e())}}function Pp(){try{var t=Object(g.m)(window,document),e=t&&encodeURIComponent(t);return this.setControlData("vnMacros",{"[LOCATION]":e||"null"}),Promise.resolve(e)}catch(t){var r=t&&(t.message||t);return this.logger.error(r),Promise.resolve()}}function Cp(){var t=this.format,e=t.getSlotSize&&t.getSlotSize()||{},r=e.width,i=e.height;return this.setControlData("vnMacros",{"[WIDTH]":r||0,"[HEIGHT]":i||0,"[ACTUAL-WIDTH]":r||0,"[ACTUAL-HEIGHT]":i||0},!0),Promise.resolve({width:r,height:i})}function jp(t){var e=this;return new Promise((function(r){var i=[];if(!Object(g.r)(t)){var o=e._moduleCharacteristicsRelations;i=(t&&Object.keys(t).map((function(e){return t[e]}))).reduce((function(t,e){var r=o[e];return r&&!t.some((function(t){return t===r}))&&t.push(r),t}),[])}return(!i&&Promise.resolve()||Promise.all(i.map((function(t){return t()})))).then((function(){var i=t&&Object.keys(t).reduce((function(r,i){return t[i]&&(r[i]=e.substituteMacroValue(t[i])),r}),{})||{};r(i)}))}))}function Ep(t){this.logger.trace(".setWrapperSize("+t+")");var e=this.getControlNode("wrapper");return e&&Object(m.c)(e,{height:Object(g.t)(t)}),e}function Dp(){var t=this.vnAfterplay,e=this._manualAdditionalSEQ,r=(t&&t._getTotalSuccessfulPlays()||e||0)+1;return this.setControlData("vnMacros",{"[SEQ]":r},!0),r}function Ip(){var t=this.vnAfterplay,e=this.format,r=t&&t._getTotalSuccessfulPlays()||0;return this.setControlData("vnMacros",{"[SEQ_FORMAT]":r>0&&e&&e.getBaseName&&e.getBaseName()||""}),r}var Tp=(null===a.a||void 0===a.a||null===(gp=a.a.getChildWriter)||void 0===gp?void 0:gp.call(a.a,"ModuleWindowFns"))||a.a;window.createVPAIDAd=function(t){return Tp.log("Requested new module instance via window.createVPAIDAd()"),new Ap(t)},window.getVPAIDAd=function(t){return Tp.log("Requested module instance via window.getVPAIDAd()"),new Ap(t)}}]);